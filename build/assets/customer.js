"use strict";!function(){var e="b2c-menu--to-right",t=document.querySelector(".b2c-menu"),o=document.querySelector(".b2c-menu__content"),n=document.querySelector(".b2c-menu__trigger");(t||o||n)&&(o.style.animation="none",n.addEventListener("click",function(){o.style.animation="",t.classList.toggle("b2c-menu--active")}),window.addEventListener("scroll",function(){0<window.scrollY-232?t.classList.add(e):t.classList.remove(e)}))}(),function(){function e(e){return"[".concat(e,"]")}function o(e){e.style.display="none"}function n(e){e.style.display="block"}var c="rh-country-data-section",r="rh-country-data-trigger",i="rh-country-data",a="rh-country-data-title",d="CountryPage__TabLink--Active",u=document.querySelectorAll(e(i)),l=document.querySelectorAll(e(c)),t=document.querySelectorAll(e(r)),s=document.querySelectorAll(e(a));u.forEach(o),l.forEach(o),s.forEach(function(e){return e.classList.remove(d)}),t.forEach(function(t){t.addEventListener("click",function(){var e;u.forEach(o),l.forEach(o),s.forEach(function(e){return e.classList.remove(d)}),n(document.querySelector((e=t.getAttribute(r),"[".concat(i,' = "').concat(e,'"]')))),n(document.querySelector((e=t.getAttribute("rh-country-data-section-trigger"),"[".concat(c,' = "').concat(e,'"]')))),document.querySelectorAll((e=t.getAttribute(r),"[".concat(a,' = "').concat(e,'"]'))).forEach(function(e){return e.classList.add(d)})})})}(),function(){var t=document.querySelector(".Feedback"),e=document.querySelectorAll(".Feedback__Trigger"),o=document.querySelector(".Feedback__Screenlock"),n=document.querySelector(".Feedback__CloseTrigger"),c="Feedback--Active";t&&e&&o&&n&&(e.forEach(function(e){e.addEventListener("click",function(){t.classList.add(c)})}),o.addEventListener("click",function(){t.classList.remove(c)}),n.addEventListener("click",function(){t.classList.remove(c)}))}(),function(){function e(e){return"[".concat(e,"]")}function o(e){e.style.display="none"}var n="hotel-tab-trigger-index",c="hotel-data",r="HotelPage__TabLink--Active",i=document.querySelectorAll(e(c)),a=document.querySelectorAll(e(n));i.forEach(o),a.forEach(function(t){t.addEventListener("click",function(){var e;i.forEach(o),a.forEach(function(e){e.classList.remove(r)}),t.classList.add(r),document.querySelector((e=t.getAttribute(n),"[".concat(c,' = "').concat(e,'"]'))).style.display="block"})})}(),function(){var e,t=document.querySelector(".mobile-sidebar"),o=document.querySelector(".mobile-sidebar-trigger"),n=document.querySelector(".mobile-sidebar__close-trigger"),c=document.querySelector(".mobile-sidebar__screenlock"),r=document.querySelectorAll(".mobile-sidebar__item"),i="mobile-sidebar--active";t&&o&&n&&c&&0!==r.length&&(e=function(){document.body.style.overflow="auto",t.classList.remove(i)},r.forEach(function(e){var t=e.querySelector(".mobile-sidebar__submenu-trigger"),o=e.querySelector(".mobile-sidebar__submenu");t.addEventListener("click",function(){document.querySelectorAll(".mobile-sidebar__submenu").forEach(function(e){e!==o&&e.classList.remove("mobile-sidebar__submenu--active")}),o.classList.toggle("mobile-sidebar__submenu--active")})}),window.addEventListener("resize",function(){769<=window.innerWidth&&e()}),o.addEventListener("click",function(){document.body.style.overflow="hidden",t.classList.add(i)}),n.addEventListener("click",e),c.addEventListener("click",e))}(),function(){var e,t=document.querySelector(".MobileSidebar"),o=document.querySelector(".mobile-sidebar-trigger"),n=document.querySelector(".MobileSidebar__CloseTrigger"),c=document.querySelector(".MobileSidebar__ScreenLock"),r=document.querySelectorAll(".MobileSidebar__SecondContentItem"),i="MobileSidebar--Active";t&&o&&n&&c&&0!==r.length&&(e=function(){document.body.style.overflow="auto",t.classList.remove(i)},r.forEach(function(e){var t=e.querySelector(".MobileSidebar__SecondContentSubmenuTrigger"),o=e.querySelector(".MobileSidebar__SecondContentSubmenu");t.addEventListener("click",function(){document.querySelectorAll(".MobileSidebar__SecondContentSubmenu").forEach(function(e){e!==o&&e.classList.remove("MobileSidebar__SecondContentSubmenu--Active")}),o.classList.toggle("MobileSidebar__SecondContentSubmenu--Active")})}),window.addEventListener("resize",function(){769<=window.innerWidth&&e()}),o.addEventListener("click",function(){document.body.style.overflow="hidden",t.classList.add(i)}),n.addEventListener("click",e),c.addEventListener("click",e))}(),function(){var e=document.querySelectorAll(".rh-accordion");e&&e.forEach(function(e){e.querySelector(".rh-accordion__trigger").addEventListener("click",function(){e.classList.toggle("rh-accordion--active")})})}(),function(){var e=document.querySelectorAll(".RHAccordion");e&&e.forEach(function(e){e.querySelector(".RHAccordion__Trigger").addEventListener("click",function(){e.classList.toggle("RHAccordion--Active")})})}(),function(){var e,t,o=document.querySelector(".search-form-switch__button_tour"),n=document.querySelector(".search-form-switch__button_hotel"),c=document.querySelector(".search-form-switch__form_tour"),r=document.querySelector(".search-form-switch__form_hotel");o&&n&&c&&r&&(e="search-form-switch__button--active",t="search-form-switch__form--active",o.addEventListener("click",function(){o.classList.add(e),c.classList.add(t),n.classList.remove(e),r.classList.remove(t)}),n.addEventListener("click",function(){n.classList.add(e),r.classList.add(t),o.classList.remove(e),c.classList.remove(t)}))}(),document.addEventListener("DOMContentLoaded",function(){var e=".CountryPage__TabsContainer--Scroll";document.querySelector(e)&&new Splide(e,{autoplay:!1,arrows:!1,pagination:!1,autoWidth:!0}).mount()}),document.addEventListener("DOMContentLoaded",function(){var e=".HotelPage__TabsContainer--Scroll";document.querySelector(e)&&new Splide(e,{autoplay:!1,arrows:!1,perMove:1,pagination:!1,autoWidth:!0}).mount()}),document.addEventListener("DOMContentLoaded",function(){var e=".HotelPage__PhotoSlider";document.querySelector(e)&&new Splide(e,{type:"loop",autoplay:!0,perPage:5,autoWidth:!0,perMove:1,pagination:!1}).mount()}),document.addEventListener("DOMContentLoaded",function(){var e=".b2b-top-slider";document.querySelector(e)&&new Splide(e,{type:"loop",autoplay:!0,arrows:!1}).mount()}),document.addEventListener("DOMContentLoaded",function(){var e=".with-you-slider";document.querySelector(e)&&new Splide(e,{type:"loop",pagination:!1}).mount()}),document.addEventListener("DOMContentLoaded",function(){var e=".our-guests-slider",t=".our-guests-slider--mobile";document.querySelector(e)&&new Splide(e,{type:"loop",autoplay:!0,arrows:!0,pagination:!1,gap:20,perPage:3}).mount(),document.querySelector(t)&&new Splide(t,{type:"loop",autoplay:!0,arrows:!0,pagination:!1,perPage:1}).mount()}),document.addEventListener("DOMContentLoaded",function(){var e=".our-goods-slider";document.querySelector(e)&&new Splide(e,{type:"loop",autoplay:!1,arrows:!1,perPage:1}).mount()}),document.addEventListener("DOMContentLoaded",function(){var e=".b2c-blog-slider",t=".b2c-blog-slider--mobile";document.querySelector(e)&&new Splide(e,{type:"loop",autoplay:!1,arrows:!0,pagination:!1,gap:20,perPage:4}).mount(),document.querySelector(t)&&new Splide(t,{type:"loop",autoplay:!0,arrows:!0,pagination:!1,perPage:1}).mount()});
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImIyYy1tZW51LmpzIiwiY291bnRyeS1pbmZvLWhhbmRsZXIuanMiLCJmZWVkYmFjay5qcyIsImhvdGVsLXRhYnMuanMiLCJtb2JpbGUtc2lkZWJhci5qcyIsInJoLWFjY29yZGlvbi5qcyIsInNlYXJjaC1mcm9tLXN3aXRjaC5qcyIsInNwbGlkZS1pbml0aWF0b3IuanMiXSwibmFtZXMiOlsiYjJjTWVudVRvUmlnaHRDbGFzcyIsImIyY01lbnVFbGVtZW50IiwiZG9jdW1lbnQiLCJxdWVyeVNlbGVjdG9yIiwiYjJjTWVudUNvbnRlbnRFbGVtZW50IiwiYjJjVHJpZ2dlckVsZW1lbnQiLCJzdHlsZSIsImFuaW1hdGlvbiIsImFkZEV2ZW50TGlzdGVuZXIiLCJjbGFzc0xpc3QiLCJ0b2dnbGUiLCJ3aW5kb3ciLCJzY3JvbGxZIiwiYWRkIiwicmVtb3ZlIiwiYXR0cmlidXRlTmFtZVRvUXVlcnkiLCJhdHRyaWJ1dGVOYW1lIiwiY29uY2F0IiwiaGlkZUVsZW1lbnQiLCJlbGVtZW50IiwiZGlzcGxheSIsInNob3dFbGVtZW50IiwiZGF0YVNlY3Rpb25BdHRyaWJ1dGVOYW1lIiwiZGF0YVRyaWdnZXJBdHRyaWJ1dGVOYW1lIiwiZGF0YUF0dHJpYnV0ZU5hbWUiLCJkYXRhVGl0bGVBdHRyaWJ1dGVOYW1lIiwiZ29sZEJnQ2xhc3MiLCJkYXRhcyIsInF1ZXJ5U2VsZWN0b3JBbGwiLCJkYXRhU2VjdGlvbnMiLCJkYXRhVHJpZ2dlcnMiLCJkYXRhVGl0bGVzIiwiZm9yRWFjaCIsImRhdGFUaXRsZSIsImRhdGFUcmlnZ2VyIiwiaWQiLCJnZXRBdHRyaWJ1dGUiLCJmZWVkYmFjayIsImZlZWRiYWNrVHJpZ2dlcnMiLCJmZWVkYmFja1NjcmVlbmxvY2siLCJmZWVkYmFja0Nsb3NlVHJpZ2dlciIsImZlZWRiYWNrQWN0aXZlQ2xhc3MiLCJmZWVkYmFja1RyaWdnZXIiLCJkYXRhVHJpZ2dlcjIiLCJjbG9zZVNpZGViYXIiLCJtb2JpbGVTaWRlYmFyRWxlbWVudCIsIm1vYmlsZVNpZGViYXJUcmlnZ2VyRWxlbWVudCIsIm1vYmlsZVNpZGViYXJDbG9zZVRyaWdnZXJFbGVtZW50IiwibW9iaWxlU2lkZWJhclNjcmVlbmxvY2tFbGVtZW50IiwibW9iaWxlU2lkZWJhckl0ZW1FbGVtZW50cyIsIm1vYmlsZVNpZGViYXJBY3RpdmVDbGFzcyIsImxlbmd0aCIsImJvZHkiLCJvdmVyZmxvdyIsIm1vYmlsZVNpZGViYXJJdGVtRWxlbWVudCIsInRyaWdnZXIiLCJzdWJtZW51Iiwic3VibWVudUVhY2giLCJpbm5lcldpZHRoIiwiYWNjb3JkaW9uRWxlbWVudHMiLCJhY2NvcmRpb24iLCJidXR0b25BY3RpdmVDbGFzcyIsImZvcm1BY3RpdmVDbGFzcyIsInRvdXJTZWFyY2hCdXR0b25FbGVtZW50IiwiaG90ZWxTZWFyY2hCdXR0b25FbGVtZW50IiwidG91clNlYXJjaEZvcm1FbGVtZW50IiwiaG90ZWxTZWFyY2hGb3JtRWxlbWVudCIsInNsaWRlckVsZW1lbnRRdWVyeSIsIlNwbGlkZSIsImF1dG9wbGF5IiwiYXJyb3dzIiwicGFnaW5hdGlvbiIsImF1dG9XaWR0aCIsIm1vdW50IiwicGVyTW92ZSIsInR5cGUiLCJwZXJQYWdlIiwic2xpZGVyRWxlbWVudFF1ZXJ5TW9iaWxlIiwiZ2FwIl0sIm1hcHBpbmdzIjoiY0FBQSxXQUNBLElBS0FBLEVBQUEscUJBRUFDLEVBQUFDLFNBQUFDLGNBUEEsYUFRQUMsRUFBQUYsU0FBQUMsY0FQQSxzQkFRQUUsRUFBQUgsU0FBQUMsY0FQQSx1QkFTQUYsR0FBQUcsR0FBQUMsS0FJQUQsRUFBQUUsTUFBQUMsVUFBQSxPQWVBRixFQUFBRyxpQkFBQSxRQUxBLFdBQ0FKLEVBQUFFLE1BQUFDLFVBQUEsR0FDQU4sRUFBQVEsVUFBQUMsT0F2QkEsc0JBMkJBQyxPQUFBSCxpQkFBQSxTQWRBLFdBQ0EsRUFBQUcsT0FBQUMsUUFBQSxJQUNBWCxFQUFBUSxVQUFBSSxJQUFBYixHQUVBQyxFQUFBUSxVQUFBSyxPQUFBZCxNQXRCQSxHQ0FBLFdBWUEsU0FBQWUsRUFB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S0FBQSxPQUNBTixVQUFBLEVBQ0FDLFFBQUEsRUFDQUMsWUFBQSxFQUNBTyxJQUFBLEdBQ0FGLFFBQUEsSUFDQUgsUUFHQXZFLFNBQUFDLGNBQUEwRSxJQUNBLElBQUFULE9BQUFTLEVBQUEsQ0FDQUYsS0FBQSxPQUNBTixVQUFBLEVBQ0FDLFFBQUEsRUFDQUMsWUFBQSxFQUNBSyxRQUFBLElBQ0FILFVBSUF2RSxTQUFBTSxpQkFBQSxtQkFBQSxXQUNBLElBQUEyRCxFQUFBLG9CQUVBakUsU0FBQUMsY0FBQWdFLElBQ0EsSUFBQUMsT0FBQUQsRUFBQSxDQUNBUSxLQUFBLE9BQ0FOLFVBQUEsRUFDQUMsUUFBQSxFQUNBTSxRQUFBLElBQ0FILFVBSUF2RSxTQUFBTSxpQkFBQSxtQkFBQSxXQUNBLElBQUEyRCxFQUFBLG1CQUNBVSxFQUFBLDJCQUVBM0UsU0FBQUMsY0FBQWdFLElBQ0EsSUFBQUMsT0FBQUQsRUFBQSxDQUNBUSxLQUFBLE9BQ0FOLFVBQUEsRUFDQUMsUUFBQSxFQUNBQyxZQUFBLEVBQ0FPLElBQUEsR0FDQUYsUUFBQSxJQUNBSCxRQUdBdkUsU0FBQUMsY0FBQTBFLElBQ0EsSUFBQVQsT0FBQVMsRUFBQSxDQUNBRixLQUFBLE9BQ0FOLFVBQUEsRUFDQUMsUUFBQSxFQUNBQyxZQUFBLEVBQ0FLLFFBQUEsSUFDQUgiLCJmaWxlIjoiY3VzdG9tZXIuanMiLCJzb3VyY2VzQ29udGVudCI6WyIoKCkgPT4ge1xyXG4gIGNvbnN0IGIyY01lbnVRdWVyeSA9IFwiLmIyYy1tZW51XCI7XHJcbiAgY29uc3QgYjJjTWVudUNvbnRlbnRRdWVyeSA9IFwiLmIyYy1tZW51X19jb250ZW50XCI7XHJcbiAgY29uc3QgYjJjVHJpZ2dlclF1ZXJ5ID0gXCIuYjJjLW1lbnVfX3RyaWdnZXJcIjtcclxuXHJcbiAgY29uc3QgYjJjTWVudUFjdGl2ZUNsYXNzID0gXCJiMmMtbWVudS0tYWN0aXZlXCI7XHJcbiAgY29uc3QgYjJjTWVudVRvUmlnaHRDbGFzcyA9IFwiYjJjLW1lbnUtLXRvLXJpZ2h0XCI7XHJcblxyXG4gIGNvbnN0IGIyY01lbnVFbGVtZW50ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihiMmNNZW51UXVlcnkpO1xyXG4gIGNvbnN0IGIyY01lbnVDb250ZW50RWxlbWVudCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoYjJjTWVudUNvbnRlbnRRdWVyeSk7XHJcbiAgY29uc3QgYjJjVHJpZ2dlckVsZW1lbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGIyY1RyaWdnZXJRdWVyeSk7XHJcblxyXG4gIGlmICghYjJjTWVudUVsZW1lbnQgJiYgIWIyY01lbnVDb250ZW50RWxlbWVudCAmJiAhYjJjVHJpZ2dlckVsZW1lbnQpIHtcclxuICAgIHJldHVybjtcclxuICB9XHJcblxyXG4gIGIyY01lbnVDb250ZW50RWxlbWVudC5zdHlsZS5hbmltYXRpb24gPSBcIm5vbmVcIjtcclxuICBcclxuICBjb25zdCBoYW5kbGVTY3JvbGwgPSAoKSA9PiB7XHJcbiAgICBpZiAod2luZG93LnNjcm9sbFkgLSAyMzIgPiAwKSB7XHJcbiAgICAgIGIyY01lbnVFbGVtZW50LmNsYXNzTGlzdC5hZGQoYjJjTWVudVRvUmlnaHRDbGFzcyk7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICBiMmNNZW51RWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKGIyY01lbnVUb1JpZ2h0Q2xhc3MpO1xyXG4gICAgfVxyXG4gIH07XHJcblxyXG4gIGNvbnN0IHRvZ2dsZU1lbnUgPSAoKSA9PiB7XHJcbiAgICBiMmNNZW51Q29udGVudEVsZW1lbnQuc3R5bGUuYW5pbWF0aW9uID0gXCJcIjtcclxuICAgIGIyY01lbnVFbGVtZW50LmNsYXNzTGlzdC50b2dnbGUoYjJjTWVudUFjdGl2ZUNsYXNzKTtcclxuICB9O1xyXG5cclxuICBiMmNUcmlnZ2VyRWxlbWVudC5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgdG9nZ2xlTWVudSk7XHJcbiAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoXCJzY3JvbGxcIiwgaGFuZGxlU2Nyb2xsKTtcclxufSkoKTsiLCIoKCkgPT4ge1xyXG4gIGNvbnN0IGRhdGFTZWN0aW9uVHJpZ2dlckF0dHJpYnV0ZU5hbWUgPSBcInJoLWNvdW50cnktZGF0YS1zZWN0aW9uLXRyaWdnZXJcIjtcclxuICBjb25zdCBkYXRhU2VjdGlvbkF0dHJpYnV0ZU5hbWUgPSBcInJoLWNvdW50cnktZGF0YS1zZWN0aW9uXCI7XHJcbiAgY29uc3QgZGF0YVRyaWdnZXJBdHRyaWJ1dGVOYW1lID0gXCJyaC1jb3VudHJ5LWRhdGEtdHJpZ2dlclwiO1xyXG4gIGNvbnN0IGRhdGFBdHRyaWJ1dGVOYW1lID0gXCJyaC1jb3VudHJ5LWRhdGFcIjtcclxuICBjb25zdCBkYXRhVGl0bGVBdHRyaWJ1dGVOYW1lID0gXCJyaC1jb3VudHJ5LWRhdGEtdGl0bGVcIjtcclxuICBjb25zdCBnb2xkQmdDbGFzcyA9IFwiQ291bnRyeVBhZ2VfX1RhYkxpbmstLUFjdGl2ZVwiO1xyXG5cclxuICAvKipcclxuICAgKiBAcGFyYW0ge3N0cmluZ30gYXR0cmlidXRlTmFtZVxyXG4gICAqIEByZXR1cm5zICB7c3RyaW5nfVxyXG4gICAqL1xyXG4gIGNvbnN0IGF0dHJpYnV0ZU5hbWVUb1F1ZXJ5ID0gYXR0cmlidXRlTmFtZSA9PiBgWyR7YXR0cmlidXRlTmFtZX1dYDtcclxuXHJcbiAgLyoqXHJcbiAgICogQHBhcmFtIHtzdHJpbmcgfCBudW1iZXJ9IGlkXHJcbiAgICogQHJldHVybnMge3ZvaWR9XHJcbiAgICovXHJcbiAgIGNvbnN0IGNyZWF0ZVF1ZXJ5Rm9yRGF0YUJ5SWQgPSBpZCA9PiBgWyR7ZGF0YUF0dHJpYnV0ZU5hbWV9ID0gXCIke2lkfVwiXWA7XHJcblxyXG4gIC8qKlxyXG4gICAqIEBwYXJhbSB7c3RyaW5nIHwgbnVtYmVyfSBpZFxyXG4gICAqIEByZXR1cm5zIHt2b2lkfVxyXG4gICAqL1xyXG4gIGNvbnN0IGNyZWF0ZVF1ZXJ5Rm9yRGF0YVNlY3Rpb25CeUlkID0gaWQgPT4gYFske2RhdGFTZWN0aW9uQXR0cmlidXRlTmFtZX0gPSBcIiR7aWR9XCJdYDtcclxuXHJcbiAgIC8qKlxyXG4gICAqIEBwYXJhbSB7c3RyaW5nIHwgbnVtYmVyfSBpZFxyXG4gICAqIEByZXR1cm5zIHt2b2lkfVxyXG4gICAqL1xyXG4gIGNvbnN0IGNyZWF0ZVF1ZXJ5Rm9yRGF0YVRpdGxlQnlJZCA9IGlkID0+IGBbJHtkYXRhVGl0bGVBdHRyaWJ1dGVOYW1lfSA9IFwiJHtpZH1cIl1gO1xyXG5cclxuICAvKipcclxuICAgKiBAcGFyYW0ge0hUTUxFbGVtZW50fSBlbGVtZW50XHJcbiAgICogQHJldHVybnMge3ZvaWR9IFxyXG4gICAqL1xyXG4gIGNvbnN0IGhpZGVFbGVtZW50ID0gZWxlbWVudCA9PiB7XHJcbiAgICBlbGVtZW50LnN0eWxlLmRpc3BsYXkgPSBcIm5vbmVcIjtcclxuICB9O1xyXG5cclxuICAvKipcclxuICAgKiBAcGFyYW0ge0hUTUxFbGVtZW50fSBlbGVtZW50XHJcbiAgICogQHJldHVybnMge3ZvaWR9IFxyXG4gICAqL1xyXG4gIGNvbnN0IHNob3dFbGVtZW50ID0gZWxlbWVudCA9PiB7XHJcbiAgICBlbGVtZW50LnN0eWxlLmRpc3BsYXkgPSBcImJsb2NrXCI7XHJcbiAgfTtcclxuXHJcbiAgY29uc3QgZGF0YXMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKGF0dHJpYnV0ZU5hbWVUb1F1ZXJ5KGRhdGFBdHRyaWJ1dGVOYW1lKSk7XHJcbiAgY29uc3QgZGF0YVNlY3Rpb25zID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChhdHRyaWJ1dGVOYW1lVG9RdWVyeShkYXRhU2VjdGlvbkF0dHJpYnV0ZU5hbWUpKTtcclxuICBjb25zdCBkYXRhVHJpZ2dlcnMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKGF0dHJpYnV0ZU5hbWVUb1F1ZXJ5KGRhdGFUcmlnZ2VyQXR0cmlidXRlTmFtZSkpO1xyXG4gIGNvbnN0IGRhdGFUaXRsZXMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKGF0dHJpYnV0ZU5hbWVUb1F1ZXJ5KGRhdGFUaXRsZUF0dHJpYnV0ZU5hbWUpKTtcclxuXHJcbiAgZGF0YXMuZm9yRWFjaChkYXRhID0+IGhpZGVFbGVtZW50KGRhdGEpKTtcclxuICBkYXRhU2VjdGlvbnMuZm9yRWFjaChkYXRhU2VjdGlvbiA9PiBoaWRlRWxlbWVudChkYXRhU2VjdGlvbikpO1xyXG4gIGRhdGFUaXRsZXMuZm9yRWFjaChkYXRhVGl0bGUgPT4gZGF0YVRpdGxlLmNsYXNzTGlzdC5yZW1vdmUoZ29sZEJnQ2xhc3MpKTtcclxuXHJcbiAgZGF0YVRyaWdnZXJzLmZvckVhY2goZGF0YVRyaWdnZXIgPT4ge1xyXG4gICAgZGF0YVRyaWdnZXIuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcclxuICAgICAgZGF0YXMuZm9yRWFjaChkYXRhID0+IGhpZGVFbGVtZW50KGRhdGEpKTtcclxuICAgICAgZGF0YVNlY3Rpb25zLmZvckVhY2goZGF0YVNlY3Rpb24gPT4gaGlkZUVsZW1lbnQoZGF0YVNlY3Rpb24pKTtcclxuICAgICAgZGF0YVRpdGxlcy5mb3JFYWNoKGRhdGFUaXRsZSA9PiBkYXRhVGl0bGUuY2xhc3NMaXN0LnJlbW92ZShnb2xkQmdDbGFzcykpO1xyXG5cclxuICAgICAgc2hvd0VsZW1lbnQoXHJcbiAgICAgICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcclxuICAgICAgICAgIGNyZWF0ZVF1ZXJ5Rm9yRGF0YUJ5SWQoZGF0YVRyaWdnZXIuZ2V0QXR0cmlidXRlKGRhdGFUcmlnZ2VyQXR0cmlidXRlTmFtZSkpXHJcbiAgICAgICAgKVxyXG4gICAgICApO1xyXG4gICAgICBzaG93RWxlbWVudChcclxuICAgICAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGNyZWF0ZVF1ZXJ5Rm9yRGF0YVNlY3Rpb25CeUlkKFxyXG4gICAgICAgICAgZGF0YVRyaWdnZXIuZ2V0QXR0cmlidXRlKGRhdGFTZWN0aW9uVHJpZ2dlckF0dHJpYnV0ZU5hbWUpXHJcbiAgICAgICAgKSlcclxuICAgICAgKTtcclxuICAgICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChjcmVhdGVRdWVyeUZvckRhdGFUaXRsZUJ5SWQoXHJcbiAgICAgICAgZGF0YVRyaWdnZXIuZ2V0QXR0cmlidXRlKGRhdGFUcmlnZ2VyQXR0cmlidXRlTmFtZSlcclxuICAgICAgKSkuZm9yRWFjaChkYXRhVGl0bGUgPT4gZGF0YVRpdGxlLmNsYXNzTGlzdC5hZGQoZ29sZEJnQ2xhc3MpKTtcclxuICAgIH0pO1xyXG4gIH0pO1xyXG59KSgpOyIsIigoKSA9PiB7XG4gIGNvbnN0IGZlZWRiYWNrID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5GZWVkYmFja1wiKTtcbiAgY29uc3QgZmVlZGJhY2tUcmlnZ2VycyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoXCIuRmVlZGJhY2tfX1RyaWdnZXJcIik7XG4gIGNvbnN0IGZlZWRiYWNrU2NyZWVubG9jayA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuRmVlZGJhY2tfX1NjcmVlbmxvY2tcIik7XG4gIGNvbnN0IGZlZWRiYWNrQ2xvc2VUcmlnZ2VyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5GZWVkYmFja19fQ2xvc2VUcmlnZ2VyXCIpO1xuXG4gIGNvbnN0IGZlZWRiYWNrQWN0aXZlQ2xhc3MgPSBcIkZlZWRiYWNrLS1BY3RpdmVcIjtcblxuICBpZiAoIWZlZWRiYWNrIHx8ICFmZWVkYmFja1RyaWdnZXJzIHx8ICFmZWVkYmFja1NjcmVlbmxvY2sgfHwgIWZlZWRiYWNrQ2xvc2VUcmlnZ2VyKSB7XG4gICAgcmV0dXJuO1xuICB9XG5cbiAgZmVlZGJhY2tUcmlnZ2Vycy5mb3JFYWNoKGZlZWRiYWNrVHJpZ2dlciA9PiB7XG4gICAgZmVlZGJhY2tUcmlnZ2VyLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XG4gICAgICBmZWVkYmFjay5jbGFzc0xpc3QuYWRkKGZlZWRiYWNrQWN0aXZlQ2xhc3MpO1xuICAgIH0pO1xuICB9KTtcblxuICBmZWVkYmFja1NjcmVlbmxvY2suYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcbiAgICBmZWVkYmFjay5jbGFzc0xpc3QucmVtb3ZlKGZlZWRiYWNrQWN0aXZlQ2xhc3MpO1xuICB9KTtcblxuICBmZWVkYmFja0Nsb3NlVHJpZ2dlci5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xuICAgIGZlZWRiYWNrLmNsYXNzTGlzdC5yZW1vdmUoZmVlZGJhY2tBY3RpdmVDbGFzcyk7XG4gIH0pO1xufSkoKTtcbiIsIigoKSA9PiB7XG4gIGNvbnN0IGRhdGFUcmlnZ2VyQXR0cmlidXRlTmFtZSA9IFwiaG90ZWwtdGFiLXRyaWdnZXItaW5kZXhcIjtcbiAgY29uc3QgZGF0YUF0dHJpYnV0ZU5hbWUgPSBcImhvdGVsLWRhdGFcIjtcbiAgY29uc3QgZ29sZEJnQ2xhc3MgPSBcIkhvdGVsUGFnZV9fVGFiTGluay0tQWN0aXZlXCI7XG4gIFxuICBjb25zdCBhdHRyaWJ1dGVOYW1lVG9RdWVyeSA9IGF0dHJpYnV0ZU5hbWUgPT4gYFske2F0dHJpYnV0ZU5hbWV9XWA7XG4gIGNvbnN0IGNyZWF0ZVF1ZXJ5Rm9yRGF0YUJ5SWQgPSBpZCA9PiBgWyR7ZGF0YUF0dHJpYnV0ZU5hbWV9ID0gXCIke2lkfVwiXWA7XG4gIGNvbnN0IGNyZWF0ZVF1ZXJ5Rm9yVHJpZ2dlckJ5SWQgPSBpZCA9PiBgWyR7ZGF0YVRyaWdnZXJBdHRyaWJ1dGVOYW1lfSA9IFwiJHtpZH1cIl1gO1xuICBjb25zdCBoaWRlRWxlbWVudCA9IGVsZW1lbnQgPT4geyBlbGVtZW50LnN0eWxlLmRpc3BsYXkgPSBcIm5vbmVcIjsgfTtcbiAgY29uc3Qgc2hvd0VsZW1lbnQgPSBlbGVtZW50ID0+IHsgZWxlbWVudC5zdHlsZS5kaXNwbGF5ID0gXCJibG9ja1wiOyB9O1xuXG4gIGNvbnN0IGRhdGFzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChhdHRyaWJ1dGVOYW1lVG9RdWVyeShkYXRhQXR0cmlidXRlTmFtZSkpO1xuICBjb25zdCBkYXRhVHJpZ2dlcnMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKGF0dHJpYnV0ZU5hbWVUb1F1ZXJ5KGRhdGFUcmlnZ2VyQXR0cmlidXRlTmFtZSkpO1xuXG4gIGRhdGFzLmZvckVhY2goZGF0YSA9PiBoaWRlRWxlbWVudChkYXRhKSk7XG5cbiAgZGF0YVRyaWdnZXJzLmZvckVhY2goZGF0YVRyaWdnZXIgPT4ge1xuICAgIGRhdGFUcmlnZ2VyLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XG4gICAgICBkYXRhcy5mb3JFYWNoKGRhdGEgPT4gaGlkZUVsZW1lbnQoZGF0YSkpO1xuXG4gICAgICBkYXRhVHJpZ2dlcnMuZm9yRWFjaChkYXRhVHJpZ2dlcjIgPT4ge1xuICAgICAgICBkYXRhVHJpZ2dlcjIuY2xhc3NMaXN0LnJlbW92ZShnb2xkQmdDbGFzcyk7XG4gICAgICB9KTtcblxuICAgICAgZGF0YVRyaWdnZXIuY2xhc3NMaXN0LmFkZChnb2xkQmdDbGFzcyk7XG5cblxuICAgICAgc2hvd0VsZW1lbnQoXG4gICAgICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXG4gICAgICAgICAgY3JlYXRlUXVlcnlGb3JEYXRhQnlJZChkYXRhVHJpZ2dlci5nZXRBdHRyaWJ1dGUoZGF0YVRyaWdnZXJBdHRyaWJ1dGVOYW1lKSlcbiAgICAgICAgKVxuICAgICAgKTtcbiAgICB9KTtcbiAgfSk7XG59KSgpOyIsIigoKSA9PiB7XHJcbiAgY29uc3QgbW9iaWxlU2lkZWJhckVsZW1lbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLm1vYmlsZS1zaWRlYmFyXCIpO1xyXG4gIGNvbnN0IG1vYmlsZVNpZGViYXJUcmlnZ2VyRWxlbWVudCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIubW9iaWxlLXNpZGViYXItdHJpZ2dlclwiKTtcclxuICBjb25zdCBtb2JpbGVTaWRlYmFyQ2xvc2VUcmlnZ2VyRWxlbWVudCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIubW9iaWxlLXNpZGViYXJfX2Nsb3NlLXRyaWdnZXJcIik7XHJcbiAgY29uc3QgbW9iaWxlU2lkZWJhclNjcmVlbmxvY2tFbGVtZW50ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5tb2JpbGUtc2lkZWJhcl9fc2NyZWVubG9ja1wiKTtcclxuICBjb25zdCBtb2JpbGVTaWRlYmFySXRlbUVsZW1lbnRzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChcIi5tb2JpbGUtc2lkZWJhcl9faXRlbVwiKTtcclxuXHJcbiAgY29uc3QgbW9iaWxlU2lkZWJhckFjdGl2ZUNsYXNzID0gXCJtb2JpbGUtc2lkZWJhci0tYWN0aXZlXCI7XHJcblxyXG4gIGlmIChcclxuICAgICFtb2JpbGVTaWRlYmFyRWxlbWVudCBcclxuICAgIHx8ICFtb2JpbGVTaWRlYmFyVHJpZ2dlckVsZW1lbnQgXHJcbiAgICB8fCAhbW9iaWxlU2lkZWJhckNsb3NlVHJpZ2dlckVsZW1lbnQgXHJcbiAgICB8fCAhbW9iaWxlU2lkZWJhclNjcmVlbmxvY2tFbGVtZW50XHJcbiAgICB8fCBtb2JpbGVTaWRlYmFySXRlbUVsZW1lbnRzLmxlbmd0aCA9PT0gMCBcclxuICApIHtcclxuICAgIHJldHVybjtcclxuICB9XHJcblxyXG4gIGNvbnN0IG9wZW5TaWRlYmFyID0gKCkgPT4ge1xyXG4gICAgZG9jdW1lbnQuYm9keS5zdHlsZS5vdmVyZmxvdyA9IFwiaGlkZGVuXCI7XHJcbiAgICBtb2JpbGVTaWRlYmFyRWxlbWVudC5jbGFzc0xpc3QuYWRkKG1vYmlsZVNpZGViYXJBY3RpdmVDbGFzcyk7XHJcbiAgfTtcclxuXHJcbiAgY29uc3QgY2xvc2VTaWRlYmFyID0gKCkgPT4ge1xyXG4gICAgZG9jdW1lbnQuYm9keS5zdHlsZS5vdmVyZmxvdyA9IFwiYXV0b1wiO1xyXG4gICAgbW9iaWxlU2lkZWJhckVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZShtb2JpbGVTaWRlYmFyQWN0aXZlQ2xhc3MpO1xyXG4gIH07XHJcblxyXG4gIGNvbnN0IGhhbmRsZVJlc2l6ZSA9ICgpID0+IHtcclxuICAgIGNvbnN0IG1vYmlsZVdpZHRoTGltaXQgPSA3Njk7XHJcbiAgICBcclxuICAgIGlmICh3aW5kb3cuaW5uZXJXaWR0aCA+PSBtb2JpbGVXaWR0aExpbWl0KSB7XHJcbiAgICAgIGNsb3NlU2lkZWJhcigpO1xyXG4gICAgfVxyXG4gIH07XHJcblxyXG4gIG1vYmlsZVNpZGViYXJJdGVtRWxlbWVudHMuZm9yRWFjaChtb2JpbGVTaWRlYmFySXRlbUVsZW1lbnQgPT4ge1xyXG4gICAgY29uc3QgdHJpZ2dlciA9IG1vYmlsZVNpZGViYXJJdGVtRWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLm1vYmlsZS1zaWRlYmFyX19zdWJtZW51LXRyaWdnZXJcIik7XHJcbiAgICBjb25zdCBzdWJtZW51ID0gbW9iaWxlU2lkZWJhckl0ZW1FbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIubW9iaWxlLXNpZGViYXJfX3N1Ym1lbnVcIik7XHJcbiAgICBcclxuICAgIHRyaWdnZXIuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcclxuICAgICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChcIi5tb2JpbGUtc2lkZWJhcl9fc3VibWVudVwiKVxyXG4gICAgICAgIC5mb3JFYWNoKHN1Ym1lbnVFYWNoID0+IHtcclxuICAgICAgICAgIGlmIChzdWJtZW51RWFjaCAhPT0gc3VibWVudSkge1xyXG4gICAgICAgICAgICBzdWJtZW51RWFjaC5jbGFzc0xpc3QucmVtb3ZlKFwibW9iaWxlLXNpZGViYXJfX3N1Ym1lbnUtLWFjdGl2ZVwiKTtcclxuICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgICAgc3VibWVudS5jbGFzc0xpc3QudG9nZ2xlKFwibW9iaWxlLXNpZGViYXJfX3N1Ym1lbnUtLWFjdGl2ZVwiKTtcclxuICAgIH0pO1xyXG4gIH0pO1xyXG5cclxuICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcihcInJlc2l6ZVwiLCBoYW5kbGVSZXNpemUpO1xyXG4gIG1vYmlsZVNpZGViYXJUcmlnZ2VyRWxlbWVudC5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgb3BlblNpZGViYXIpO1xyXG4gIG1vYmlsZVNpZGViYXJDbG9zZVRyaWdnZXJFbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCBjbG9zZVNpZGViYXIpO1xyXG4gIG1vYmlsZVNpZGViYXJTY3JlZW5sb2NrRWxlbWVudC5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgY2xvc2VTaWRlYmFyKTtcclxufSkoKTtcclxuXHJcblxyXG4oKCkgPT4ge1xyXG4gIGNvbnN0IG1vYmlsZVNpZGViYXJFbGVtZW50ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5Nb2JpbGVTaWRlYmFyXCIpO1xyXG4gIGNvbnN0IG1vYmlsZVNpZGViYXJUcmlnZ2VyRWxlbWVudCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIubW9iaWxlLXNpZGViYXItdHJpZ2dlclwiKTtcclxuICBjb25zdCBtb2JpbGVTaWRlYmFyQ2xvc2VUcmlnZ2VyRWxlbWVudCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuTW9iaWxlU2lkZWJhcl9fQ2xvc2VUcmlnZ2VyXCIpO1xyXG4gIGNvbnN0IG1vYmlsZVNpZGViYXJTY3JlZW5sb2NrRWxlbWVudCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuTW9iaWxlU2lkZWJhcl9fU2NyZWVuTG9ja1wiKTtcclxuICBjb25zdCBtb2JpbGVTaWRlYmFySXRlbUVsZW1lbnRzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChcIi5Nb2JpbGVTaWRlYmFyX19TZWNvbmRDb250ZW50SXRlbVwiKTtcclxuXHJcbiAgY29uc3QgbW9iaWxlU2lkZWJhckFjdGl2ZUNsYXNzID0gXCJNb2JpbGVTaWRlYmFyLS1BY3RpdmVcIjtcclxuXHJcbiAgaWYgKFxyXG4gICAgIW1vYmlsZVNpZGViYXJFbGVtZW50IFxyXG4gICAgfHwgIW1vYmlsZVNpZGViYXJUcmlnZ2VyRWxlbWVudCBcclxuICAgIHx8ICFtb2JpbGVTaWRlYmFyQ2xvc2VUcmlnZ2VyRWxlbWVudCBcclxuICAgIHx8ICFtb2JpbGVTaWRlYmFyU2NyZWVubG9ja0VsZW1lbnRcclxuICAgIHx8IG1vYmlsZVNpZGViYXJJdGVtRWxlbWVudHMubGVuZ3RoID09PSAwIFxyXG4gICkge1xyXG4gICAgcmV0dXJuO1xyXG4gIH1cclxuXHJcbiAgY29uc3Qgb3BlblNpZGViYXIgPSAoKSA9PiB7XHJcbiAgICBkb2N1bWVudC5ib2R5LnN0eWxlLm92ZXJmbG93ID0gXCJoaWRkZW5cIjtcclxuICAgIG1vYmlsZVNpZGViYXJFbGVtZW50LmNsYXNzTGlzdC5hZGQobW9iaWxlU2lkZWJhckFjdGl2ZUNsYXNzKTtcclxuICB9O1xyXG5cclxuICBjb25zdCBjbG9zZVNpZGViYXIgPSAoKSA9PiB7XHJcbiAgICBkb2N1bWVudC5ib2R5LnN0eWxlLm92ZXJmbG93ID0gXCJhdXRvXCI7XHJcbiAgICBtb2JpbGVTaWRlYmFyRWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKG1vYmlsZVNpZGViYXJBY3RpdmVDbGFzcyk7XHJcbiAgfTtcclxuXHJcbiAgY29uc3QgaGFuZGxlUmVzaXplID0gKCkgPT4ge1xyXG4gICAgY29uc3QgbW9iaWxlV2lkdGhMaW1pdCA9IDc2OTtcclxuICAgIFxyXG4gICAgaWYgKHdpbmRvdy5pbm5lcldpZHRoID49IG1vYmlsZVdpZHRoTGltaXQpIHtcclxuICAgICAgY2xvc2VTaWRlYmFyKCk7XHJcbiAgICB9XHJcbiAgfTtcclxuXHJcbiAgbW9iaWxlU2lkZWJhckl0ZW1FbGVtZW50cy5mb3JFYWNoKG1vYmlsZVNpZGViYXJJdGVtRWxlbWVudCA9PiB7XHJcbiAgICBjb25zdCB0cmlnZ2VyID0gbW9iaWxlU2lkZWJhckl0ZW1FbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuTW9iaWxlU2lkZWJhcl9fU2Vjb25kQ29udGVudFN1Ym1lbnVUcmlnZ2VyXCIpO1xyXG4gICAgY29uc3Qgc3VibWVudSA9IG1vYmlsZVNpZGViYXJJdGVtRWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLk1vYmlsZVNpZGViYXJfX1NlY29uZENvbnRlbnRTdWJtZW51XCIpO1xyXG4gICAgXHJcbiAgICB0cmlnZ2VyLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XHJcbiAgICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoXCIuTW9iaWxlU2lkZWJhcl9fU2Vjb25kQ29udGVudFN1Ym1lbnVcIilcclxuICAgICAgICAuZm9yRWFjaChzdWJtZW51RWFjaCA9PiB7XHJcbiAgICAgICAgICBpZiAoc3VibWVudUVhY2ggIT09IHN1Ym1lbnUpIHtcclxuICAgICAgICAgICAgc3VibWVudUVhY2guY2xhc3NMaXN0LnJlbW92ZShcIk1vYmlsZVNpZGViYXJfX1NlY29uZENvbnRlbnRTdWJtZW51LS1BY3RpdmVcIik7XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICAgIHN1Ym1lbnUuY2xhc3NMaXN0LnRvZ2dsZShcIk1vYmlsZVNpZGViYXJfX1NlY29uZENvbnRlbnRTdWJtZW51LS1BY3RpdmVcIik7XHJcbiAgICB9KTtcclxuICB9KTtcclxuXHJcbiAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoXCJyZXNpemVcIiwgaGFuZGxlUmVzaXplKTtcclxuICBtb2JpbGVTaWRlYmFyVHJpZ2dlckVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIG9wZW5TaWRlYmFyKTtcclxuICBtb2JpbGVTaWRlYmFyQ2xvc2VUcmlnZ2VyRWxlbWVudC5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgY2xvc2VTaWRlYmFyKTtcclxuICBtb2JpbGVTaWRlYmFyU2NyZWVubG9ja0VsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIGNsb3NlU2lkZWJhcik7XHJcbn0pKCk7XHJcbiIsIigoKSA9PiB7XHJcbiAgY29uc3QgYWNjb3JkaW9uUXVlcnkgPSBcIi5yaC1hY2NvcmRpb25cIjtcclxuICBjb25zdCBhY2NvcmRpb25UcmlnZ2VyUXVlcnkgPSBcIi5yaC1hY2NvcmRpb25fX3RyaWdnZXJcIjtcclxuICBjb25zdCBhY2NvcmRpb25BY3RpdmVDbGFzcyA9IFwicmgtYWNjb3JkaW9uLS1hY3RpdmVcIjtcclxuXHJcbiAgY29uc3QgYWNjb3JkaW9uRWxlbWVudHMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKGFjY29yZGlvblF1ZXJ5KTtcclxuXHJcbiAgaWYgKCFhY2NvcmRpb25FbGVtZW50cykge1xyXG4gICAgcmV0dXJuO1xyXG4gIH1cclxuXHJcbiAgYWNjb3JkaW9uRWxlbWVudHMuZm9yRWFjaChhY2NvcmRpb24gPT4ge1xyXG4gICAgYWNjb3JkaW9uLnF1ZXJ5U2VsZWN0b3IoYWNjb3JkaW9uVHJpZ2dlclF1ZXJ5KS5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xyXG4gICAgICBhY2NvcmRpb24uY2xhc3NMaXN0LnRvZ2dsZShhY2NvcmRpb25BY3RpdmVDbGFzcyk7XHJcbiAgICB9KTtcclxuICB9KTtcclxufSkoKTtcclxuXHJcbigoKSA9PiB7XHJcbiAgY29uc3QgYWNjb3JkaW9uUXVlcnkgPSBcIi5SSEFjY29yZGlvblwiO1xyXG4gIGNvbnN0IGFjY29yZGlvblRyaWdnZXJRdWVyeSA9IFwiLlJIQWNjb3JkaW9uX19UcmlnZ2VyXCI7XHJcbiAgY29uc3QgYWNjb3JkaW9uQWN0aXZlQ2xhc3MgPSBcIlJIQWNjb3JkaW9uLS1BY3RpdmVcIjtcclxuXHJcbiAgY29uc3QgYWNjb3JkaW9uRWxlbWVudHMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKGFjY29yZGlvblF1ZXJ5KTtcclxuXHJcbiAgaWYgKCFhY2NvcmRpb25FbGVtZW50cykge1xyXG4gICAgcmV0dXJuO1xyXG4gIH1cclxuXHJcbiAgYWNjb3JkaW9uRWxlbWVudHMuZm9yRWFjaChhY2NvcmRpb24gPT4ge1xyXG4gICAgYWNjb3JkaW9uLnF1ZXJ5U2VsZWN0b3IoYWNjb3JkaW9uVHJpZ2dlclF1ZXJ5KS5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xyXG4gICAgICBhY2NvcmRpb24uY2xhc3NMaXN0LnRvZ2dsZShhY2NvcmRpb25BY3RpdmVDbGFzcyk7XHJcbiAgICB9KTtcclxuICB9KTtcclxufSkoKTtcclxuIiwiKCgpID0+IHtcclxuICBjb25zdCB0b3VyU2VhcmNoQnV0dG9uRWxlbWVudCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuc2VhcmNoLWZvcm0tc3dpdGNoX19idXR0b25fdG91clwiKTtcclxuICBjb25zdCBob3RlbFNlYXJjaEJ1dHRvbkVsZW1lbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnNlYXJjaC1mb3JtLXN3aXRjaF9fYnV0dG9uX2hvdGVsXCIpO1xyXG4gIGNvbnN0IHRvdXJTZWFyY2hGb3JtRWxlbWVudCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuc2VhcmNoLWZvcm0tc3dpdGNoX19mb3JtX3RvdXJcIik7XHJcbiAgY29uc3QgaG90ZWxTZWFyY2hGb3JtRWxlbWVudCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuc2VhcmNoLWZvcm0tc3dpdGNoX19mb3JtX2hvdGVsXCIpO1xyXG5cclxuICBpZiAoXHJcbiAgICAhdG91clNlYXJjaEJ1dHRvbkVsZW1lbnQgXHJcbiAgICB8fCAhaG90ZWxTZWFyY2hCdXR0b25FbGVtZW50XHJcbiAgICB8fCAhdG91clNlYXJjaEZvcm1FbGVtZW50XHJcbiAgICB8fCAhaG90ZWxTZWFyY2hGb3JtRWxlbWVudFxyXG4gICkge1xyXG4gICAgcmV0dXJuO1xyXG4gIH1cclxuXHJcbiAgY29uc3QgYnV0dG9uQWN0aXZlQ2xhc3MgPSBcInNlYXJjaC1mb3JtLXN3aXRjaF9fYnV0dG9uLS1hY3RpdmVcIjtcclxuICBjb25zdCBmb3JtQWN0aXZlQ2xhc3MgPSBcInNlYXJjaC1mb3JtLXN3aXRjaF9fZm9ybS0tYWN0aXZlXCI7XHJcblxyXG4gIHRvdXJTZWFyY2hCdXR0b25FbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XHJcbiAgICB0b3VyU2VhcmNoQnV0dG9uRWxlbWVudC5jbGFzc0xpc3QuYWRkKGJ1dHRvbkFjdGl2ZUNsYXNzKTtcclxuICAgIHRvdXJTZWFyY2hGb3JtRWxlbWVudC5jbGFzc0xpc3QuYWRkKGZvcm1BY3RpdmVDbGFzcyk7XHJcbiAgICBob3RlbFNlYXJjaEJ1dHRvbkVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZShidXR0b25BY3RpdmVDbGFzcyk7XHJcbiAgICBob3RlbFNlYXJjaEZvcm1FbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUoZm9ybUFjdGl2ZUNsYXNzKTtcclxuICB9KTtcclxuXHJcbiAgaG90ZWxTZWFyY2hCdXR0b25FbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XHJcbiAgICBob3RlbFNlYXJjaEJ1dHRvbkVsZW1lbnQuY2xhc3NMaXN0LmFkZChidXR0b25BY3RpdmVDbGFzcyk7XHJcbiAgICBob3RlbFNlYXJjaEZvcm1FbGVtZW50LmNsYXNzTGlzdC5hZGQoZm9ybUFjdGl2ZUNsYXNzKTtcclxuICAgIHRvdXJTZWFyY2hCdXR0b25FbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUoYnV0dG9uQWN0aXZlQ2xhc3MpO1xyXG4gICAgdG91clNlYXJjaEZvcm1FbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUoZm9ybUFjdGl2ZUNsYXNzKTtcclxuICB9KTtcclxufSkoKTtcclxuIiwiZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcIkRPTUNvbnRlbnRMb2FkZWRcIiwgKCkgPT4ge1xyXG4gIGNvbnN0IHNsaWRlckVsZW1lbnRRdWVyeSA9IFwiLkNvdW50cnlQYWdlX19UYWJzQ29udGFpbmVyLS1TY3JvbGxcIjtcclxuXHJcbiAgaWYgKGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3Ioc2xpZGVyRWxlbWVudFF1ZXJ5KSkge1xyXG4gICAgbmV3IFNwbGlkZShzbGlkZXJFbGVtZW50UXVlcnksIHtcclxuICAgICAgYXV0b3BsYXk6IGZhbHNlLFxyXG4gICAgICBhcnJvd3M6IGZhbHNlLFxyXG4gICAgICBwYWdpbmF0aW9uOiBmYWxzZSxcclxuICAgICAgYXV0b1dpZHRoOiB0cnVlLFxyXG4gICAgfSkubW91bnQoKTtcclxuICB9XHJcbn0pO1xyXG5cclxuZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcIkRPTUNvbnRlbnRMb2FkZWRcIiwgKCkgPT4ge1xyXG4gIGNvbnN0IHNsaWRlckVsZW1lbnRRdWVyeSA9IFwiLkhvdGVsUGFnZV9fVGFic0NvbnRhaW5lci0tU2Nyb2xsXCI7XHJcblxyXG4gIGlmIChkb2N1bWVudC5xdWVyeVNlbGVjdG9yKHNsaWRlckVsZW1lbnRRdWVyeSkpIHtcclxuICAgIG5ldyBTcGxpZGUoc2xpZGVyRWxlbWVudFF1ZXJ5LCB7XHJcbiAgICAgIGF1dG9wbGF5OiBmYWxzZSxcclxuICAgICAgYXJyb3dzOiBmYWxzZSxcclxuICAgICAgcGVyTW92ZTogMSxcclxuICAgICAgcGFnaW5hdGlvbjogZmFsc2UsXHJcbiAgICAgIGF1dG9XaWR0aDogdHJ1ZSxcclxuICAgIH0pLm1vdW50KCk7XHJcbiAgfVxyXG59KTtcclxuXHJcbmRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJET01Db250ZW50TG9hZGVkXCIsICgpID0+IHtcclxuICBjb25zdCBzbGlkZXJFbGVtZW50UXVlcnkgPSBcIi5Ib3RlbFBhZ2VfX1Bob3RvU2xpZGVyXCI7XHJcblxyXG4gIGlmIChkb2N1bWVudC5xdWVyeVNlbGVjdG9yKHNsaWRlckVsZW1lbnRRdWVyeSkpIHtcclxuICAgIG5ldyBTcGxpZGUoc2xpZGVyRWxlbWVudFF1ZXJ5LCB7XHJcbiAgICAgIHR5cGU6IFwibG9vcFwiLFxyXG4gICAgICBhdXRvcGxheTogdHJ1ZSxcclxuICAgICAgcGVyUGFnZTogNSxcclxuICAgICAgYXV0b1dpZHRoOiB0cnVlLFxyXG4gICAgICBwZXJNb3ZlOiAxLFxyXG4gICAgICBwYWdpbmF0aW9uOiBmYWxzZVxyXG4gICAgfSkubW91bnQoKTtcclxuICB9XHJcbn0pO1xyXG5cclxuZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcIkRPTUNvbnRlbnRMb2FkZWRcIiwgKCkgPT4ge1xyXG4gIGNvbnN0IHNsaWRlckVsZW1lbnRRdWVyeSA9IFwiLmIyYi10b3Atc2xpZGVyXCI7XHJcblxyXG4gIGlmIChkb2N1bWVudC5xdWVyeVNlbGVjdG9yKHNsaWRlckVsZW1lbnRRdWVyeSkpIHtcclxuICAgIG5ldyBTcGxpZGUoc2xpZGVyRWxlbWVudFF1ZXJ5LCB7XHJcbiAgICAgIHR5cGU6IFwibG9vcFwiLFxyXG4gICAgICBhdXRvcGxheTogdHJ1ZSxcclxuICAgICAgYXJyb3dzOiBmYWxzZVxyXG4gICAgfSkubW91bnQoKTtcclxuICB9XHJcbn0pO1xyXG5cclxuZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcIkRPTUNvbnRlbnRMb2FkZWRcIiwgKCkgPT4ge1xyXG4gIGNvbnN0IHNsaWRlckVsZW1lbnRRdWVyeSA9IFwiLndpdGgteW91LXNsaWRlclwiO1xyXG5cclxuICBpZiAoZG9jdW1lbnQucXVlcnlTZWxlY3RvcihzbGlkZXJFbGVtZW50UXVlcnkpKSB7XHJcbiAgICBuZXcgU3BsaWRlKHNsaWRlckVsZW1lbnRRdWVyeSwge1xyXG4gICAgICB0eXBlOiBcImxvb3BcIixcclxuICAgICAgcGFnaW5hdGlvbjogZmFsc2VcclxuICAgIH0pLm1vdW50KCk7XHJcbiAgfVxyXG59KTtcclxuXHJcbmRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJET01Db250ZW50TG9hZGVkXCIsICgpID0+IHtcclxuICBjb25zdCBzbGlkZXJFbGVtZW50UXVlcnkgPSBcIi5vdXItZ3Vlc3RzLXNsaWRlclwiO1xyXG4gIGNvbnN0IHNsaWRlckVsZW1lbnRRdWVyeU1vYmlsZSA9IFwiLm91ci1ndWVzdHMtc2xpZGVyLS1tb2JpbGVcIjtcclxuXHJcbiAgaWYgKGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3Ioc2xpZGVyRWxlbWVudFF1ZXJ5KSkge1xyXG4gICAgbmV3IFNwbGlkZShzbGlkZXJFbGVtZW50UXVlcnksIHtcclxuICAgICAgdHlwZTogXCJsb29wXCIsXHJcbiAgICAgIGF1dG9wbGF5OiB0cnVlLFxyXG4gICAgICBhcnJvd3M6IHRydWUsXHJcbiAgICAgIHBhZ2luYXRpb246IGZhbHNlLFxyXG4gICAgICBnYXA6IDIwLFxyXG4gICAgICBwZXJQYWdlOiAzXHJcbiAgICB9KS5tb3VudCgpO1xyXG4gIH1cclxuXHJcbiAgaWYgKGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3Ioc2xpZGVyRWxlbWVudFF1ZXJ5TW9iaWxlKSkge1xyXG4gICAgbmV3IFNwbGlkZShzbGlkZXJFbGVtZW50UXVlcnlNb2JpbGUsIHtcclxuICAgICAgdHlwZTogXCJsb29wXCIsXHJcbiAgICAgIGF1dG9wbGF5OiB0cnVlLFxyXG4gICAgICBhcnJvd3M6IHRydWUsXHJcbiAgICAgIHBhZ2luYXRpb246IGZhbHNlLFxyXG4gICAgICBwZXJQYWdlOiAxXHJcbiAgICB9KS5tb3VudCgpO1xyXG4gIH1cclxufSk7XHJcblxyXG5kb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKFwiRE9NQ29udGVudExvYWRlZFwiLCAoKSA9PiB7XHJcbiAgY29uc3Qgc2xpZGVyRWxlbWVudFF1ZXJ5ID0gXCIub3VyLWdvb2RzLXNsaWRlclwiO1xyXG5cclxuICBpZiAoZG9jdW1lbnQucXVlcnlTZWxlY3RvcihzbGlkZXJFbGVtZW50UXVlcnkpKSB7XHJcbiAgICBuZXcgU3BsaWRlKHNsaWRlckVsZW1lbnRRdWVyeSwge1xyXG4gICAgICB0eXBlOiBcImxvb3BcIixcclxuICAgICAgYXV0b3BsYXk6IGZhbHNlLFxyXG4gICAgICBhcnJvd3M6IGZhbHNlLFxyXG4gICAgICBwZXJQYWdlOiAxXHJcbiAgICB9KS5tb3VudCgpO1xyXG4gIH1cclxufSk7XHJcblxyXG5kb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKFwiRE9NQ29udGVudExvYWRlZFwiLCAoKSA9PiB7XHJcbiAgY29uc3Qgc2xpZGVyRWxlbWVudFF1ZXJ5ID0gXCIuYjJjLWJsb2ctc2xpZGVyXCI7XHJcbiAgY29uc3Qgc2xpZGVyRWxlbWVudFF1ZXJ5TW9iaWxlID0gXCIuYjJjLWJsb2ctc2xpZGVyLS1tb2JpbGVcIjtcclxuXHJcbiAgaWYgKGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3Ioc2xpZGVyRWxlbWVudFF1ZXJ5KSkge1xyXG4gICAgbmV3IFNwbGlkZShzbGlkZXJFbGVtZW50UXVlcnksIHtcclxuICAgICAgdHlwZTogXCJsb29wXCIsXHJcbiAgICAgIGF1dG9wbGF5OiBmYWxzZSxcclxuICAgICAgYXJyb3dzOiB0cnVlLFxyXG4gICAgICBwYWdpbmF0aW9uOiBmYWxzZSxcclxuICAgICAgZ2FwOiAyMCxcclxuICAgICAgcGVyUGFnZTogNFxyXG4gICAgfSkubW91bnQoKTtcclxuICB9XHJcblxyXG4gIGlmIChkb2N1bWVudC5xdWVyeVNlbGVjdG9yKHNsaWRlckVsZW1lbnRRdWVyeU1vYmlsZSkpIHtcclxuICAgIG5ldyBTcGxpZGUoc2xpZGVyRWxlbWVudFF1ZXJ5TW9iaWxlLCB7XHJcbiAgICAgIHR5cGU6IFwibG9vcFwiLFxyXG4gICAgICBhdXRvcGxheTogdHJ1ZSxcclxuICAgICAgYXJyb3dzOiB0cnVlLFxyXG4gICAgICBwYWdpbmF0aW9uOiBmYWxzZSxcclxuICAgICAgcGVyUGFnZTogMVxyXG4gICAgfSkubW91bnQoKTtcclxuICB9XHJcbn0pO1xyXG5cclxuIl19
