"use strict";function _defineProperty(e,t,o){return t in e?Object.defineProperty(e,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[t]=o,e}!function(){var e="b2c-menu--to-right",t=document.querySelector(".b2c-menu"),o=document.querySelector(".b2c-menu__content"),n=document.querySelector(".b2c-menu__trigger");(t||o||n)&&(o.style.animation="none",n.addEventListener("click",function(){o.style.animation="",t.classList.toggle("b2c-menu--active")}),window.addEventListener("scroll",function(){0<window.scrollY-232?t.classList.add(e):t.classList.remove(e)}))}(),function(){var e=document.querySelectorAll(".Bron__SwitchButton"),o=document.querySelectorAll(".Bron__Content");e&&o&&(e.forEach(function(t){t.addEventListener("click",function(){e.forEach(function(e){e.classList.remove("Bron__SwitchButton--Active")}),t.classList.add("Bron__SwitchButton--Active"),o.forEach(function(e){e.classList.remove("Bron__Content--Active"),e.getAttribute("bron-content")===t.getAttribute("bron-switch-trigger")&&e.classList.add("Bron__Content--Active")})})}),e[0]&&e[0].click())}(),function(){function e(e){return"[".concat(e,"]")}function o(e){e.style.display="none"}function n(e){e.style.display="block"}var r="rh-country-data-section",c="rh-country-data-trigger",i="rh-country-data",a="rh-country-data-title",l="CountryPage__TabLink--Active",d=document.querySelectorAll(e(i)),u=document.querySelectorAll(e(r)),t=document.querySelectorAll(e(c)),s=document.querySelectorAll(e(a));d.forEach(o),u.forEach(o),s.forEach(function(e){return e.classList.remove(l)}),t.forEach(function(t){t.addEventListener("click",function(){var e;d.forEach(o),u.forEach(o),s.forEach(function(e){return e.classList.remove(l)}),n(document.querySelector((e=t.getAttribute(c),"[".concat(i,' = "').concat(e,'"]')))),n(document.querySelector((e=t.getAttribute("rh-country-data-section-trigger"),"[".concat(r,' = "').concat(e,'"]')))),document.querySelectorAll((e=t.getAttribute(c),"[".concat(a,' = "').concat(e,'"]'))).forEach(function(e){return e.classList.add(l)})})})}(),function(){var t=document.querySelector(".Feedback"),e=document.querySelectorAll(".Feedback__Trigger"),o=document.querySelector(".Feedback__Screenlock"),n=document.querySelector(".Feedback__CloseTrigger"),r="Feedback--Active";t&&e&&o&&n&&(e.forEach(function(e){e.addEventListener("click",function(){t.classList.add(r)})}),o.addEventListener("click",function(){t.classList.remove(r)}),n.addEventListener("click",function(){t.classList.remove(r)}))}(),function(){function e(e){return"[".concat(e,"]")}function o(e){e.style.display="none"}var n="hotel-tab-trigger-index",r="hotel-data",c="HotelPage__TabLink--Active",i=!1,a=document.querySelectorAll(e(r)),l=document.querySelectorAll(e(n)),d=l.length,u=document.querySelector(".HotelPage__TabsProgressBarInner");a.forEach(o),l.forEach(function(t){t.addEventListener("click",function(){var e;a.forEach(o),l.forEach(function(e){e.classList.remove(c)}),t.classList.add(c),u.style="\n        left: ".concat((+t.getAttribute(n)-1)/d*100,"%;\n        width: ").concat(1/d*100,"%;\n      "),document.querySelector((e=t.getAttribute(n),"[".concat(r,' = "').concat(e,'"]'))).style.display="block","6"!==t.getAttribute(n)||i||(i=!0,setTimeout(function(){document.querySelectorAll(".HotelPage__Nomer").forEach(function(e){var t=new Splide(e.querySelector(".HotelPage__NomerPhotoSlider"),{type:"loop",autoplay:!0,perPage:3,perMove:1,direction:"ttb",height:"675px",pagination:!1,lazyLoad:"nearby",preloadPages:3,arrowPath:"M2.0162 39.9541C3.37923 41.3486 5.58056 41.3486 6.94359 39.9541L22.9838 23.4452C24.3387 22.0423 24.3387 19.7767 22.9838 18.3738L6.94359 1.86487C5.55707 0.64279 3.49025 0.724954 2.19945 2.05347C0.908654 3.38199 0.828821 5.50921 2.0162 6.93624L15.5752 20.9275L2.0162 34.8827C0.661266 36.2856 0.661266 38.5512 2.0162 39.9541Z"}).mount();new Splide(e.querySelector(".HotelPage__NomerMobilePhotoSlider"),{type:"loop",autoplay:!0,perPage:1,perMove:1,pagination:!1,lazyLoad:"nearby",preloadPages:3,gap:"2em",arrowPath:"M1.06039 38.9541C2.48267 40.3486 4.77972 40.3486 6.202 38.9541L22.9396 22.4452C24.3535 21.0423 24.3535 18.7767 22.9396 17.3738L6.202 0.864871C4.7552 -0.35721 2.59852 -0.275046 1.2516 1.05347C-0.0953188 2.38199 -0.178623 4.50921 1.06039 5.93624L15.209 19.9275L1.06039 33.8827C-0.353463 35.2856 -0.353463 37.5512 1.06039 38.9541Z"}).mount();new Splide(e.querySelector(".HotelPage__NomerPopupPhotoSlider--Desktop"),{type:"loop",autoplay:!0,perPage:1,perMove:1,pagination:!1,lazyLoad:"nearby",preloadPages:3,arrowPath:"M1.06039 38.9541C2.48267 40.3486 4.77972 40.3486 6.202 38.9541L22.9396 22.4452C24.3535 21.0423 24.3535 18.7767 22.9396 17.3738L6.202 0.864871C4.7552 -0.35721 2.59852 -0.275046 1.2516 1.05347C-0.0953188 2.38199 -0.178623 4.50921 1.06039 5.93624L15.209 19.9275L1.06039 33.8827C-0.353463 35.2856 -0.353463 37.5512 1.06039 38.9541Z"}).sync(t).mount(),t.on("click",function(){e.querySelector(".HotelPage__NomerPopupPhotoSliderContainer").classList.add("HotelPage__NomerPopupPhotoSliderContainer--ActiveDesktop")}),e.querySelector(".HotelPage__NomerPopupScreenlock").addEventListener("click",function(){e.querySelector(".HotelPage__NomerPopupPhotoSliderContainer").classList.remove("HotelPage__NomerPopupPhotoSliderContainer--ActiveMobile","HotelPage__NomerPopupPhotoSliderContainer--ActiveDesktop")})})},100))})}),document.querySelector("[hotel-tab-trigger-index='1']")&&document.querySelector("[hotel-tab-trigger-index='1']").click()}(),function(){var e,t=document.querySelector(".mobile-sidebar"),o=document.querySelector(".mobile-sidebar-trigger"),n=document.querySelector(".mobile-sidebar__close-trigger"),r=document.querySelector(".mobile-sidebar__screenlock"),c=document.querySelectorAll(".mobile-sidebar__item"),i="mobile-sidebar--active";t&&o&&n&&r&&0!==c.length&&(e=function(){document.body.style.overflow="auto",t.classList.remove(i)},c.forEach(function(e){var t=e.querySelector(".mobile-sidebar__submenu-trigger"),o=e.querySelector(".mobile-sidebar__submenu");t.addEventListener("click",function(){document.querySelectorAll(".mobile-sidebar__submenu").forEach(function(e){e!==o&&e.classList.remove("mobile-sidebar__submenu--active")}),o.classList.toggle("mobile-sidebar__submenu--active")})}),window.addEventListener("resize",function(){769<=window.innerWidth&&e()}),o.addEventListener("click",function(){document.body.style.overflow="hidden",t.classList.add(i)}),n.addEventListener("click",e),r.addEventListener("click",e))}(),function(){var e,t=document.querySelector(".MobileSidebar"),o=document.querySelector(".mobile-sidebar-trigger"),n=document.querySelector(".MobileSidebar__CloseTrigger"),r=document.querySelector(".MobileSidebar__ScreenLock"),c=document.querySelectorAll(".MobileSidebar__SecondContentItem"),i="MobileSidebar--Active";t&&o&&n&&r&&0!==c.length&&(e=function(){document.body.style.overflow="auto",t.classList.remove(i)},c.forEach(function(e){var t=e.querySelector(".MobileSidebar__SecondContentSubmenuTrigger"),o=e.querySelector(".MobileSidebar__SecondContentSubmenu");t.addEventListener("click",function(){document.querySelectorAll(".MobileSidebar__SecondContentSubmenu").forEach(function(e){e!==o&&e.classList.remove("MobileSidebar__SecondContentSubmenu--Active")}),o.classList.toggle("MobileSidebar__SecondContentSubmenu--Active")})}),window.addEventListener("resize",function(){769<=window.innerWidth&&e()}),o.addEventListener("click",function(){document.body.style.overflow="hidden",t.classList.add(i)}),n.addEventListener("click",e),r.addEventListener("click",e))}(),function(){var e=document.querySelectorAll(".rh-accordion");e&&e.forEach(function(e){e.querySelector(".rh-accordion__trigger").addEventListener("click",function(){e.classList.toggle("rh-accordion--active")})})}(),function(){var e=document.querySelectorAll(".RHAccordion");e&&e.forEach(function(e){e.querySelector(".RHAccordion__Trigger").addEventListener("click",function(){e.classList.toggle("RHAccordion--Active")})})}(),function(){var e,t,o=document.querySelector(".search-form-switch__button_tour"),n=document.querySelector(".search-form-switch__button_hotel"),r=document.querySelector(".search-form-switch__form_tour"),c=document.querySelector(".search-form-switch__form_hotel");o&&n&&r&&c&&(e="search-form-switch__button--active",t="search-form-switch__form--active",o.addEventListener("click",function(){o.classList.add(e),r.classList.add(t),n.classList.remove(e),c.classList.remove(t)}),n.addEventListener("click",function(){n.classList.add(e),c.classList.add(t),o.classList.remove(e),r.classList.remove(t)}))}(),document.addEventListener("DOMContentLoaded",function(){var e=".CountryPage__TabsContainer--Scroll";document.querySelector(e)&&new Splide(e,{autoplay:!1,arrows:!1,pagination:!1,autoWidth:!0}).mount()}),document.addEventListener("DOMContentLoaded",function(){var e=".HotelPage__TabsContainer--Scroll";document.querySelector(e)&&new Splide(e,{autoplay:!1,arrows:!1,perMove:1,pagination:!1,autoWidth:!0}).mount()}),document.addEventListener("DOMContentLoaded",function(){var e,t,o,n;document.querySelector(".HotelPage__PhotoSlider--Base")&&(t=new Splide(".HotelPage__PhotoSlider--Base",(_defineProperty(e={type:"loop",autoWidth:!0,perPage:5,perMove:1,pagination:!1,lazyLoad:"nearby",preloadPages:5},"preloadPages",5),_defineProperty(e,"arrowPath","M1.06039 38.9541C2.48267 40.3486 4.77972 40.3486 6.202 38.9541L22.9396 22.4452C24.3535 21.0423 24.3535 18.7767 22.9396 17.3738L6.202 0.864871C4.7552 -0.35721 2.59852 -0.275046 1.2516 1.05347C-0.0953188 2.38199 -0.178623 4.50921 1.06039 5.93624L15.209 19.9275L1.06039 33.8827C-0.353463 35.2856 -0.353463 37.5512 1.06039 38.9541Z"),e)),o=new Splide(".HotelPage__PhotoSlider--Popup",{type:"loop",autoWidth:!0,perPage:1,perMove:1,pagination:!1,lazyLoad:"nearby",preloadPages:5,arrowPath:"M1.06039 38.9541C2.48267 40.3486 4.77972 40.3486 6.202 38.9541L22.9396 22.4452C24.3535 21.0423 24.3535 18.7767 22.9396 17.3738L6.202 0.864871C4.7552 -0.35721 2.59852 -0.275046 1.2516 1.05347C-0.0953188 2.38199 -0.178623 4.50921 1.06039 5.93624L15.209 19.9275L1.06039 33.8827C-0.353463 35.2856 -0.353463 37.5512 1.06039 38.9541Z"}),(n=new Splide(".HotelPage__PhotoSlider--PopupBottom",{type:"loop",autoWidth:!0,perPage:1,perMove:1,pagination:!1,lazyLoad:"nearby",preloadPages:5,drag:!1,arrows:!1,updateOnMove:!0,arrowPath:"M1.06039 38.9541C2.48267 40.3486 4.77972 40.3486 6.202 38.9541L22.9396 22.4452C24.3535 21.0423 24.3535 18.7767 22.9396 17.3738L6.202 0.864871C4.7552 -0.35721 2.59852 -0.275046 1.2516 1.05347C-0.0953188 2.38199 -0.178623 4.50921 1.06039 5.93624L15.209 19.9275L1.06039 33.8827C-0.353463 35.2856 -0.353463 37.5512 1.06039 38.9541Z"})).sync(o),t.on("click",function(){769<=window.innerWidth&&(o.go(t.index),n.go(t.index),document.querySelector(".HotelPage__PhotoSliderContainer").classList.add("HotelPage__PhotoSliderContainer--Active"))}),document.querySelector(".HotelPage__PhotoSliderScreenLock").addEventListener("click",function(){t.go(o.index),document.querySelector(".HotelPage__PhotoSliderContainer").classList.remove("HotelPage__PhotoSliderContainer--Active")}),document.querySelector(".HotelPage__PhotoSliderCloseButton").addEventListener("click",function(){t.go(o.index),document.querySelector(".HotelPage__PhotoSliderContainer").classList.remove("HotelPage__PhotoSliderContainer--Active")}),t.mount(),o.mount(),n.mount(),o.on("move",function(){document.querySelector(".HotelPage__PhotoSliderPopupCounter").innerHTML="".concat(o.index+1,"/").concat(o.length)}))}),document.addEventListener("DOMContentLoaded",function(){var e=".MobileWithYou__SplideRoot";document.querySelector(e)&&new Splide(e,{type:"loop",pagination:!1}).mount()}),function(){var t=document.querySelector(".TelegramForm"),e=document.querySelectorAll(".Telegram__Trigger"),o=document.querySelector(".TelegramForm__Screenlock"),n=document.querySelector(".TelegramForm__CloseTrigger"),r="TelegramForm--Active";t&&e&&o&&n&&(e.forEach(function(e){e.addEventListener("click",function(){t.classList.add(r)})}),o.addEventListener("click",function(){t.classList.remove(r)}),n.addEventListener("click",function(){t.classList.remove(r)}))}();
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImIyYy1tZW51LmpzIiwiYnJvbi1zd2l0Y2guanMiLCJjb3VudHJ5LWluZm8taGFuZGxlci5qcyIsImZlZWRiYWNrLmpzIiwiaG90ZWwtdGFicy5qcyIsIm1vYmlsZS1zaWRlYmFyLmpzIiwicmgtYWNjb3JkaW9uLmpzIiwic2VhcmNoLWZyb20tc3dpdGNoLmpzIiwic3BsaWRlLWluaXQtY291bnRyeS1wYWdlLXRhYnMuanMiLCJzcGxpZGUtaW5pdC1ob3RlbC1wYWdlLXRhYnMuanMiLCJzcGxpZGUtaW5pdC1waG90by1zbGlkZXIuanMiLCJzcGxpZGUtaW5pdC13aXRoLXlvdS5qcyIsInRlbGVncmFtLWZvcm0tYjJiLmpzIl0sIm5hbWVzIjpbImIyY01lbnVUb1JpZ2h0Q2xhc3MiLCJiMmNNZW51RWxlbWVudCIsImRvY3VtZW50IiwicXVlcnlTZWxlY3RvciIsImIyY01lbnVDb250ZW50RWxlbWVudCIsImIyY1RyaWdnZXJFbGVtZW50Iiwic3R5bGUiLCJhbmltYXRpb24iLCJhZGRFdmVudExpc3RlbmVyIiwiY2xhc3NMaXN0IiwidG9nZ2xlIiwid2luZG93Iiwic2Nyb2xsWSIsImFkZCIsInJlbW92ZSIsImJyb25Td3RpY2hUcmlnZ2VyQnV0dG9ucyIsInF1ZXJ5U2VsZWN0b3JBbGwiLCJicm9uQ29udGVudEJsb2NrcyIsImZvckVhY2giLCJidXR0b24iLCJidXR0b25Ub1JlbW92ZUFjdGl2ZVN0YXR1cyIsImJyb25Db250ZW50QmxvY2siLCJnZXRBdHRyaWJ1dGUiLCJjbGljayIsImF0dHJpYnV0ZU5hbWVUb1F1ZXJ5IiwiYXR0cmlidXRlTmFtZSIsImNvbmNhdCIsImhpZGVFbGVtZW50IiwiZWxlbWVudCIsImRpc3BsYXkiLCJzaG93RWxlbWVudCIsImRhdGFTZWN0aW9uQXR0cmlidXRlTmFtZSIsImRhdGFUcmlnZ2VyQXR0cmlidXRlTmFtZSIsImRhdGFBdHRyaWJ1dGVOYW1lIiwiZGF0YVRpdGxlQXR0cmlidXRlTmFtZSIsImdvbGRCZ0NsYXNzIiwiZGF0YXMiLCJkYXRhU2VjdGlvbnMiLCJkYXRhVHJpZ2dlcnMiLCJkYXRhVGl0bGVzIiwiZGF0YVRpdGxlIiwiZGF0YVRyaWdnZXIiLCJpZCIsImZlZWRiYWNrIiwiZmVlZGJhY2tUcmlnZ2VycyIsImZlZWRiYWNrU2NyZWVubG9jayIsImZlZWRiYWNrQ2xvc2VUcmlnZ2VyIiwiZmVlZGJhY2tBY3RpdmVDbGFzcyIsImZlZWRiYWNrVHJpZ2dlciIsImhvdGVsUGhvdG9zSW5pdGVkIiwiZGF0YUNvdW50IiwibGVuZ3RoIiwicHJvZ3Jlc3NCYXIiLCJkYXRhVHJpZ2dlcjIiLCJzZXRUaW1lb3V0Iiwibm9tZXIiLCJzcGxpZGVEZXNrdG9wIiwiU3BsaWRlIiwidHlwZSIsImF1dG9wbGF5IiwicGVyUGFnZSIsInBlck1vdmUiLCJkaXJlY3Rpb24iLCJoZWlnaHQiLCJwYWdpbmF0aW9uIiwibGF6eUxvYWQiLCJwcmVsb2FkUGFnZXMiLCJhcnJvd1BhdGgiLCJtb3VudCIsImdhcCIsInN5bmMiLCJvbiIsImNsb3NlU2lkZWJhciIsIm1vYmlsZVNpZGViYXJFbGVtZW50IiwibW9iaWxlU2lkZWJhclRyaWdnZXJFbGVtZW50IiwibW9iaWxlU2lkZWJhckNsb3NlVHJpZ2dlckVsZW1lbnQiLCJtb2JpbGVTaWRlYmFyU2NyZWVubG9ja0VsZW1lbnQiLCJtb2JpbGVTaWRlYmFySXRlbUVsZW1lbnRzIiwibW9iaWxlU2lkZWJhckFjdGl2ZUNsYXNzIiwiYm9keSIsIm92ZXJmbG93IiwibW9iaWxlU2lkZWJhckl0ZW1FbGVtZW50IiwidHJpZ2dlciIsInN1Ym1lbnUiLCJzdWJtZW51RWFjaCIsImlubmVyV2lkdGgiLCJhY2NvcmRpb25FbGVtZW50cyIsImFjY29yZGlvbiIsImJ1dHRvbkFjdGl2ZUNsYXNzIiwiZm9ybUFjdGl2ZUNsYXNzIiwidG91clNlYXJjaEJ1dHRvbkVsZW1lbnQiLCJob3RlbFNlYXJjaEJ1dHRvbkVsZW1lbnQiLCJ0b3VyU2VhcmNoRm9ybUVsZW1lbnQiLCJob3RlbFNlYXJjaEZvcm1FbGVtZW50Iiwic2xpZGVyRWxlbWVudFF1ZXJ5IiwiYXJyb3dzIiwiYXV0b1dpZHRoIiwiX1NwbGlkZSIsInNwbGlkZSIsInNwbGlkZVBvcHVwIiwic3BsaWRlUG9wdXBCb3R0b20iLCJfZGVmaW5lUHJvcGVydHkiLCJkcmFnIiwidXBkYXRlT25Nb3ZlIiwiZ28iLCJpbmRleCIsImlubmVySFRNTCIsInRlbGVncmFtIiwidGVsZWdyYW1UcmlnZ2VycyIsInRlbGVncmFtU2NyZWVubG9jayIsInRlbGVncmFtQ2xvc2VUcmlnZ2VyIiwidGVsZWdyYW1BY3RpdmVDbGFzcyIsInRlbGVncmFtVHJpZ2dlciJdLCJtYXBwaW5ncyI6Im9KQUFBLFdBQ0EsSUFLQUEsRUFBQSxxQkFFQUMsRUFBQUMsU0FBQUMsY0FQQSxhQVFBQyxFQUFBRixTQUFBQyxjQVBBLHNCQVFBRSxFQUFBSCxTQUFBQyxjQVBBLHVCQVNBRixHQUFBRyxHQUFBQyxLQUlBRCxFQUFBRSxNQUFBQyxVQUFBLE9BZUFGLEVBQUFHLGlCQUFBLFFBTEEsV0FDQUosRUFBQUUsTUFBQUMsVUFBQSxHQUNBTixFQUFBUSxVQUFBQyxPQXZCQSxzQkEyQkFDLE9BQUFILGlCQUFBLFNBZEEsV0FDQSxFQUFBRyxPQUFBQyxRQUFBLElBQ0FYLEVBQUFRLFVBQUFJLElBQUFiLEdBRUFDLEVBQUFRLFVBQUFLLE9BQUFkLE1BdEJBLEdDQUEsV0FDQSxJQUFBZSxFQUFBYixTQUFBYyxpQkFBQSx1QkFDQUMsRUFBQWYsU0FBQWMsaUJBQUEsa0JBRUFELEdBQUFFLElBSUFGLEVBQUFHLFFBQUEsU0FBQUMsR0FDQUEsRUFBQVgsaUJBQUEsUUFBQSxXQUNBTyxFQUFBRyxRQUFBLFNBQUFFLEdBQ0FBLEVBQUFYLFVBQUFLLE9BQUEsZ0NBR0FLLEVBQUFWLFVBQUFJLElBQUEsOEJBRUFJLEVBQUFDLFFBQUEsU0FBQUcsR0FDQUEsRUFBQVosVUFBQUssT0FBQSx5QkFDQU8sRUFBQUMsYUFBQSxrQkFBQUgsRUFBQUcsYUFBQSx3QkFDQUQsRUFBQVosVUFBQUksSUFBQSwrQkFNQUUsRUFB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Q0FtRyxFQUFBbEcsVUFBQUksSUFBQWtHLE9BSUFGLEVBQUFyRyxpQkFBQSxRQUFBLFdBQ0FtRyxFQUFBbEcsVUFBQUssT0FBQWlHLEtBR0FELEVBQUF0RyxpQkFBQSxRQUFBLFdBQ0FtRyxFQUFBbEcsVUFBQUssT0FBQWlHLE1BdkJBIiwiZmlsZSI6ImN1c3RvbWVyLmpzIiwic291cmNlc0NvbnRlbnQiOlsiKCgpID0+IHtcclxuICBjb25zdCBiMmNNZW51UXVlcnkgPSBcIi5iMmMtbWVudVwiO1xyXG4gIGNvbnN0IGIyY01lbnVDb250ZW50UXVlcnkgPSBcIi5iMmMtbWVudV9fY29udGVudFwiO1xyXG4gIGNvbnN0IGIyY1RyaWdnZXJRdWVyeSA9IFwiLmIyYy1tZW51X190cmlnZ2VyXCI7XHJcblxyXG4gIGNvbnN0IGIyY01lbnVBY3RpdmVDbGFzcyA9IFwiYjJjLW1lbnUtLWFjdGl2ZVwiO1xyXG4gIGNvbnN0IGIyY01lbnVUb1JpZ2h0Q2xhc3MgPSBcImIyYy1tZW51LS10by1yaWdodFwiO1xyXG5cclxuICBjb25zdCBiMmNNZW51RWxlbWVudCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoYjJjTWVudVF1ZXJ5KTtcclxuICBjb25zdCBiMmNNZW51Q29udGVudEVsZW1lbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGIyY01lbnVDb250ZW50UXVlcnkpO1xyXG4gIGNvbnN0IGIyY1RyaWdnZXJFbGVtZW50ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihiMmNUcmlnZ2VyUXVlcnkpO1xyXG5cclxuICBpZiAoIWIyY01lbnVFbGVtZW50ICYmICFiMmNNZW51Q29udGVudEVsZW1lbnQgJiYgIWIyY1RyaWdnZXJFbGVtZW50KSB7XHJcbiAgICByZXR1cm47XHJcbiAgfVxyXG5cclxuICBiMmNNZW51Q29udGVudEVsZW1lbnQuc3R5bGUuYW5pbWF0aW9uID0gXCJub25lXCI7XHJcbiAgXHJcbiAgY29uc3QgaGFuZGxlU2Nyb2xsID0gKCkgPT4ge1xyXG4gICAgaWYgKHdpbmRvdy5zY3JvbGxZIC0gMjMyID4gMCkge1xyXG4gICAgICBiMmNNZW51RWxlbWVudC5jbGFzc0xpc3QuYWRkKGIyY01lbnVUb1JpZ2h0Q2xhc3MpO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgYjJjTWVudUVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZShiMmNNZW51VG9SaWdodENsYXNzKTtcclxuICAgIH1cclxuICB9O1xyXG5cclxuICBjb25zdCB0b2dnbGVNZW51ID0gKCkgPT4ge1xyXG4gICAgYjJjTWVudUNvbnRlbnRFbGVtZW50LnN0eWxlLmFuaW1hdGlvbiA9IFwiXCI7XHJcbiAgICBiMmNNZW51RWxlbWVudC5jbGFzc0xpc3QudG9nZ2xlKGIyY01lbnVBY3RpdmVDbGFzcyk7XHJcbiAgfTtcclxuXHJcbiAgYjJjVHJpZ2dlckVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIHRvZ2dsZU1lbnUpO1xyXG4gIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKFwic2Nyb2xsXCIsIGhhbmRsZVNjcm9sbCk7XHJcbn0pKCk7IiwiKCgpID0+IHtcbiAgY29uc3QgYnJvblN3dGljaFRyaWdnZXJCdXR0b25zID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChcIi5Ccm9uX19Td2l0Y2hCdXR0b25cIik7XG4gIGNvbnN0IGJyb25Db250ZW50QmxvY2tzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChcIi5Ccm9uX19Db250ZW50XCIpO1xuXG4gIGlmICghYnJvblN3dGljaFRyaWdnZXJCdXR0b25zIHx8ICFicm9uQ29udGVudEJsb2Nrcykge1xuICAgIHJldHVybjtcbiAgfVxuXG4gIGJyb25Td3RpY2hUcmlnZ2VyQnV0dG9ucy5mb3JFYWNoKGJ1dHRvbiA9PiB7XG4gICAgYnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XG4gICAgICBicm9uU3d0aWNoVHJpZ2dlckJ1dHRvbnMuZm9yRWFjaChidXR0b25Ub1JlbW92ZUFjdGl2ZVN0YXR1cyA9PiB7XG4gICAgICAgIGJ1dHRvblRvUmVtb3ZlQWN0aXZlU3RhdHVzLmNsYXNzTGlzdC5yZW1vdmUoXCJCcm9uX19Td2l0Y2hCdXR0b24tLUFjdGl2ZVwiKTtcbiAgICAgIH0pO1xuXG4gICAgICBidXR0b24uY2xhc3NMaXN0LmFkZChcIkJyb25fX1N3aXRjaEJ1dHRvbi0tQWN0aXZlXCIpO1xuXG4gICAgICBicm9uQ29udGVudEJsb2Nrcy5mb3JFYWNoKGJyb25Db250ZW50QmxvY2sgPT4ge1xuICAgICAgICBicm9uQ29udGVudEJsb2NrLmNsYXNzTGlzdC5yZW1vdmUoXCJCcm9uX19Db250ZW50LS1BY3RpdmVcIik7XG4gICAgICAgIGlmIChicm9uQ29udGVudEJsb2NrLmdldEF0dHJpYnV0ZShcImJyb24tY29udGVudFwiKSA9PT0gYnV0dG9uLmdldEF0dHJpYnV0ZShcImJyb24tc3dpdGNoLXRyaWdnZXJcIikpIHtcbiAgICAgICAgICBicm9uQ29udGVudEJsb2NrLmNsYXNzTGlzdC5hZGQoXCJCcm9uX19Db250ZW50LS1BY3RpdmVcIik7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgIH0pO1xuICB9KTtcblxuICBpZiAoYnJvblN3dGljaFRyaWdnZXJCdXR0b25zWzBdKSB7XG4gICAgYnJvblN3dGljaFRyaWdnZXJCdXR0b25zWzBdLmNsaWNrKCk7XG4gIH1cbn0pKCk7IiwiKCgpID0+IHtcclxuICBjb25zdCBkYXRhU2VjdGlvblRyaWdnZXJBdHRyaWJ1dGVOYW1lID0gXCJyaC1jb3VudHJ5LWRhdGEtc2VjdGlvbi10cmlnZ2VyXCI7XHJcbiAgY29uc3QgZGF0YVNlY3Rpb25BdHRyaWJ1dGVOYW1lID0gXCJyaC1jb3VudHJ5LWRhdGEtc2VjdGlvblwiO1xyXG4gIGNvbnN0IGRhdGFUcmlnZ2VyQXR0cmlidXRlTmFtZSA9IFwicmgtY291bnRyeS1kYXRhLXRyaWdnZXJcIjtcclxuICBjb25zdCBkYXRhQXR0cmlidXRlTmFtZSA9IFwicmgtY291bnRyeS1kYXRhXCI7XHJcbiAgY29uc3QgZGF0YVRpdGxlQXR0cmlidXRlTmFtZSA9IFwicmgtY291bnRyeS1kYXRhLXRpdGxlXCI7XHJcbiAgY29uc3QgZ29sZEJnQ2xhc3MgPSBcIkNvdW50cnlQYWdlX19UYWJMaW5rLS1BY3RpdmVcIjtcclxuXHJcbiAgLyoqXHJcbiAgICogQHBhcmFtIHtzdHJpbmd9IGF0dHJpYnV0ZU5hbWVcclxuICAgKiBAcmV0dXJucyAge3N0cmluZ31cclxuICAgKi9cclxuICBjb25zdCBhdHRyaWJ1dGVOYW1lVG9RdWVyeSA9IGF0dHJpYnV0ZU5hbWUgPT4gYFske2F0dHJpYnV0ZU5hbWV9XWA7XHJcblxyXG4gIC8qKlxyXG4gICAqIEBwYXJhbSB7c3RyaW5nIHwgbnVtYmVyfSBpZFxyXG4gICAqIEByZXR1cm5zIHt2b2lkfVxyXG4gICAqL1xyXG4gICBjb25zdCBjcmVhdGVRdWVyeUZvckRhdGFCeUlkID0gaWQgPT4gYFske2RhdGFBdHRyaWJ1dGVOYW1lfSA9IFwiJHtpZH1cIl1gO1xyXG5cclxuICAvKipcclxuICAgKiBAcGFyYW0ge3N0cmluZyB8IG51bWJlcn0gaWRcclxuICAgKiBAcmV0dXJucyB7dm9pZH1cclxuICAgKi9cclxuICBjb25zdCBjcmVhdGVRdWVyeUZvckRhdGFTZWN0aW9uQnlJZCA9IGlkID0+IGBbJHtkYXRhU2VjdGlvbkF0dHJpYnV0ZU5hbWV9ID0gXCIke2lkfVwiXWA7XHJcblxyXG4gICAvKipcclxuICAgKiBAcGFyYW0ge3N0cmluZyB8IG51bWJlcn0gaWRcclxuICAgKiBAcmV0dXJucyB7dm9pZH1cclxuICAgKi9cclxuICBjb25zdCBjcmVhdGVRdWVyeUZvckRhdGFUaXRsZUJ5SWQgPSBpZCA9PiBgWyR7ZGF0YVRpdGxlQXR0cmlidXRlTmFtZX0gPSBcIiR7aWR9XCJdYDtcclxuXHJcbiAgLyoqXHJcbiAgICogQHBhcmFtIHtIVE1MRWxlbWVudH0gZWxlbWVudFxyXG4gICAqIEByZXR1cm5zIHt2b2lkfSBcclxuICAgKi9cclxuICBjb25zdCBoaWRlRWxlbWVudCA9IGVsZW1lbnQgPT4ge1xyXG4gICAgZWxlbWVudC5zdHlsZS5kaXNwbGF5ID0gXCJub25lXCI7XHJcbiAgfTtcclxuXHJcbiAgLyoqXHJcbiAgICogQHBhcmFtIHtIVE1MRWxlbWVudH0gZWxlbWVudFxyXG4gICAqIEByZXR1cm5zIHt2b2lkfSBcclxuICAgKi9cclxuICBjb25zdCBzaG93RWxlbWVudCA9IGVsZW1lbnQgPT4ge1xyXG4gICAgZWxlbWVudC5zdHlsZS5kaXNwbGF5ID0gXCJibG9ja1wiO1xyXG4gIH07XHJcblxyXG4gIGNvbnN0IGRhdGFzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChhdHRyaWJ1dGVOYW1lVG9RdWVyeShkYXRhQXR0cmlidXRlTmFtZSkpO1xyXG4gIGNvbnN0IGRhdGFTZWN0aW9ucyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoYXR0cmlidXRlTmFtZVRvUXVlcnkoZGF0YVNlY3Rpb25BdHRyaWJ1dGVOYW1lKSk7XHJcbiAgY29uc3QgZGF0YVRyaWdnZXJzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChhdHRyaWJ1dGVOYW1lVG9RdWVyeShkYXRhVHJpZ2dlckF0dHJpYnV0ZU5hbWUpKTtcclxuICBjb25zdCBkYXRhVGl0bGVzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChhdHRyaWJ1dGVOYW1lVG9RdWVyeShkYXRhVGl0bGVBdHRyaWJ1dGVOYW1lKSk7XHJcblxyXG4gIGRhdGFzLmZvckVhY2goZGF0YSA9PiBoaWRlRWxlbWVudChkYXRhKSk7XHJcbiAgZGF0YVNlY3Rpb25zLmZvckVhY2goZGF0YVNlY3Rpb24gPT4gaGlkZUVsZW1lbnQoZGF0YVNlY3Rpb24pKTtcclxuICBkYXRhVGl0bGVzLmZvckVhY2goZGF0YVRpdGxlID0+IGRhdGFUaXRsZS5jbGFzc0xpc3QucmVtb3ZlKGdvbGRCZ0NsYXNzKSk7XHJcblxyXG4gIGRhdGFUcmlnZ2Vycy5mb3JFYWNoKGRhdGFUcmlnZ2VyID0+IHtcclxuICAgIGRhdGFUcmlnZ2VyLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XHJcbiAgICAgIGRhdGFzLmZvckVhY2goZGF0YSA9PiBoaWRlRWxlbWVudChkYXRhKSk7XHJcbiAgICAgIGRhdGFTZWN0aW9ucy5mb3JFYWNoKGRhdGFTZWN0aW9uID0+IGhpZGVFbGVtZW50KGRhdGFTZWN0aW9uKSk7XHJcbiAgICAgIGRhdGFUaXRsZXMuZm9yRWFjaChkYXRhVGl0bGUgPT4gZGF0YVRpdGxlLmNsYXNzTGlzdC5yZW1vdmUoZ29sZEJnQ2xhc3MpKTtcclxuXHJcbiAgICAgIHNob3dFbGVtZW50KFxyXG4gICAgICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXHJcbiAgICAgICAgICBjcmVhdGVRdWVyeUZvckRhdGFCeUlkKGRhdGFUcmlnZ2VyLmdldEF0dHJpYnV0ZShkYXRhVHJpZ2dlckF0dHJpYnV0ZU5hbWUpKVxyXG4gICAgICAgIClcclxuICAgICAgKTtcclxuICAgICAgc2hvd0VsZW1lbnQoXHJcbiAgICAgICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcihjcmVhdGVRdWVyeUZvckRhdGFTZWN0aW9uQnlJZChcclxuICAgICAgICAgIGRhdGFUcmlnZ2VyLmdldEF0dHJpYnV0ZShkYXRhU2VjdGlvblRyaWdnZXJBdHRyaWJ1dGVOYW1lKVxyXG4gICAgICAgICkpXHJcbiAgICAgICk7XHJcbiAgICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoY3JlYXRlUXVlcnlGb3JEYXRhVGl0bGVCeUlkKFxyXG4gICAgICAgIGRhdGFUcmlnZ2VyLmdldEF0dHJpYnV0ZShkYXRhVHJpZ2dlckF0dHJpYnV0ZU5hbWUpXHJcbiAgICAgICkpLmZvckVhY2goZGF0YVRpdGxlID0+IGRhdGFUaXRsZS5jbGFzc0xpc3QuYWRkKGdvbGRCZ0NsYXNzKSk7XHJcbiAgICB9KTtcclxuICB9KTtcclxufSkoKTsiLCIoKCkgPT4ge1xuICBjb25zdCBmZWVkYmFjayA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuRmVlZGJhY2tcIik7XG4gIGNvbnN0IGZlZWRiYWNrVHJpZ2dlcnMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKFwiLkZlZWRiYWNrX19UcmlnZ2VyXCIpO1xuICBjb25zdCBmZWVkYmFja1NjcmVlbmxvY2sgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLkZlZWRiYWNrX19TY3JlZW5sb2NrXCIpO1xuICBjb25zdCBmZWVkYmFja0Nsb3NlVHJpZ2dlciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuRmVlZGJhY2tfX0Nsb3NlVHJpZ2dlclwiKTtcblxuICBjb25zdCBmZWVkYmFja0FjdGl2ZUNsYXNzID0gXCJGZWVkYmFjay0tQWN0aXZlXCI7XG5cbiAgaWYgKCFmZWVkYmFjayB8fCAhZmVlZGJhY2tUcmlnZ2VycyB8fCAhZmVlZGJhY2tTY3JlZW5sb2NrIHx8ICFmZWVkYmFja0Nsb3NlVHJpZ2dlcikge1xuICAgIHJldHVybjtcbiAgfVxuXG4gIGZlZWRiYWNrVHJpZ2dlcnMuZm9yRWFjaChmZWVkYmFja1RyaWdnZXIgPT4ge1xuICAgIGZlZWRiYWNrVHJpZ2dlci5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xuICAgICAgZmVlZGJhY2suY2xhc3NMaXN0LmFkZChmZWVkYmFja0FjdGl2ZUNsYXNzKTtcbiAgICB9KTtcbiAgfSk7XG5cbiAgZmVlZGJhY2tTY3JlZW5sb2NrLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XG4gICAgZmVlZGJhY2suY2xhc3NMaXN0LnJlbW92ZShmZWVkYmFja0FjdGl2ZUNsYXNzKTtcbiAgfSk7XG5cbiAgZmVlZGJhY2tDbG9zZVRyaWdnZXIuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcbiAgICBmZWVkYmFjay5jbGFzc0xpc3QucmVtb3ZlKGZlZWRiYWNrQWN0aXZlQ2xhc3MpO1xuICB9KTtcbn0pKCk7XG4iLCIoKCkgPT4ge1xuICBjb25zdCBkYXRhVHJpZ2dlckF0dHJpYnV0ZU5hbWUgPSBcImhvdGVsLXRhYi10cmlnZ2VyLWluZGV4XCI7XG4gIGNvbnN0IGRhdGFBdHRyaWJ1dGVOYW1lID0gXCJob3RlbC1kYXRhXCI7XG4gIGNvbnN0IGdvbGRCZ0NsYXNzID0gXCJIb3RlbFBhZ2VfX1RhYkxpbmstLUFjdGl2ZVwiO1xuXG4gIFxuICBjb25zdCBhdHRyaWJ1dGVOYW1lVG9RdWVyeSA9IGF0dHJpYnV0ZU5hbWUgPT4gYFske2F0dHJpYnV0ZU5hbWV9XWA7XG4gIGNvbnN0IGNyZWF0ZVF1ZXJ5Rm9yRGF0YUJ5SWQgPSBpZCA9PiBgWyR7ZGF0YUF0dHJpYnV0ZU5hbWV9ID0gXCIke2lkfVwiXWA7XG4gIGNvbnN0IGhpZGVFbGVtZW50ID0gZWxlbWVudCA9PiB7IGVsZW1lbnQuc3R5bGUuZGlzcGxheSA9IFwibm9uZVwiOyB9O1xuICBjb25zdCBzaG93RWxlbWVudCA9IGVsZW1lbnQgPT4geyBlbGVtZW50LnN0eWxlLmRpc3BsYXkgPSBcImJsb2NrXCI7IH07XG4gIFxuICBsZXQgaG90ZWxQaG90b3NJbml0ZWQgPSBmYWxzZTtcblxuICBjb25zdCBpbml0U2xpZGVycyA9ICgpID0+IHtcbiAgICBob3RlbFBob3Rvc0luaXRlZCA9IHRydWU7XG5cbiAgICBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgIGNvbnN0IG5vbWVyRWxlbWVudFF1ZXJ5ID0gXCIuSG90ZWxQYWdlX19Ob21lclwiO1xuICAgICAgXG4gICAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKG5vbWVyRWxlbWVudFF1ZXJ5KS5mb3JFYWNoKG5vbWVyID0+IHtcbiAgICAgICAgY29uc3Qgc2xpZGVyRGVza3RvcEVsZW1lbnRRdWVyeSA9IFwiLkhvdGVsUGFnZV9fTm9tZXJQaG90b1NsaWRlclwiO1xuICAgICAgICBjb25zdCBzbGlkZXJNb2JpbGVFbGVtZW50UXVlcnkgPSBcIi5Ib3RlbFBhZ2VfX05vbWVyTW9iaWxlUGhvdG9TbGlkZXJcIjtcbiAgICAgICAgY29uc3Qgc2xpZGVyUG9wdXBFbGVtZW50UXVlcnkgPSBcIi5Ib3RlbFBhZ2VfX05vbWVyUG9wdXBQaG90b1NsaWRlci0tRGVza3RvcFwiO1xuXG4gICAgICAgIGNvbnN0IHNwbGlkZURlc2t0b3AgPSBuZXcgU3BsaWRlKG5vbWVyLnF1ZXJ5U2VsZWN0b3Ioc2xpZGVyRGVza3RvcEVsZW1lbnRRdWVyeSksIHtcbiAgICAgICAgICB0eXBlOiBcImxvb3BcIixcbiAgICAgICAgICBhdXRvcGxheTogdHJ1ZSxcbiAgICAgICAgICBwZXJQYWdlOiAzLFxuICAgICAgICAgIHBlck1vdmU6IDEsXG4gICAgICAgICAgZGlyZWN0aW9uOiBcInR0YlwiLFxuICAgICAgICAgIGhlaWdodDogXCI2NzVweFwiLFxuICAgICAgICAgIHBhZ2luYXRpb246IGZhbHNlLFxuICAgICAgICAgIGxhenlMb2FkOiBcIm5lYXJieVwiLFxuICAgICAgICAgIHByZWxvYWRQYWdlczogMyxcbiAgICAgICAgICBhcnJvd1BhdGg6IFwiTTIuMDE2MiAzOS45NTQxQzMuMzc5MjMgNDEuMzQ4NiA1LjU4MDU2IDQxLjM0ODYgNi45NDM1OSAzOS45NTQxTDIyLjk4MzggMjMuNDQ1MkMyNC4zMzg3IDIyLjA0MjMgMjQuMzM4NyAxOS43NzY3IDIyLjk4MzggMTguMzczOEw2Ljk0MzU5IDEuODY0ODdDNS41NTcwNyAwLjY0Mjc5IDMuNDkwMjUgMC43MjQ5NTQgMi4xOTk0NSAyLjA1MzQ3QzAuOTA4NjU0IDMuMzgxOTkgMC44Mjg4MjEgNS41MDkyMSAyLjAxNjIgNi45MzYyNEwxNS41NzUyIDIwLjkyNzVMMi4wMTYyIDM0Ljg4MjdDMC42NjEyNjYgMzYuMjg1NiAwLjY2MTI2NiAzOC41NTEyIDIuMDE2MiAzOS45NTQxWlwiXG4gICAgICAgIH0pLm1vdW50KCk7XG5cbiAgICAgICAgY29uc3Qgc2xpZGVyTW9iaWxlID0gbmV3IFNwbGlkZShub21lci5xdWVyeVNlbGVjdG9yKHNsaWRlck1vYmlsZUVsZW1lbnRRdWVyeSksIHtcbiAgICAgICAgICB0eXBlOiBcImxvb3BcIixcbiAgICAgICAgICBhdXRvcGxheTogdHJ1ZSxcbiAgICAgICAgICBwZXJQYWdlOiAxLFxuICAgICAgICAgIHBlck1vdmU6IDEsXG4gICAgICAgICAgcGFnaW5hdGlvbjogZmFsc2UsXG4gICAgICAgICAgbGF6eUxvYWQ6IFwibmVhcmJ5XCIsXG4gICAgICAgICAgcHJlbG9hZFBhZ2VzOiAzLFxuICAgICAgICAgIGdhcDogXCIyZW1cIixcbiAgICAgICAgICBhcnJvd1BhdGg6IFwiTTEuMDYwMzkgMzguOTU0MUMyLjQ4MjY3IDQwLjM0ODYgNC43Nzk3MiA0MC4zNDg2IDYuMjAyIDM4Ljk1NDFMMjIuOTM5NiAyMi40NDUyQzI0LjM1MzUgMjEuMDQyMyAyNC4zNTM1IDE4Ljc3NjcgMjIuOTM5NiAxNy4zNzM4TDYuMjAyIDAuODY0ODcxQzQuNzU1MiAtMC4zNTcyMSAyLjU5ODUyIC0wLjI3NTA0NiAxLjI1MTYgMS4wNTM0N0MtMC4wOTUzMTg4IDIuMzgxOTkgLTAuMTc4NjIzIDQuNTA5MjEgMS4wNjAzOSA1LjkzNjI0TDE1LjIwOSAxOS45Mjc1TDEuMDYwMzkgMzMuODgyN0MtMC4zNTM0NjMgMzUuMjg1NiAtMC4zNTM0NjMgMzcuNTUxMiAxLjA2MDM5IDM4Ljk1NDFaXCJcbiAgICAgICAgfSkubW91bnQoKTtcblxuICAgICAgICBjb25zdCBzbGlkZXJQb3B1cCA9IG5ldyBTcGxpZGUobm9tZXIucXVlcnlTZWxlY3RvcihzbGlkZXJQb3B1cEVsZW1lbnRRdWVyeSksIHtcbiAgICAgICAgICB0eXBlOiBcImxvb3BcIixcbiAgICAgICAgICBhdXRvcGxheTogdHJ1ZSxcbiAgICAgICAgICBwZXJQYWdlOiAxLFxuICAgICAgICAgIHBlck1vdmU6IDEsXG4gICAgICAgICAgcGFnaW5hdGlvbjogZmFsc2UsXG4gICAgICAgICAgbGF6eUxvYWQ6IFwibmVhcmJ5XCIsXG4gICAgICAgICAgcHJlbG9hZFBhZ2VzOiAzLFxuICAgICAgICAgIGFycm93UGF0aDogXCJNMS4wNjAzOSAzOC45NTQxQzIuNDgyNjcgNDAuMzQ4NiA0Ljc3OTcyIDQwLjM0ODYgNi4yMDIgMzguOTU0MUwyMi45Mzk2IDIyLjQ0NTJDMjQuMzUzNSAyMS4wNDIzIDI0LjM1MzUgMTguNzc2NyAyMi45Mzk2IDE3LjM3MzhMNi4yMDIgMC44NjQ4NzFDNC43NTUyIC0wLjM1NzIxIDIuNTk4NTIgLTAuMjc1MDQ2IDEuMjUxNiAxLjA1MzQ3Qy0wLjA5NTMxODggMi4zODE5OSAtMC4xNzg2MjMgNC41MDkyMSAxLjA2MDM5IDUuOTM2MjRMMTUuMjA5IDE5LjkyNzVMMS4wNjAzOSAzMy44ODI3Qy0wLjM1MzQ2MyAzNS4yODU2IC0wLjM1MzQ2MyAzNy41NTEyIDEuMDYwMzkgMzguOTU0MVpcIlxuICAgICAgICB9KTtcblxuICAgICAgICBzbGlkZXJQb3B1cC5zeW5jKHNwbGlkZURlc2t0b3ApLm1vdW50KCk7XG4gICAgICAgIFxuICAgICAgICBzcGxpZGVEZXNrdG9wLm9uKFwiY2xpY2tcIiwgKCkgPT4ge1xuICAgICAgICAgIG5vbWVyLnF1ZXJ5U2VsZWN0b3IoXCIuSG90ZWxQYWdlX19Ob21lclBvcHVwUGhvdG9TbGlkZXJDb250YWluZXJcIikuY2xhc3NMaXN0LmFkZChcIkhvdGVsUGFnZV9fTm9tZXJQb3B1cFBob3RvU2xpZGVyQ29udGFpbmVyLS1BY3RpdmVEZXNrdG9wXCIpO1xuICAgICAgICB9KTtcblxuICAgICAgICBub21lci5xdWVyeVNlbGVjdG9yKFwiLkhvdGVsUGFnZV9fTm9tZXJQb3B1cFNjcmVlbmxvY2tcIikuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcbiAgICAgICAgICBub21lci5xdWVyeVNlbGVjdG9yKFwiLkhvdGVsUGFnZV9fTm9tZXJQb3B1cFBob3RvU2xpZGVyQ29udGFpbmVyXCIpLmNsYXNzTGlzdC5yZW1vdmUoXCJIb3RlbFBhZ2VfX05vbWVyUG9wdXBQaG90b1NsaWRlckNvbnRhaW5lci0tQWN0aXZlTW9iaWxlXCIsIFwiSG90ZWxQYWdlX19Ob21lclBvcHVwUGhvdG9TbGlkZXJDb250YWluZXItLUFjdGl2ZURlc2t0b3BcIik7XG4gICAgICAgIH0pO1xuICAgICAgfSk7XG4gICAgfSwgMTAwKTtcbiAgfTtcblxuICBjb25zdCBkYXRhcyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoYXR0cmlidXRlTmFtZVRvUXVlcnkoZGF0YUF0dHJpYnV0ZU5hbWUpKTtcbiAgY29uc3QgZGF0YVRyaWdnZXJzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChhdHRyaWJ1dGVOYW1lVG9RdWVyeShkYXRhVHJpZ2dlckF0dHJpYnV0ZU5hbWUpKTtcbiAgY29uc3QgZGF0YUNvdW50ID0gZGF0YVRyaWdnZXJzLmxlbmd0aDtcbiAgY29uc3QgcHJvZ3Jlc3NCYXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLkhvdGVsUGFnZV9fVGFic1Byb2dyZXNzQmFySW5uZXJcIik7XG5cbiAgZGF0YXMuZm9yRWFjaChkYXRhID0+IGhpZGVFbGVtZW50KGRhdGEpKTtcblxuICBkYXRhVHJpZ2dlcnMuZm9yRWFjaChkYXRhVHJpZ2dlciA9PiB7XG4gICAgZGF0YVRyaWdnZXIuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcbiAgICAgIGRhdGFzLmZvckVhY2goZGF0YSA9PiBoaWRlRWxlbWVudChkYXRhKSk7XG5cbiAgICAgIGRhdGFUcmlnZ2Vycy5mb3JFYWNoKGRhdGFUcmlnZ2VyMiA9PiB7XG4gICAgICAgIGRhdGFUcmlnZ2VyMi5jbGFzc0xpc3QucmVtb3ZlKGdvbGRCZ0NsYXNzKTtcbiAgICAgIH0pO1xuXG4gICAgICBkYXRhVHJpZ2dlci5jbGFzc0xpc3QuYWRkKGdvbGRCZ0NsYXNzKTtcblxuICAgICAgcHJvZ3Jlc3NCYXIuc3R5bGUgPSBgXG4gICAgICAgIGxlZnQ6ICR7ICgoK2RhdGFUcmlnZ2VyLmdldEF0dHJpYnV0ZShkYXRhVHJpZ2dlckF0dHJpYnV0ZU5hbWUpIC0gMSkgLyBkYXRhQ291bnQpICogMTAwIH0lO1xuICAgICAgICB3aWR0aDogJHsgMSAvIGRhdGFDb3VudCAqIDEwMCB9JTtcbiAgICAgIGA7XG5cbiAgICAgIHNob3dFbGVtZW50KFxuICAgICAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFxuICAgICAgICAgIGNyZWF0ZVF1ZXJ5Rm9yRGF0YUJ5SWQoZGF0YVRyaWdnZXIuZ2V0QXR0cmlidXRlKGRhdGFUcmlnZ2VyQXR0cmlidXRlTmFtZSkpXG4gICAgICAgIClcbiAgICAgICk7XG5cbiAgICAgIGlmIChkYXRhVHJpZ2dlci5nZXRBdHRyaWJ1dGUoZGF0YVRyaWdnZXJBdHRyaWJ1dGVOYW1lKSA9PT0gXCI2XCIgJiYgIWhvdGVsUGhvdG9zSW5pdGVkKSB7XG4gICAgICAgIGluaXRTbGlkZXJzKCk7XG4gICAgICB9XG4gICAgfSk7XG4gIH0pO1xuXG4gIGlmIChkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiW2hvdGVsLXRhYi10cmlnZ2VyLWluZGV4PScxJ11cIikpIHtcbiAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiW2hvdGVsLXRhYi10cmlnZ2VyLWluZGV4PScxJ11cIikuY2xpY2soKTtcbiAgfVxufSkoKTsiLCIoKCkgPT4ge1xyXG4gIGNvbnN0IG1vYmlsZVNpZGViYXJFbGVtZW50ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5tb2JpbGUtc2lkZWJhclwiKTtcclxuICBjb25zdCBtb2JpbGVTaWRlYmFyVHJpZ2dlckVsZW1lbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLm1vYmlsZS1zaWRlYmFyLXRyaWdnZXJcIik7XHJcbiAgY29uc3QgbW9iaWxlU2lkZWJhckNsb3NlVHJpZ2dlckVsZW1lbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLm1vYmlsZS1zaWRlYmFyX19jbG9zZS10cmlnZ2VyXCIpO1xyXG4gIGNvbnN0IG1vYmlsZVNpZGViYXJTY3JlZW5sb2NrRWxlbWVudCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIubW9iaWxlLXNpZGViYXJfX3NjcmVlbmxvY2tcIik7XHJcbiAgY29uc3QgbW9iaWxlU2lkZWJhckl0ZW1FbGVtZW50cyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoXCIubW9iaWxlLXNpZGViYXJfX2l0ZW1cIik7XHJcblxyXG4gIGNvbnN0IG1vYmlsZVNpZGViYXJBY3RpdmVDbGFzcyA9IFwibW9iaWxlLXNpZGViYXItLWFjdGl2ZVwiO1xyXG5cclxuICBpZiAoXHJcbiAgICAhbW9iaWxlU2lkZWJhckVsZW1lbnQgXHJcbiAgICB8fCAhbW9iaWxlU2lkZWJhclRyaWdnZXJFbGVtZW50IFxyXG4gICAgfHwgIW1vYmlsZVNpZGViYXJDbG9zZVRyaWdnZXJFbGVtZW50IFxyXG4gICAgfHwgIW1vYmlsZVNpZGViYXJTY3JlZW5sb2NrRWxlbWVudFxyXG4gICAgfHwgbW9iaWxlU2lkZWJhckl0ZW1FbGVtZW50cy5sZW5ndGggPT09IDAgXHJcbiAgKSB7XHJcbiAgICByZXR1cm47XHJcbiAgfVxyXG5cclxuICBjb25zdCBvcGVuU2lkZWJhciA9ICgpID0+IHtcclxuICAgIGRvY3VtZW50LmJvZHkuc3R5bGUub3ZlcmZsb3cgPSBcImhpZGRlblwiO1xyXG4gICAgbW9iaWxlU2lkZWJhckVsZW1lbnQuY2xhc3NMaXN0LmFkZChtb2JpbGVTaWRlYmFyQWN0aXZlQ2xhc3MpO1xyXG4gIH07XHJcblxyXG4gIGNvbnN0IGNsb3NlU2lkZWJhciA9ICgpID0+IHtcclxuICAgIGRvY3VtZW50LmJvZHkuc3R5bGUub3ZlcmZsb3cgPSBcImF1dG9cIjtcclxuICAgIG1vYmlsZVNpZGViYXJFbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUobW9iaWxlU2lkZWJhckFjdGl2ZUNsYXNzKTtcclxuICB9O1xyXG5cclxuICBjb25zdCBoYW5kbGVSZXNpemUgPSAoKSA9PiB7XHJcbiAgICBjb25zdCBtb2JpbGVXaWR0aExpbWl0ID0gNzY5O1xyXG4gICAgXHJcbiAgICBpZiAod2luZG93LmlubmVyV2lkdGggPj0gbW9iaWxlV2lkdGhMaW1pdCkge1xyXG4gICAgICBjbG9zZVNpZGViYXIoKTtcclxuICAgIH1cclxuICB9O1xyXG5cclxuICBtb2JpbGVTaWRlYmFySXRlbUVsZW1lbnRzLmZvckVhY2gobW9iaWxlU2lkZWJhckl0ZW1FbGVtZW50ID0+IHtcclxuICAgIGNvbnN0IHRyaWdnZXIgPSBtb2JpbGVTaWRlYmFySXRlbUVsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5tb2JpbGUtc2lkZWJhcl9fc3VibWVudS10cmlnZ2VyXCIpO1xyXG4gICAgY29uc3Qgc3VibWVudSA9IG1vYmlsZVNpZGViYXJJdGVtRWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLm1vYmlsZS1zaWRlYmFyX19zdWJtZW51XCIpO1xyXG4gICAgXHJcbiAgICB0cmlnZ2VyLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XHJcbiAgICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoXCIubW9iaWxlLXNpZGViYXJfX3N1Ym1lbnVcIilcclxuICAgICAgICAuZm9yRWFjaChzdWJtZW51RWFjaCA9PiB7XHJcbiAgICAgICAgICBpZiAoc3VibWVudUVhY2ggIT09IHN1Ym1lbnUpIHtcclxuICAgICAgICAgICAgc3VibWVudUVhY2guY2xhc3NMaXN0LnJlbW92ZShcIm1vYmlsZS1zaWRlYmFyX19zdWJtZW51LS1hY3RpdmVcIik7XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICAgIHN1Ym1lbnUuY2xhc3NMaXN0LnRvZ2dsZShcIm1vYmlsZS1zaWRlYmFyX19zdWJtZW51LS1hY3RpdmVcIik7XHJcbiAgICB9KTtcclxuICB9KTtcclxuXHJcbiAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoXCJyZXNpemVcIiwgaGFuZGxlUmVzaXplKTtcclxuICBtb2JpbGVTaWRlYmFyVHJpZ2dlckVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIG9wZW5TaWRlYmFyKTtcclxuICBtb2JpbGVTaWRlYmFyQ2xvc2VUcmlnZ2VyRWxlbWVudC5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgY2xvc2VTaWRlYmFyKTtcclxuICBtb2JpbGVTaWRlYmFyU2NyZWVubG9ja0VsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIGNsb3NlU2lkZWJhcik7XHJcbn0pKCk7XHJcblxyXG5cclxuKCgpID0+IHtcclxuICBjb25zdCBtb2JpbGVTaWRlYmFyRWxlbWVudCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuTW9iaWxlU2lkZWJhclwiKTtcclxuICBjb25zdCBtb2JpbGVTaWRlYmFyVHJpZ2dlckVsZW1lbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLm1vYmlsZS1zaWRlYmFyLXRyaWdnZXJcIik7XHJcbiAgY29uc3QgbW9iaWxlU2lkZWJhckNsb3NlVHJpZ2dlckVsZW1lbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLk1vYmlsZVNpZGViYXJfX0Nsb3NlVHJpZ2dlclwiKTtcclxuICBjb25zdCBtb2JpbGVTaWRlYmFyU2NyZWVubG9ja0VsZW1lbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLk1vYmlsZVNpZGViYXJfX1NjcmVlbkxvY2tcIik7XHJcbiAgY29uc3QgbW9iaWxlU2lkZWJhckl0ZW1FbGVtZW50cyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoXCIuTW9iaWxlU2lkZWJhcl9fU2Vjb25kQ29udGVudEl0ZW1cIik7XHJcblxyXG4gIGNvbnN0IG1vYmlsZVNpZGViYXJBY3RpdmVDbGFzcyA9IFwiTW9iaWxlU2lkZWJhci0tQWN0aXZlXCI7XHJcblxyXG4gIGlmIChcclxuICAgICFtb2JpbGVTaWRlYmFyRWxlbWVudCBcclxuICAgIHx8ICFtb2JpbGVTaWRlYmFyVHJpZ2dlckVsZW1lbnQgXHJcbiAgICB8fCAhbW9iaWxlU2lkZWJhckNsb3NlVHJpZ2dlckVsZW1lbnQgXHJcbiAgICB8fCAhbW9iaWxlU2lkZWJhclNjcmVlbmxvY2tFbGVtZW50XHJcbiAgICB8fCBtb2JpbGVTaWRlYmFySXRlbUVsZW1lbnRzLmxlbmd0aCA9PT0gMCBcclxuICApIHtcclxuICAgIHJldHVybjtcclxuICB9XHJcblxyXG4gIGNvbnN0IG9wZW5TaWRlYmFyID0gKCkgPT4ge1xyXG4gICAgZG9jdW1lbnQuYm9keS5zdHlsZS5vdmVyZmxvdyA9IFwiaGlkZGVuXCI7XHJcbiAgICBtb2JpbGVTaWRlYmFyRWxlbWVudC5jbGFzc0xpc3QuYWRkKG1vYmlsZVNpZGViYXJBY3RpdmVDbGFzcyk7XHJcbiAgfTtcclxuXHJcbiAgY29uc3QgY2xvc2VTaWRlYmFyID0gKCkgPT4ge1xyXG4gICAgZG9jdW1lbnQuYm9keS5zdHlsZS5vdmVyZmxvdyA9IFwiYXV0b1wiO1xyXG4gICAgbW9iaWxlU2lkZWJhckVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZShtb2JpbGVTaWRlYmFyQWN0aXZlQ2xhc3MpO1xyXG4gIH07XHJcblxyXG4gIGNvbnN0IGhhbmRsZVJlc2l6ZSA9ICgpID0+IHtcclxuICAgIGNvbnN0IG1vYmlsZVdpZHRoTGltaXQgPSA3Njk7XHJcbiAgICBcclxuICAgIGlmICh3aW5kb3cuaW5uZXJXaWR0aCA+PSBtb2JpbGVXaWR0aExpbWl0KSB7XHJcbiAgICAgIGNsb3NlU2lkZWJhcigpO1xyXG4gICAgfVxyXG4gIH07XHJcblxyXG4gIG1vYmlsZVNpZGViYXJJdGVtRWxlbWVudHMuZm9yRWFjaChtb2JpbGVTaWRlYmFySXRlbUVsZW1lbnQgPT4ge1xyXG4gICAgY29uc3QgdHJpZ2dlciA9IG1vYmlsZVNpZGViYXJJdGVtRWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLk1vYmlsZVNpZGViYXJfX1NlY29uZENvbnRlbnRTdWJtZW51VHJpZ2dlclwiKTtcclxuICAgIGNvbnN0IHN1Ym1lbnUgPSBtb2JpbGVTaWRlYmFySXRlbUVsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5Nb2JpbGVTaWRlYmFyX19TZWNvbmRDb250ZW50U3VibWVudVwiKTtcclxuICAgIFxyXG4gICAgdHJpZ2dlci5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xyXG4gICAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKFwiLk1vYmlsZVNpZGViYXJfX1NlY29uZENvbnRlbnRTdWJtZW51XCIpXHJcbiAgICAgICAgLmZvckVhY2goc3VibWVudUVhY2ggPT4ge1xyXG4gICAgICAgICAgaWYgKHN1Ym1lbnVFYWNoICE9PSBzdWJtZW51KSB7XHJcbiAgICAgICAgICAgIHN1Ym1lbnVFYWNoLmNsYXNzTGlzdC5yZW1vdmUoXCJNb2JpbGVTaWRlYmFyX19TZWNvbmRDb250ZW50U3VibWVudS0tQWN0aXZlXCIpO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgICBzdWJtZW51LmNsYXNzTGlzdC50b2dnbGUoXCJNb2JpbGVTaWRlYmFyX19TZWNvbmRDb250ZW50U3VibWVudS0tQWN0aXZlXCIpO1xyXG4gICAgfSk7XHJcbiAgfSk7XHJcblxyXG4gIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKFwicmVzaXplXCIsIGhhbmRsZVJlc2l6ZSk7XHJcbiAgbW9iaWxlU2lkZWJhclRyaWdnZXJFbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCBvcGVuU2lkZWJhcik7XHJcbiAgbW9iaWxlU2lkZWJhckNsb3NlVHJpZ2dlckVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIGNsb3NlU2lkZWJhcik7XHJcbiAgbW9iaWxlU2lkZWJhclNjcmVlbmxvY2tFbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCBjbG9zZVNpZGViYXIpO1xyXG59KSgpO1xyXG4iLCIoKCkgPT4ge1xyXG4gIGNvbnN0IGFjY29yZGlvblF1ZXJ5ID0gXCIucmgtYWNjb3JkaW9uXCI7XHJcbiAgY29uc3QgYWNjb3JkaW9uVHJpZ2dlclF1ZXJ5ID0gXCIucmgtYWNjb3JkaW9uX190cmlnZ2VyXCI7XHJcbiAgY29uc3QgYWNjb3JkaW9uQWN0aXZlQ2xhc3MgPSBcInJoLWFjY29yZGlvbi0tYWN0aXZlXCI7XHJcblxyXG4gIGNvbnN0IGFjY29yZGlvbkVsZW1lbnRzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChhY2NvcmRpb25RdWVyeSk7XHJcblxyXG4gIGlmICghYWNjb3JkaW9uRWxlbWVudHMpIHtcclxuICAgIHJldHVybjtcclxuICB9XHJcblxyXG4gIGFjY29yZGlvbkVsZW1lbnRzLmZvckVhY2goYWNjb3JkaW9uID0+IHtcclxuICAgIGFjY29yZGlvbi5xdWVyeVNlbGVjdG9yKGFjY29yZGlvblRyaWdnZXJRdWVyeSkuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcclxuICAgICAgYWNjb3JkaW9uLmNsYXNzTGlzdC50b2dnbGUoYWNjb3JkaW9uQWN0aXZlQ2xhc3MpO1xyXG4gICAgfSk7XHJcbiAgfSk7XHJcbn0pKCk7XHJcblxyXG4oKCkgPT4ge1xyXG4gIGNvbnN0IGFjY29yZGlvblF1ZXJ5ID0gXCIuUkhBY2NvcmRpb25cIjtcclxuICBjb25zdCBhY2NvcmRpb25UcmlnZ2VyUXVlcnkgPSBcIi5SSEFjY29yZGlvbl9fVHJpZ2dlclwiO1xyXG4gIGNvbnN0IGFjY29yZGlvbkFjdGl2ZUNsYXNzID0gXCJSSEFjY29yZGlvbi0tQWN0aXZlXCI7XHJcblxyXG4gIGNvbnN0IGFjY29yZGlvbkVsZW1lbnRzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChhY2NvcmRpb25RdWVyeSk7XHJcblxyXG4gIGlmICghYWNjb3JkaW9uRWxlbWVudHMpIHtcclxuICAgIHJldHVybjtcclxuICB9XHJcblxyXG4gIGFjY29yZGlvbkVsZW1lbnRzLmZvckVhY2goYWNjb3JkaW9uID0+IHtcclxuICAgIGFjY29yZGlvbi5xdWVyeVNlbGVjdG9yKGFjY29yZGlvblRyaWdnZXJRdWVyeSkuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcclxuICAgICAgYWNjb3JkaW9uLmNsYXNzTGlzdC50b2dnbGUoYWNjb3JkaW9uQWN0aXZlQ2xhc3MpO1xyXG4gICAgfSk7XHJcbiAgfSk7XHJcbn0pKCk7XHJcbiIsIigoKSA9PiB7XHJcbiAgY29uc3QgdG91clNlYXJjaEJ1dHRvbkVsZW1lbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnNlYXJjaC1mb3JtLXN3aXRjaF9fYnV0dG9uX3RvdXJcIik7XHJcbiAgY29uc3QgaG90ZWxTZWFyY2hCdXR0b25FbGVtZW50ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5zZWFyY2gtZm9ybS1zd2l0Y2hfX2J1dHRvbl9ob3RlbFwiKTtcclxuICBjb25zdCB0b3VyU2VhcmNoRm9ybUVsZW1lbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnNlYXJjaC1mb3JtLXN3aXRjaF9fZm9ybV90b3VyXCIpO1xyXG4gIGNvbnN0IGhvdGVsU2VhcmNoRm9ybUVsZW1lbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnNlYXJjaC1mb3JtLXN3aXRjaF9fZm9ybV9ob3RlbFwiKTtcclxuXHJcbiAgaWYgKFxyXG4gICAgIXRvdXJTZWFyY2hCdXR0b25FbGVtZW50IFxyXG4gICAgfHwgIWhvdGVsU2VhcmNoQnV0dG9uRWxlbWVudFxyXG4gICAgfHwgIXRvdXJTZWFyY2hGb3JtRWxlbWVudFxyXG4gICAgfHwgIWhvdGVsU2VhcmNoRm9ybUVsZW1lbnRcclxuICApIHtcclxuICAgIHJldHVybjtcclxuICB9XHJcblxyXG4gIGNvbnN0IGJ1dHRvbkFjdGl2ZUNsYXNzID0gXCJzZWFyY2gtZm9ybS1zd2l0Y2hfX2J1dHRvbi0tYWN0aXZlXCI7XHJcbiAgY29uc3QgZm9ybUFjdGl2ZUNsYXNzID0gXCJzZWFyY2gtZm9ybS1zd2l0Y2hfX2Zvcm0tLWFjdGl2ZVwiO1xyXG5cclxuICB0b3VyU2VhcmNoQnV0dG9uRWxlbWVudC5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xyXG4gICAgdG91clNlYXJjaEJ1dHRvbkVsZW1lbnQuY2xhc3NMaXN0LmFkZChidXR0b25BY3RpdmVDbGFzcyk7XHJcbiAgICB0b3VyU2VhcmNoRm9ybUVsZW1lbnQuY2xhc3NMaXN0LmFkZChmb3JtQWN0aXZlQ2xhc3MpO1xyXG4gICAgaG90ZWxTZWFyY2hCdXR0b25FbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUoYnV0dG9uQWN0aXZlQ2xhc3MpO1xyXG4gICAgaG90ZWxTZWFyY2hGb3JtRWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKGZvcm1BY3RpdmVDbGFzcyk7XHJcbiAgfSk7XHJcblxyXG4gIGhvdGVsU2VhcmNoQnV0dG9uRWxlbWVudC5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xyXG4gICAgaG90ZWxTZWFyY2hCdXR0b25FbGVtZW50LmNsYXNzTGlzdC5hZGQoYnV0dG9uQWN0aXZlQ2xhc3MpO1xyXG4gICAgaG90ZWxTZWFyY2hGb3JtRWxlbWVudC5jbGFzc0xpc3QuYWRkKGZvcm1BY3RpdmVDbGFzcyk7XHJcbiAgICB0b3VyU2VhcmNoQnV0dG9uRWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKGJ1dHRvbkFjdGl2ZUNsYXNzKTtcclxuICAgIHRvdXJTZWFyY2hGb3JtRWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKGZvcm1BY3RpdmVDbGFzcyk7XHJcbiAgfSk7XHJcbn0pKCk7XHJcbiIsImRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJET01Db250ZW50TG9hZGVkXCIsICgpID0+IHtcbiAgY29uc3Qgc2xpZGVyRWxlbWVudFF1ZXJ5ID0gXCIuQ291bnRyeVBhZ2VfX1RhYnNDb250YWluZXItLVNjcm9sbFwiO1xuXG4gIGlmIChkb2N1bWVudC5xdWVyeVNlbGVjdG9yKHNsaWRlckVsZW1lbnRRdWVyeSkpIHtcbiAgICBuZXcgU3BsaWRlKHNsaWRlckVsZW1lbnRRdWVyeSwge1xuICAgICAgYXV0b3BsYXk6IGZhbHNlLFxuICAgICAgYXJyb3dzOiBmYWxzZSxcbiAgICAgIHBhZ2luYXRpb246IGZhbHNlLFxuICAgICAgYXV0b1dpZHRoOiB0cnVlLFxuICAgIH0pLm1vdW50KCk7XG4gIH1cbn0pO1xuIiwiZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcIkRPTUNvbnRlbnRMb2FkZWRcIiwgKCkgPT4ge1xuICBjb25zdCBzbGlkZXJFbGVtZW50UXVlcnkgPSBcIi5Ib3RlbFBhZ2VfX1RhYnNDb250YWluZXItLVNjcm9sbFwiO1xuXG4gIGlmIChkb2N1bWVudC5xdWVyeVNlbGVjdG9yKHNsaWRlckVsZW1lbnRRdWVyeSkpIHtcbiAgICBuZXcgU3BsaWRlKHNsaWRlckVsZW1lbnRRdWVyeSwge1xuICAgICAgYXV0b3BsYXk6IGZhbHNlLFxuICAgICAgYXJyb3dzOiBmYWxzZSxcbiAgICAgIHBlck1vdmU6IDEsXG4gICAgICBwYWdpbmF0aW9uOiBmYWxzZSxcbiAgICAgIGF1dG9XaWR0aDogdHJ1ZSxcbiAgICB9KS5tb3VudCgpO1xuICB9XG59KTtcbiIsImRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJET01Db250ZW50TG9hZGVkXCIsICgpID0+IHtcbiAgaWYgKGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuSG90ZWxQYWdlX19QaG90b1NsaWRlci0tQmFzZVwiKSkge1xuICAgIGNvbnN0IHNwbGlkZSA9IG5ldyBTcGxpZGUoXCIuSG90ZWxQYWdlX19QaG90b1NsaWRlci0tQmFzZVwiLCB7XG4gICAgICB0eXBlOiBcImxvb3BcIixcbiAgICAgIGF1dG9XaWR0aDogdHJ1ZSxcbiAgICAgIHBlclBhZ2U6IDUsXG4gICAgICBwZXJNb3ZlOiAxLFxuICAgICAgcGFnaW5hdGlvbjogZmFsc2UsXG4gICAgICBsYXp5TG9hZDogXCJuZWFyYnlcIixcbiAgICAgIHByZWxvYWRQYWdlczogNSxcbiAgICAgIHByZWxvYWRQYWdlczogNSxcbiAgICAgIGFycm93UGF0aDogXCJNMS4wNjAzOSAzOC45NTQxQzIuNDgyNjcgNDAuMzQ4NiA0Ljc3OTcyIDQwLjM0ODYgNi4yMDIgMzguOTU0MUwyMi45Mzk2IDIyLjQ0NTJDMjQuMzUzNSAyMS4wNDIzIDI0LjM1MzUgMTguNzc2NyAyMi45Mzk2IDE3LjM3MzhMNi4yMDIgMC44NjQ4NzFDNC43NTUyIC0wLjM1NzIxIDIuNTk4NTIgLTAuMjc1MDQ2IDEuMjUxNiAxLjA1MzQ3Qy0wLjA5NTMxODggMi4zODE5OSAtMC4xNzg2MjMgNC41MDkyMSAxLjA2MDM5IDUuOTM2MjRMMTUuMjA5IDE5LjkyNzVMMS4wNjAzOSAzMy44ODI3Qy0wLjM1MzQ2MyAzNS4yODU2IC0wLjM1MzQ2MyAzNy41NTEyIDEuMDYwMzkgMzguOTU0MVpcIlxuICAgIH0pO1xuXG4gICAgY29uc3Qgc3BsaWRlUG9wdXAgPSBuZXcgU3BsaWRlKFwiLkhvdGVsUGFnZV9fUGhvdG9TbGlkZXItLVBvcHVwXCIsIHtcbiAgICAgIHR5cGU6IFwibG9vcFwiLFxuICAgICAgYXV0b1dpZHRoOiB0cnVlLFxuICAgICAgcGVyUGFnZTogMSxcbiAgICAgIHBlck1vdmU6IDEsXG4gICAgICBwYWdpbmF0aW9uOiBmYWxzZSxcbiAgICAgIGxhenlMb2FkOiBcIm5lYXJieVwiLFxuICAgICAgcHJlbG9hZFBhZ2VzOiA1LFxuICAgICAgYXJyb3dQYXRoOiBcIk0xLjA2MDM5IDM4Ljk1NDFDMi40ODI2NyA0MC4zNDg2IDQuNzc5NzIgNDAuMzQ4NiA2LjIwMiAzOC45NTQxTDIyLjkzOTYgMjIuNDQ1MkMyNC4zNTM1IDIxLjA0MjMgMjQuMzUzNSAxOC43NzY3IDIyLjkzOTYgMTcuMzczOEw2LjIwMiAwLjg2NDg3MUM0Ljc1NTIgLTAuMzU3MjEgMi41OTg1MiAtMC4yNzUwNDYgMS4yNTE2IDEuMDUzNDdDLTAuMDk1MzE4OCAyLjM4MTk5IC0wLjE3ODYyMyA0LjUwOTIxIDEuMDYwMzkgNS45MzYyNEwxNS4yMDkgMTkuOTI3NUwxLjA2MDM5IDMzLjg4MjdDLTAuMzUzNDYzIDM1LjI4NTYgLTAuMzUzNDYzIDM3LjU1MTIgMS4wNjAzOSAzOC45NTQxWlwiXG4gICAgfSk7XG5cbiAgICBjb25zdCBzcGxpZGVQb3B1cEJvdHRvbSA9IG5ldyBTcGxpZGUoXCIuSG90ZWxQYWdlX19QaG90b1NsaWRlci0tUG9wdXBCb3R0b21cIiwge1xuICAgICAgdHlwZTogXCJsb29wXCIsXG4gICAgICBhdXRvV2lkdGg6IHRydWUsXG4gICAgICBwZXJQYWdlOiAxLFxuICAgICAgcGVyTW92ZTogMSxcbiAgICAgIHBhZ2luYXRpb246IGZhbHNlLFxuICAgICAgbGF6eUxvYWQ6IFwibmVhcmJ5XCIsXG4gICAgICBwcmVsb2FkUGFnZXM6IDUsXG4gICAgICBkcmFnOiBmYWxzZSxcbiAgICAgIGFycm93czogZmFsc2UsXG4gICAgICB1cGRhdGVPbk1vdmU6IHRydWUsXG4gICAgICBhcnJvd1BhdGg6IFwiTTEuMDYwMzkgMzguOTU0MUMyLjQ4MjY3IDQwLjM0ODYgNC43Nzk3MiA0MC4zNDg2IDYuMjAyIDM4Ljk1NDFMMjIuOTM5NiAyMi40NDUyQzI0LjM1MzUgMjEuMDQyMyAyNC4zNTM1IDE4Ljc3NjcgMjIuOTM5NiAxNy4zNzM4TDYuMjAyIDAuODY0ODcxQzQuNzU1MiAtMC4zNTcyMSAyLjU5ODUyIC0wLjI3NTA0NiAxLjI1MTYgMS4wNTM0N0MtMC4wOTUzMTg4IDIuMzgxOTkgLTAuMTc4NjIzIDQuNTA5MjEgMS4wNjAzOSA1LjkzNjI0TDE1LjIwOSAxOS45Mjc1TDEuMDYwMzkgMzMuODgyN0MtMC4zNTM0NjMgMzUuMjg1NiAtMC4zNTM0NjMgMzcuNTUxMiAxLjA2MDM5IDM4Ljk1NDFaXCJcbiAgICB9KTtcblxuICAgIHNwbGlkZVBvcHVwQm90dG9tLnN5bmMoc3BsaWRlUG9wdXApO1xuXG4gICAgc3BsaWRlLm9uKFwiY2xpY2tcIiwgKCkgPT4ge1xuICAgICAgY29uc3QgbW9iaWxlV2lkdGhMaW1pdCA9IDc2OTtcblxuICAgICAgaWYgKHdpbmRvdy5pbm5lcldpZHRoID49IG1vYmlsZVdpZHRoTGltaXQpIHtcbiAgICAgICAgc3BsaWRlUG9wdXAuZ28oc3BsaWRlLmluZGV4KTtcbiAgICAgICAgc3BsaWRlUG9wdXBCb3R0b20uZ28oc3BsaWRlLmluZGV4KTtcbiAgICAgICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5Ib3RlbFBhZ2VfX1Bob3RvU2xpZGVyQ29udGFpbmVyXCIpLmNsYXNzTGlzdC5hZGQoXCJIb3RlbFBhZ2VfX1Bob3RvU2xpZGVyQ29udGFpbmVyLS1BY3RpdmVcIik7ICAgICAgXG4gICAgICB9XG4gICAgfSk7XG5cbiAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLkhvdGVsUGFnZV9fUGhvdG9TbGlkZXJTY3JlZW5Mb2NrXCIpLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XG4gICAgICBzcGxpZGUuZ28oc3BsaWRlUG9wdXAuaW5kZXgpO1xuICAgICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5Ib3RlbFBhZ2VfX1Bob3RvU2xpZGVyQ29udGFpbmVyXCIpLmNsYXNzTGlzdC5yZW1vdmUoXCJIb3RlbFBhZ2VfX1Bob3RvU2xpZGVyQ29udGFpbmVyLS1BY3RpdmVcIik7XG4gICAgfSk7XG5cbiAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLkhvdGVsUGFnZV9fUGhvdG9TbGlkZXJDbG9zZUJ1dHRvblwiKS5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xuICAgICAgc3BsaWRlLmdvKHNwbGlkZVBvcHVwLmluZGV4KTtcbiAgICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuSG90ZWxQYWdlX19QaG90b1NsaWRlckNvbnRhaW5lclwiKS5jbGFzc0xpc3QucmVtb3ZlKFwiSG90ZWxQYWdlX19QaG90b1NsaWRlckNvbnRhaW5lci0tQWN0aXZlXCIpO1xuICAgIH0pO1xuXG4gICAgc3BsaWRlLm1vdW50KCk7XG4gICAgc3BsaWRlUG9wdXAubW91bnQoKTtcbiAgICBzcGxpZGVQb3B1cEJvdHRvbS5tb3VudCgpO1xuXG4gICAgc3BsaWRlUG9wdXAub24oXCJtb3ZlXCIsICgpID0+IHtcbiAgICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuSG90ZWxQYWdlX19QaG90b1NsaWRlclBvcHVwQ291bnRlclwiKS5pbm5lckhUTUwgPSBgJHsgc3BsaWRlUG9wdXAuaW5kZXggKyAxIH0vJHsgc3BsaWRlUG9wdXAubGVuZ3RoIH1gO1xuICAgIH0pO1xuICB9XG59KTtcbiIsImRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJET01Db250ZW50TG9hZGVkXCIsICgpID0+IHtcbiAgY29uc3Qgc2xpZGVyRWxlbWVudFF1ZXJ5ID0gXCIuTW9iaWxlV2l0aFlvdV9fU3BsaWRlUm9vdFwiO1xuXG4gIGlmIChkb2N1bWVudC5xdWVyeVNlbGVjdG9yKHNsaWRlckVsZW1lbnRRdWVyeSkpIHtcbiAgICBuZXcgU3BsaWRlKHNsaWRlckVsZW1lbnRRdWVyeSwge1xuICAgICAgdHlwZTogXCJsb29wXCIsXG4gICAgICBwYWdpbmF0aW9uOiBmYWxzZVxuICAgIH0pLm1vdW50KCk7XG4gIH1cbn0pO1xuIiwiKCgpID0+IHtcbiAgY29uc3QgdGVsZWdyYW0gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLlRlbGVncmFtRm9ybVwiKTtcbiAgY29uc3QgdGVsZWdyYW1UcmlnZ2VycyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoXCIuVGVsZWdyYW1fX1RyaWdnZXJcIik7XG4gIGNvbnN0IHRlbGVncmFtU2NyZWVubG9jayA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuVGVsZWdyYW1Gb3JtX19TY3JlZW5sb2NrXCIpO1xuICBjb25zdCB0ZWxlZ3JhbUNsb3NlVHJpZ2dlciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuVGVsZWdyYW1Gb3JtX19DbG9zZVRyaWdnZXJcIik7XG5cbiAgY29uc3QgdGVsZWdyYW1BY3RpdmVDbGFzcyA9IFwiVGVsZWdyYW1Gb3JtLS1BY3RpdmVcIjtcblxuICBpZiAoIXRlbGVncmFtIHx8ICF0ZWxlZ3JhbVRyaWdnZXJzIHx8ICF0ZWxlZ3JhbVNjcmVlbmxvY2sgfHwgIXRlbGVncmFtQ2xvc2VUcmlnZ2VyKSB7XG4gICAgcmV0dXJuO1xuICB9XG5cbiAgdGVsZWdyYW1UcmlnZ2Vycy5mb3JFYWNoKHRlbGVncmFtVHJpZ2dlciA9PiB7XG4gICAgdGVsZWdyYW1UcmlnZ2VyLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XG4gICAgICB0ZWxlZ3JhbS5jbGFzc0xpc3QuYWRkKHRlbGVncmFtQWN0aXZlQ2xhc3MpO1xuICAgIH0pO1xuICB9KTtcblxuICB0ZWxlZ3JhbVNjcmVlbmxvY2suYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcbiAgICB0ZWxlZ3JhbS5jbGFzc0xpc3QucmVtb3ZlKHRlbGVncmFtQWN0aXZlQ2xhc3MpO1xuICB9KTtcblxuICB0ZWxlZ3JhbUNsb3NlVHJpZ2dlci5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xuICAgIHRlbGVncmFtLmNsYXNzTGlzdC5yZW1vdmUodGVsZWdyYW1BY3RpdmVDbGFzcyk7XG4gIH0pO1xufSkoKTtcbiJdfQ==
