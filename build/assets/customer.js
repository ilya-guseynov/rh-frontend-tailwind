"use strict";function _defineProperty(e,t,o){return t in e?Object.defineProperty(e,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[t]=o,e}!function(){var e="b2c-menu--to-right",t=document.querySelector(".b2c-menu"),o=document.querySelector(".b2c-menu__content"),n=document.querySelector(".b2c-menu__trigger");(t||o||n)&&(o.style.animation="none",n.addEventListener("click",function(){o.style.animation="",t.classList.toggle("b2c-menu--active")}),window.addEventListener("scroll",function(){0<window.scrollY-232?t.classList.add(e):t.classList.remove(e)}))}(),function(){var e=document.querySelectorAll(".Bron__SwitchButton"),o=document.querySelectorAll(".Bron__Content");e&&o&&(e.forEach(function(t){t.addEventListener("click",function(){e.forEach(function(e){e.classList.remove("Bron__SwitchButton--Active")}),t.classList.add("Bron__SwitchButton--Active"),o.forEach(function(e){e.classList.remove("Bron__Content--Active"),e.getAttribute("bron-content")===t.getAttribute("bron-switch-trigger")&&e.classList.add("Bron__Content--Active")})})}),e[0]&&e[0].click())}(),function(){function e(e){return"[".concat(e,"]")}function o(e){e.style.display="none"}function n(e){e.style.display="block"}var r="rh-country-data-section",c="rh-country-data-trigger",i="rh-country-data",a="rh-country-data-title",l="CountryPage__TabLink--Active",d=document.querySelectorAll(e(i)),u=document.querySelectorAll(e(r)),t=document.querySelectorAll(e(c)),s=document.querySelectorAll(e(a));d.forEach(o),u.forEach(o),t.forEach(function(t){t.addEventListener("click",function(){var e;d.forEach(o),u.forEach(o),s.forEach(function(e){return e.classList.remove(l)}),n(document.querySelector((e=t.getAttribute(c),"[".concat(i,' = "').concat(e,'"]')))),n(document.querySelector((e=t.getAttribute("rh-country-data-section-trigger"),"[".concat(r,' = "').concat(e,'"]')))),document.querySelectorAll((e=t.getAttribute(c),"[".concat(a,' = "').concat(e,'"]'))).forEach(function(e){return e.classList.add(l)})})}),n(d[0]),n(u[0]),s[0].classList.add(l)}(),function(){var t=document.querySelector(".Feedback"),e=document.querySelectorAll(".Feedback__Trigger"),o=document.querySelector(".Feedback__Screenlock"),n=document.querySelector(".Feedback__CloseTrigger"),r="Feedback--Active";t&&e&&o&&n&&(e.forEach(function(e){e.addEventListener("click",function(){t.classList.add(r)})}),o.addEventListener("click",function(){t.classList.remove(r)}),n.addEventListener("click",function(){t.classList.remove(r)}))}(),function(){function e(e){return"[".concat(e,"]")}function o(e){e.style.display="none"}var n="hotel-tab-trigger-index",r="hotel-data",c="HotelPage__TabLink--Active",i=!1,a=document.querySelectorAll(e(r)),l=document.querySelectorAll(e(n)),d=l.length,u=document.querySelector(".HotelPage__TabsProgressBarInner");a.forEach(o),l.forEach(function(t){t.addEventListener("click",function(){var e;a.forEach(o),l.forEach(function(e){e.classList.remove(c)}),t.classList.add(c),u.style="\n        left: ".concat((+t.getAttribute(n)-1)/d*100,"%;\n        width: ").concat(1/d*100,"%;\n      "),document.querySelector((e=t.getAttribute(n),"[".concat(r,' = "').concat(e,'"]'))).style.display="block","6"!==t.getAttribute(n)||i||(i=!0,setTimeout(function(){document.querySelectorAll(".HotelPage__Nomer").forEach(function(e){var t=new Splide(e.querySelector(".HotelPage__NomerPhotoSlider"),{type:"loop",autoplay:!0,perPage:3,perMove:1,direction:"ttb",height:"675px",pagination:!1,lazyLoad:"nearby",preloadPages:3,arrowPath:"M2.0162 39.9541C3.37923 41.3486 5.58056 41.3486 6.94359 39.9541L22.9838 23.4452C24.3387 22.0423 24.3387 19.7767 22.9838 18.3738L6.94359 1.86487C5.55707 0.64279 3.49025 0.724954 2.19945 2.05347C0.908654 3.38199 0.828821 5.50921 2.0162 6.93624L15.5752 20.9275L2.0162 34.8827C0.661266 36.2856 0.661266 38.5512 2.0162 39.9541Z"}).mount();new Splide(e.querySelector(".HotelPage__NomerMobilePhotoSlider"),{type:"loop",autoplay:!0,perPage:1,perMove:1,pagination:!1,lazyLoad:"nearby",preloadPages:3,gap:"2em",arrowPath:"M1.06039 38.9541C2.48267 40.3486 4.77972 40.3486 6.202 38.9541L22.9396 22.4452C24.3535 21.0423 24.3535 18.7767 22.9396 17.3738L6.202 0.864871C4.7552 -0.35721 2.59852 -0.275046 1.2516 1.05347C-0.0953188 2.38199 -0.178623 4.50921 1.06039 5.93624L15.209 19.9275L1.06039 33.8827C-0.353463 35.2856 -0.353463 37.5512 1.06039 38.9541Z"}).mount();new Splide(e.querySelector(".HotelPage__NomerPopupPhotoSlider--Desktop"),{type:"loop",autoplay:!0,perPage:1,perMove:1,pagination:!1,lazyLoad:"nearby",preloadPages:3,arrowPath:"M1.06039 38.9541C2.48267 40.3486 4.77972 40.3486 6.202 38.9541L22.9396 22.4452C24.3535 21.0423 24.3535 18.7767 22.9396 17.3738L6.202 0.864871C4.7552 -0.35721 2.59852 -0.275046 1.2516 1.05347C-0.0953188 2.38199 -0.178623 4.50921 1.06039 5.93624L15.209 19.9275L1.06039 33.8827C-0.353463 35.2856 -0.353463 37.5512 1.06039 38.9541Z"}).sync(t).mount(),t.on("click",function(){e.querySelector(".HotelPage__NomerPopupPhotoSliderContainer").classList.add("HotelPage__NomerPopupPhotoSliderContainer--ActiveDesktop")}),e.querySelector(".HotelPage__NomerPopupScreenlock").addEventListener("click",function(){e.querySelector(".HotelPage__NomerPopupPhotoSliderContainer").classList.remove("HotelPage__NomerPopupPhotoSliderContainer--ActiveMobile","HotelPage__NomerPopupPhotoSliderContainer--ActiveDesktop")})})},100))})}),document.querySelector("[hotel-tab-trigger-index='1']")&&document.querySelector("[hotel-tab-trigger-index='1']").click()}(),function(){var e,t=document.querySelector(".mobile-sidebar"),o=document.querySelector(".mobile-sidebar-trigger"),n=document.querySelector(".mobile-sidebar__close-trigger"),r=document.querySelector(".mobile-sidebar__screenlock"),c=document.querySelectorAll(".mobile-sidebar__item"),i="mobile-sidebar--active";t&&o&&n&&r&&0!==c.length&&(e=function(){document.body.style.overflow="auto",t.classList.remove(i)},c.forEach(function(e){var t=e.querySelector(".mobile-sidebar__submenu-trigger"),o=e.querySelector(".mobile-sidebar__submenu");t.addEventListener("click",function(){document.querySelectorAll(".mobile-sidebar__submenu").forEach(function(e){e!==o&&e.classList.remove("mobile-sidebar__submenu--active")}),o.classList.toggle("mobile-sidebar__submenu--active")})}),window.addEventListener("resize",function(){769<=window.innerWidth&&e()}),o.addEventListener("click",function(){document.body.style.overflow="hidden",t.classList.add(i)}),n.addEventListener("click",e),r.addEventListener("click",e))}(),function(){var e,t=document.querySelector(".MobileSidebar"),o=document.querySelector(".mobile-sidebar-trigger"),n=document.querySelector(".MobileSidebar__CloseTrigger"),r=document.querySelector(".MobileSidebar__ScreenLock"),c=document.querySelectorAll(".MobileSidebar__SecondContentItem"),i="MobileSidebar--Active";t&&o&&n&&r&&0!==c.length&&(e=function(){document.body.style.overflow="auto",t.classList.remove(i)},c.forEach(function(e){var t=e.querySelector(".MobileSidebar__SecondContentSubmenuTrigger"),o=e.querySelector(".MobileSidebar__SecondContentSubmenu");t.addEventListener("click",function(){document.querySelectorAll(".MobileSidebar__SecondContentSubmenu").forEach(function(e){e!==o&&e.classList.remove("MobileSidebar__SecondContentSubmenu--Active")}),o.classList.toggle("MobileSidebar__SecondContentSubmenu--Active")})}),window.addEventListener("resize",function(){769<=window.innerWidth&&e()}),o.addEventListener("click",function(){document.body.style.overflow="hidden",t.classList.add(i)}),n.addEventListener("click",e),r.addEventListener("click",e))}(),function(){var e=document.querySelectorAll(".rh-accordion");e&&e.forEach(function(e){e.querySelector(".rh-accordion__trigger").addEventListener("click",function(){e.classList.toggle("rh-accordion--active")})})}(),function(){var e=document.querySelectorAll(".RHAccordion");e&&e.forEach(function(e){e.querySelector(".RHAccordion__Trigger").addEventListener("click",function(){e.classList.toggle("RHAccordion--Active")})})}(),function(){var e,t,o=document.querySelector(".search-form-switch__button_tour"),n=document.querySelector(".search-form-switch__button_hotel"),r=document.querySelector(".search-form-switch__form_tour"),c=document.querySelector(".search-form-switch__form_hotel");o&&n&&r&&c&&(e="search-form-switch__button--active",t="search-form-switch__form--active",o.addEventListener("click",function(){o.classList.add(e),r.classList.add(t),n.classList.remove(e),c.classList.remove(t)}),n.addEventListener("click",function(){n.classList.add(e),c.classList.add(t),o.classList.remove(e),r.classList.remove(t)}))}(),document.addEventListener("DOMContentLoaded",function(){var e=".CountryPage__TabsContainer--Scroll";document.querySelector(e)&&new Splide(e,{autoplay:!1,arrows:!1,pagination:!1,autoWidth:!0}).mount()}),document.addEventListener("DOMContentLoaded",function(){var e=".HotelPage__TabsContainer--Scroll";document.querySelector(e)&&new Splide(e,{autoplay:!1,arrows:!1,perMove:1,pagination:!1,autoWidth:!0}).mount()}),document.addEventListener("DOMContentLoaded",function(){var e,t,o,n;document.querySelector(".HotelPage__PhotoSlider--Base")&&(t=new Splide(".HotelPage__PhotoSlider--Base",(_defineProperty(e={type:"loop",autoWidth:!0,perPage:5,perMove:1,pagination:!1,lazyLoad:"nearby",preloadPages:5},"preloadPages",5),_defineProperty(e,"arrowPath","M1.06039 38.9541C2.48267 40.3486 4.77972 40.3486 6.202 38.9541L22.9396 22.4452C24.3535 21.0423 24.3535 18.7767 22.9396 17.3738L6.202 0.864871C4.7552 -0.35721 2.59852 -0.275046 1.2516 1.05347C-0.0953188 2.38199 -0.178623 4.50921 1.06039 5.93624L15.209 19.9275L1.06039 33.8827C-0.353463 35.2856 -0.353463 37.5512 1.06039 38.9541Z"),e)),o=new Splide(".HotelPage__PhotoSlider--Popup",{type:"loop",autoWidth:!0,perPage:1,perMove:1,pagination:!1,lazyLoad:"nearby",preloadPages:5,arrowPath:"M1.06039 38.9541C2.48267 40.3486 4.77972 40.3486 6.202 38.9541L22.9396 22.4452C24.3535 21.0423 24.3535 18.7767 22.9396 17.3738L6.202 0.864871C4.7552 -0.35721 2.59852 -0.275046 1.2516 1.05347C-0.0953188 2.38199 -0.178623 4.50921 1.06039 5.93624L15.209 19.9275L1.06039 33.8827C-0.353463 35.2856 -0.353463 37.5512 1.06039 38.9541Z"}),(n=new Splide(".HotelPage__PhotoSlider--PopupBottom",{type:"loop",autoWidth:!0,perPage:1,perMove:1,pagination:!1,lazyLoad:"nearby",preloadPages:5,drag:!1,arrows:!1,updateOnMove:!0,arrowPath:"M1.06039 38.9541C2.48267 40.3486 4.77972 40.3486 6.202 38.9541L22.9396 22.4452C24.3535 21.0423 24.3535 18.7767 22.9396 17.3738L6.202 0.864871C4.7552 -0.35721 2.59852 -0.275046 1.2516 1.05347C-0.0953188 2.38199 -0.178623 4.50921 1.06039 5.93624L15.209 19.9275L1.06039 33.8827C-0.353463 35.2856 -0.353463 37.5512 1.06039 38.9541Z"})).sync(o),t.on("click",function(){769<=window.innerWidth&&(o.go(t.index),n.go(t.index),document.querySelector(".HotelPage__PhotoSliderContainer").classList.add("HotelPage__PhotoSliderContainer--Active"))}),document.querySelector(".HotelPage__PhotoSliderScreenLock").addEventListener("click",function(){t.go(o.index),document.querySelector(".HotelPage__PhotoSliderContainer").classList.remove("HotelPage__PhotoSliderContainer--Active")}),document.querySelector(".HotelPage__PhotoSliderCloseButton").addEventListener("click",function(){t.go(o.index),document.querySelector(".HotelPage__PhotoSliderContainer").classList.remove("HotelPage__PhotoSliderContainer--Active")}),t.mount(),o.mount(),n.mount(),o.on("move",function(){document.querySelector(".HotelPage__PhotoSliderPopupCounter").innerHTML="".concat(o.index+1,"/").concat(o.length)}))}),document.addEventListener("DOMContentLoaded",function(){var e=".MobileWithYou__SplideRoot";document.querySelector(e)&&new Splide(e,{type:"loop",pagination:!1}).mount()}),function(){var t=document.querySelector(".TelegramForm"),e=document.querySelectorAll(".Telegram__Trigger"),o=document.querySelector(".TelegramForm__Screenlock"),n=document.querySelector(".TelegramForm__CloseTrigger"),r="TelegramForm--Active";t&&e&&o&&n&&(e.forEach(function(e){e.addEventListener("click",function(){t.classList.add(r)})}),o.addEventListener("click",function(){t.classList.remove(r)}),n.addEventListener("click",function(){t.classList.remove(r)}))}();
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImIyYy1tZW51LmpzIiwiYnJvbi1zd2l0Y2guanMiLCJjb3VudHJ5LWluZm8taGFuZGxlci5qcyIsImZlZWRiYWNrLmpzIiwiaG90ZWwtdGFicy5qcyIsIm1vYmlsZS1zaWRlYmFyLmpzIiwicmgtYWNjb3JkaW9uLmpzIiwic2VhcmNoLWZyb20tc3dpdGNoLmpzIiwic3BsaWRlLWluaXQtY291bnRyeS1wYWdlLXRhYnMuanMiLCJzcGxpZGUtaW5pdC1ob3RlbC1wYWdlLXRhYnMuanMiLCJzcGxpZGUtaW5pdC1waG90by1zbGlkZXIuanMiLCJzcGxpZGUtaW5pdC13aXRoLXlvdS5qcyIsInRlbGVncmFtLWZvcm0tYjJiLmpzIl0sIm5hbWVzIjpbImIyY01lbnVUb1JpZ2h0Q2xhc3MiLCJiMmNNZW51RWxlbWVudCIsImRvY3VtZW50IiwicXVlcnlTZWxlY3RvciIsImIyY01lbnVDb250ZW50RWxlbWVudCIsImIyY1RyaWdnZXJFbGVtZW50Iiwic3R5bGUiLCJhbmltYXRpb24iLCJhZGRFdmVudExpc3RlbmVyIiwiY2xhc3NMaXN0IiwidG9nZ2xlIiwid2luZG93Iiwic2Nyb2xsWSIsImFkZCIsInJlbW92ZSIsImJyb25Td3RpY2hUcmlnZ2VyQnV0dG9ucyIsInF1ZXJ5U2VsZWN0b3JBbGwiLCJicm9uQ29udGVudEJsb2NrcyIsImZvckVhY2giLCJidXR0b24iLCJidXR0b25Ub1JlbW92ZUFjdGl2ZVN0YXR1cyIsImJyb25Db250ZW50QmxvY2siLCJnZXRBdHRyaWJ1dGUiLCJjbGljayIsImF0dHJpYnV0ZU5hbWVUb1F1ZXJ5IiwiYXR0cmlidXRlTmFtZSIsImNvbmNhdCIsImhpZGVFbGVtZW50IiwiZWxlbWVudCIsImRpc3BsYXkiLCJzaG93RWxlbWVudCIsImRhdGFTZWN0aW9uQXR0cmlidXRlTmFtZSIsImRhdGFUcmlnZ2VyQXR0cmlidXRlTmFtZSIsImRhdGFBdHRyaWJ1dGVOYW1lIiwiZGF0YVRpdGxlQXR0cmlidXRlTmFtZSIsImdvbGRCZ0NsYXNzIiwiZGF0YXMiLCJkYXRhU2VjdGlvbnMiLCJkYXRhVHJpZ2dlcnMiLCJkYXRhVGl0bGVzIiwiZGF0YVRyaWdnZXIiLCJpZCIsImRhdGFUaXRsZSIsImZlZWRiYWNrIiwiZmVlZGJhY2tUcmlnZ2VycyIsImZlZWRiYWNrU2NyZWVubG9jayIsImZlZWRiYWNrQ2xvc2VUcmlnZ2VyIiwiZmVlZGJhY2tBY3RpdmVDbGFzcyIsImZlZWRiYWNrVHJpZ2dlciIsImhvdGVsUGhvdG9zSW5pdGVkIiwiZGF0YUNvdW50IiwibGVuZ3RoIiwicHJvZ3Jlc3NCYXIiLCJkYXRhVHJpZ2dlcjIiLCJzZXRUaW1lb3V0Iiwibm9tZXIiLCJzcGxpZGVEZXNrdG9wIiwiU3BsaWRlIiwidHlwZSIsImF1dG9wbGF5IiwicGVyUGFnZSIsInBlck1vdmUiLCJkaXJlY3Rpb24iLCJoZWlnaHQiLCJwYWdpbmF0aW9uIiwibGF6eUxvYWQiLCJwcmVsb2FkUGFnZXMiLCJhcnJvd1BhdGgiLCJtb3VudCIsImdhcCIsInN5bmMiLCJvbiIsImNsb3NlU2lkZWJhciIsIm1vYmlsZVNpZGViYXJFbGVtZW50IiwibW9iaWxlU2lkZWJhclRyaWdnZXJFbGVtZW50IiwibW9iaWxlU2lkZWJhckNsb3NlVHJpZ2dlckVsZW1lbnQiLCJtb2JpbGVTaWRlYmFyU2NyZWVubG9ja0VsZW1lbnQiLCJtb2JpbGVTaWRlYmFySXRlbUVsZW1lbnRzIiwibW9iaWxlU2lkZWJhckFjdGl2ZUNsYXNzIiwiYm9keSIsIm92ZXJmbG93IiwibW9iaWxlU2lkZWJhckl0ZW1FbGVtZW50IiwidHJpZ2dlciIsInN1Ym1lbnUiLCJzdWJtZW51RWFjaCIsImlubmVyV2lkdGgiLCJhY2NvcmRpb25FbGVtZW50cyIsImFjY29yZGlvbiIsImJ1dHRvbkFjdGl2ZUNsYXNzIiwiZm9ybUFjdGl2ZUNsYXNzIiwidG91clNlYXJjaEJ1dHRvbkVsZW1lbnQiLCJob3RlbFNlYXJjaEJ1dHRvbkVsZW1lbnQiLCJ0b3VyU2VhcmNoRm9ybUVsZW1lbnQiLCJob3RlbFNlYXJjaEZvcm1FbGVtZW50Iiwic2xpZGVyRWxlbWVudFF1ZXJ5IiwiYXJyb3dzIiwiYXV0b1dpZHRoIiwiX1NwbGlkZSIsInNwbGlkZSIsInNwbGlkZVBvcHVwIiwic3BsaWRlUG9wdXBCb3R0b20iLCJfZGVmaW5lUHJvcGVydHkiLCJkcmFnIiwidXBkYXRlT25Nb3ZlIiwiZ28iLCJpbmRleCIsImlubmVySFRNTCIsInRlbGVncmFtIiwidGVsZWdyYW1UcmlnZ2VycyIsInRlbGVncmFtU2NyZWVubG9jayIsInRlbGVncmFtQ2xvc2VUcmlnZ2VyIiwidGVsZWdyYW1BY3RpdmVDbGFzcyIsInRlbGVncmFtVHJpZ2dlciJdLCJtYXBwaW5ncyI6Im9KQUFBLFdBQ0EsSUFLQUEsRUFBQSxxQkFFQUMsRUFBQUMsU0FBQUMsY0FQQSxhQVFBQyxFQUFBRixTQUFBQyxjQVBBLHNCQVFBRSxFQUFBSCxTQUFBQyxjQVBBLHVCQVNBRixHQUFBRyxHQUFBQyxLQUlBRCxFQUFBRSxNQUFBQyxVQUFBLE9BZUFGLEVBQUFHLGlCQUFBLFFBTEEsV0FDQUosRUFBQUUsTUFBQUMsVUFBQSxHQUNBTixFQUFBUSxVQUFBQyxPQXZCQSxzQkEyQkFDLE9BQUFILGlCQUFBLFNBZEEsV0FDQSxFQUFBRyxPQUFBQyxRQUFBLElBQ0FYLEVBQUFRLFVBQUFJLElBQUFiLEdBRUFDLEVBQUFRLFVBQUFLLE9BQUFkLE1BdEJBLEdDQUEsV0FDQSxJQUFBZSxFQUFBYixTQUFBYyxpQkFBQSx1QkFDQUMsRUFBQWYsU0FBQWMsaUJBQUEsa0JBRUFELEdBQUFFLElBSUFGLEVBQUFHLFFBQUEsU0FBQUMsR0FDQUEsRUFBQVgsaUJBQUEsUUFBQSxXQUNBTyxFQUFBRyxRQUFBLFNBQUFFLEdBQ0FBLEVBQUFYLFVBQUFLLE9BQUEsZ0NBR0FLLEVBQUFWLFVBQUFJLElBQUEsOEJBRUFJLEVBQUFDLFFBQUEsU0FBQUcsR0FDQUEsRUFBQVosVUFBQUssT0FBQSx5QkFDQU8sRUFBQUMsYUFBQSxrQkFBQUgsRUFBQUcsYUFBQSx3QkFDQUQsRUFBQVosVUFBQUksSUFBQSwrQkFNQUUsRUFB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QUEsV0FDQW1HLEVBQUFsRyxVQUFBSSxJQUFBa0csT0FJQUYsRUFBQXJHLGlCQUFBLFFBQUEsV0FDQW1HLEVBQUFsRyxVQUFBSyxPQUFBaUcsS0FHQUQsRUFBQXRHLGlCQUFBLFFBQUEsV0FDQW1HLEVBQUFsRyxVQUFBSyxPQUFBaUcsTUF2QkEiLCJmaWxlIjoiY3VzdG9tZXIuanMiLCJzb3VyY2VzQ29udGVudCI6WyIoKCkgPT4ge1xyXG4gIGNvbnN0IGIyY01lbnVRdWVyeSA9IFwiLmIyYy1tZW51XCI7XHJcbiAgY29uc3QgYjJjTWVudUNvbnRlbnRRdWVyeSA9IFwiLmIyYy1tZW51X19jb250ZW50XCI7XHJcbiAgY29uc3QgYjJjVHJpZ2dlclF1ZXJ5ID0gXCIuYjJjLW1lbnVfX3RyaWdnZXJcIjtcclxuXHJcbiAgY29uc3QgYjJjTWVudUFjdGl2ZUNsYXNzID0gXCJiMmMtbWVudS0tYWN0aXZlXCI7XHJcbiAgY29uc3QgYjJjTWVudVRvUmlnaHRDbGFzcyA9IFwiYjJjLW1lbnUtLXRvLXJpZ2h0XCI7XHJcblxyXG4gIGNvbnN0IGIyY01lbnVFbGVtZW50ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihiMmNNZW51UXVlcnkpO1xyXG4gIGNvbnN0IGIyY01lbnVDb250ZW50RWxlbWVudCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoYjJjTWVudUNvbnRlbnRRdWVyeSk7XHJcbiAgY29uc3QgYjJjVHJpZ2dlckVsZW1lbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGIyY1RyaWdnZXJRdWVyeSk7XHJcblxyXG4gIGlmICghYjJjTWVudUVsZW1lbnQgJiYgIWIyY01lbnVDb250ZW50RWxlbWVudCAmJiAhYjJjVHJpZ2dlckVsZW1lbnQpIHtcclxuICAgIHJldHVybjtcclxuICB9XHJcblxyXG4gIGIyY01lbnVDb250ZW50RWxlbWVudC5zdHlsZS5hbmltYXRpb24gPSBcIm5vbmVcIjtcclxuICBcclxuICBjb25zdCBoYW5kbGVTY3JvbGwgPSAoKSA9PiB7XHJcbiAgICBpZiAod2luZG93LnNjcm9sbFkgLSAyMzIgPiAwKSB7XHJcbiAgICAgIGIyY01lbnVFbGVtZW50LmNsYXNzTGlzdC5hZGQoYjJjTWVudVRvUmlnaHRDbGFzcyk7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICBiMmNNZW51RWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKGIyY01lbnVUb1JpZ2h0Q2xhc3MpO1xyXG4gICAgfVxyXG4gIH07XHJcblxyXG4gIGNvbnN0IHRvZ2dsZU1lbnUgPSAoKSA9PiB7XHJcbiAgICBiMmNNZW51Q29udGVudEVsZW1lbnQuc3R5bGUuYW5pbWF0aW9uID0gXCJcIjtcclxuICAgIGIyY01lbnVFbGVtZW50LmNsYXNzTGlzdC50b2dnbGUoYjJjTWVudUFjdGl2ZUNsYXNzKTtcclxuICB9O1xyXG5cclxuICBiMmNUcmlnZ2VyRWxlbWVudC5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgdG9nZ2xlTWVudSk7XHJcbiAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoXCJzY3JvbGxcIiwgaGFuZGxlU2Nyb2xsKTtcclxufSkoKTsiLCIoKCkgPT4ge1xuICBjb25zdCBicm9uU3d0aWNoVHJpZ2dlckJ1dHRvbnMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKFwiLkJyb25fX1N3aXRjaEJ1dHRvblwiKTtcbiAgY29uc3QgYnJvbkNvbnRlbnRCbG9ja3MgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKFwiLkJyb25fX0NvbnRlbnRcIik7XG5cbiAgaWYgKCFicm9uU3d0aWNoVHJpZ2dlckJ1dHRvbnMgfHwgIWJyb25Db250ZW50QmxvY2tzKSB7XG4gICAgcmV0dXJuO1xuICB9XG5cbiAgYnJvblN3dGljaFRyaWdnZXJCdXR0b25zLmZvckVhY2goYnV0dG9uID0+IHtcbiAgICBidXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcbiAgICAgIGJyb25Td3RpY2hUcmlnZ2VyQnV0dG9ucy5mb3JFYWNoKGJ1dHRvblRvUmVtb3ZlQWN0aXZlU3RhdHVzID0+IHtcbiAgICAgICAgYnV0dG9uVG9SZW1vdmVBY3RpdmVTdGF0dXMuY2xhc3NMaXN0LnJlbW92ZShcIkJyb25fX1N3aXRjaEJ1dHRvbi0tQWN0aXZlXCIpO1xuICAgICAgfSk7XG5cbiAgICAgIGJ1dHRvbi5jbGFzc0xpc3QuYWRkKFwiQnJvbl9fU3dpdGNoQnV0dG9uLS1BY3RpdmVcIik7XG5cbiAgICAgIGJyb25Db250ZW50QmxvY2tzLmZvckVhY2goYnJvbkNvbnRlbnRCbG9jayA9PiB7XG4gICAgICAgIGJyb25Db250ZW50QmxvY2suY2xhc3NMaXN0LnJlbW92ZShcIkJyb25fX0NvbnRlbnQtLUFjdGl2ZVwiKTtcbiAgICAgICAgaWYgKGJyb25Db250ZW50QmxvY2suZ2V0QXR0cmlidXRlKFwiYnJvbi1jb250ZW50XCIpID09PSBidXR0b24uZ2V0QXR0cmlidXRlKFwiYnJvbi1zd2l0Y2gtdHJpZ2dlclwiKSkge1xuICAgICAgICAgIGJyb25Db250ZW50QmxvY2suY2xhc3NMaXN0LmFkZChcIkJyb25fX0NvbnRlbnQtLUFjdGl2ZVwiKTtcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgfSk7XG4gIH0pO1xuXG4gIGlmIChicm9uU3d0aWNoVHJpZ2dlckJ1dHRvbnNbMF0pIHtcbiAgICBicm9uU3d0aWNoVHJpZ2dlckJ1dHRvbnNbMF0uY2xpY2soKTtcbiAgfVxufSkoKTsiLCIoKCkgPT4ge1xyXG4gIGNvbnN0IGRhdGFTZWN0aW9uVHJpZ2dlckF0dHJpYnV0ZU5hbWUgPSBcInJoLWNvdW50cnktZGF0YS1zZWN0aW9uLXRyaWdnZXJcIjtcclxuICBjb25zdCBkYXRhU2VjdGlvbkF0dHJpYnV0ZU5hbWUgPSBcInJoLWNvdW50cnktZGF0YS1zZWN0aW9uXCI7XHJcbiAgY29uc3QgZGF0YVRyaWdnZXJBdHRyaWJ1dGVOYW1lID0gXCJyaC1jb3VudHJ5LWRhdGEtdHJpZ2dlclwiO1xyXG4gIGNvbnN0IGRhdGFBdHRyaWJ1dGVOYW1lID0gXCJyaC1jb3VudHJ5LWRhdGFcIjtcclxuICBjb25zdCBkYXRhVGl0bGVBdHRyaWJ1dGVOYW1lID0gXCJyaC1jb3VudHJ5LWRhdGEtdGl0bGVcIjtcclxuICBjb25zdCBnb2xkQmdDbGFzcyA9IFwiQ291bnRyeVBhZ2VfX1RhYkxpbmstLUFjdGl2ZVwiO1xyXG5cclxuICAvKipcclxuICAgKiBAcGFyYW0ge3N0cmluZ30gYXR0cmlidXRlTmFtZVxyXG4gICAqIEByZXR1cm5zICB7c3RyaW5nfVxyXG4gICAqL1xyXG4gIGNvbnN0IGF0dHJpYnV0ZU5hbWVUb1F1ZXJ5ID0gYXR0cmlidXRlTmFtZSA9PiBgWyR7YXR0cmlidXRlTmFtZX1dYDtcclxuXHJcbiAgLyoqXHJcbiAgICogQHBhcmFtIHtzdHJpbmcgfCBudW1iZXJ9IGlkXHJcbiAgICogQHJldHVybnMge3ZvaWR9XHJcbiAgICovXHJcbiAgIGNvbnN0IGNyZWF0ZVF1ZXJ5Rm9yRGF0YUJ5SWQgPSBpZCA9PiBgWyR7ZGF0YUF0dHJpYnV0ZU5hbWV9ID0gXCIke2lkfVwiXWA7XHJcblxyXG4gIC8qKlxyXG4gICAqIEBwYXJhbSB7c3RyaW5nIHwgbnVtYmVyfSBpZFxyXG4gICAqIEByZXR1cm5zIHt2b2lkfVxyXG4gICAqL1xyXG4gIGNvbnN0IGNyZWF0ZVF1ZXJ5Rm9yRGF0YVNlY3Rpb25CeUlkID0gaWQgPT4gYFske2RhdGFTZWN0aW9uQXR0cmlidXRlTmFtZX0gPSBcIiR7aWR9XCJdYDtcclxuXHJcbiAgIC8qKlxyXG4gICAqIEBwYXJhbSB7c3RyaW5nIHwgbnVtYmVyfSBpZFxyXG4gICAqIEByZXR1cm5zIHt2b2lkfVxyXG4gICAqL1xyXG4gIGNvbnN0IGNyZWF0ZVF1ZXJ5Rm9yRGF0YVRpdGxlQnlJZCA9IGlkID0+IGBbJHtkYXRhVGl0bGVBdHRyaWJ1dGVOYW1lfSA9IFwiJHtpZH1cIl1gO1xyXG5cclxuICAvKipcclxuICAgKiBAcGFyYW0ge0hUTUxFbGVtZW50fSBlbGVtZW50XHJcbiAgICogQHJldHVybnMge3ZvaWR9IFxyXG4gICAqL1xyXG4gIGNvbnN0IGhpZGVFbGVtZW50ID0gZWxlbWVudCA9PiB7XHJcbiAgICBlbGVtZW50LnN0eWxlLmRpc3BsYXkgPSBcIm5vbmVcIjtcclxuICB9O1xyXG5cclxuICAvKipcclxuICAgKiBAcGFyYW0ge0hUTUxFbGVtZW50fSBlbGVtZW50XHJcbiAgICogQHJldHVybnMge3ZvaWR9IFxyXG4gICAqL1xyXG4gIGNvbnN0IHNob3dFbGVtZW50ID0gZWxlbWVudCA9PiB7XHJcbiAgICBlbGVtZW50LnN0eWxlLmRpc3BsYXkgPSBcImJsb2NrXCI7XHJcbiAgfTtcclxuXHJcbiAgY29uc3QgZGF0YXMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKGF0dHJpYnV0ZU5hbWVUb1F1ZXJ5KGRhdGFBdHRyaWJ1dGVOYW1lKSk7XHJcbiAgY29uc3QgZGF0YVNlY3Rpb25zID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChhdHRyaWJ1dGVOYW1lVG9RdWVyeShkYXRhU2VjdGlvbkF0dHJpYnV0ZU5hbWUpKTtcclxuICBjb25zdCBkYXRhVHJpZ2dlcnMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKGF0dHJpYnV0ZU5hbWVUb1F1ZXJ5KGRhdGFUcmlnZ2VyQXR0cmlidXRlTmFtZSkpO1xyXG4gIGNvbnN0IGRhdGFUaXRsZXMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKGF0dHJpYnV0ZU5hbWVUb1F1ZXJ5KGRhdGFUaXRsZUF0dHJpYnV0ZU5hbWUpKTtcclxuXHJcbiAgZGF0YXMuZm9yRWFjaChkYXRhID0+IGhpZGVFbGVtZW50KGRhdGEpKTtcclxuICBkYXRhU2VjdGlvbnMuZm9yRWFjaChkYXRhU2VjdGlvbiA9PiBoaWRlRWxlbWVudChkYXRhU2VjdGlvbikpO1xyXG5cclxuICBkYXRhVHJpZ2dlcnMuZm9yRWFjaChkYXRhVHJpZ2dlciA9PiB7XHJcbiAgICBkYXRhVHJpZ2dlci5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xyXG4gICAgICBkYXRhcy5mb3JFYWNoKGRhdGEgPT4gaGlkZUVsZW1lbnQoZGF0YSkpO1xyXG4gICAgICBkYXRhU2VjdGlvbnMuZm9yRWFjaChkYXRhU2VjdGlvbiA9PiBoaWRlRWxlbWVudChkYXRhU2VjdGlvbikpO1xyXG4gICAgICBkYXRhVGl0bGVzLmZvckVhY2goZGF0YVRpdGxlID0+IGRhdGFUaXRsZS5jbGFzc0xpc3QucmVtb3ZlKGdvbGRCZ0NsYXNzKSk7XHJcblxyXG4gICAgICBzaG93RWxlbWVudChcclxuICAgICAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFxyXG4gICAgICAgICAgY3JlYXRlUXVlcnlGb3JEYXRhQnlJZChkYXRhVHJpZ2dlci5nZXRBdHRyaWJ1dGUoZGF0YVRyaWdnZXJBdHRyaWJ1dGVOYW1lKSlcclxuICAgICAgICApXHJcbiAgICAgICk7XHJcbiAgICAgIHNob3dFbGVtZW50KFxyXG4gICAgICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoY3JlYXRlUXVlcnlGb3JEYXRhU2VjdGlvbkJ5SWQoXHJcbiAgICAgICAgICBkYXRhVHJpZ2dlci5nZXRBdHRyaWJ1dGUoZGF0YVNlY3Rpb25UcmlnZ2VyQXR0cmlidXRlTmFtZSlcclxuICAgICAgICApKVxyXG4gICAgICApO1xyXG4gICAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKGNyZWF0ZVF1ZXJ5Rm9yRGF0YVRpdGxlQnlJZChcclxuICAgICAgICBkYXRhVHJpZ2dlci5nZXRBdHRyaWJ1dGUoZGF0YVRyaWdnZXJBdHRyaWJ1dGVOYW1lKVxyXG4gICAgICApKS5mb3JFYWNoKGRhdGFUaXRsZSA9PiBkYXRhVGl0bGUuY2xhc3NMaXN0LmFkZChnb2xkQmdDbGFzcykpO1xyXG4gICAgfSk7XHJcbiAgfSk7XHJcblxyXG4gIHNob3dFbGVtZW50KGRhdGFzWzBdKTtcclxuICBzaG93RWxlbWVudChkYXRhU2VjdGlvbnNbMF0pO1xyXG4gIGRhdGFUaXRsZXNbMF0uY2xhc3NMaXN0LmFkZChnb2xkQmdDbGFzcyk7XHJcbn0pKCk7IiwiKCgpID0+IHtcbiAgY29uc3QgZmVlZGJhY2sgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLkZlZWRiYWNrXCIpO1xuICBjb25zdCBmZWVkYmFja1RyaWdnZXJzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChcIi5GZWVkYmFja19fVHJpZ2dlclwiKTtcbiAgY29uc3QgZmVlZGJhY2tTY3JlZW5sb2NrID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5GZWVkYmFja19fU2NyZWVubG9ja1wiKTtcbiAgY29uc3QgZmVlZGJhY2tDbG9zZVRyaWdnZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLkZlZWRiYWNrX19DbG9zZVRyaWdnZXJcIik7XG5cbiAgY29uc3QgZmVlZGJhY2tBY3RpdmVDbGFzcyA9IFwiRmVlZGJhY2stLUFjdGl2ZVwiO1xuXG4gIGlmICghZmVlZGJhY2sgfHwgIWZlZWRiYWNrVHJpZ2dlcnMgfHwgIWZlZWRiYWNrU2NyZWVubG9jayB8fCAhZmVlZGJhY2tDbG9zZVRyaWdnZXIpIHtcbiAgICByZXR1cm47XG4gIH1cblxuICBmZWVkYmFja1RyaWdnZXJzLmZvckVhY2goZmVlZGJhY2tUcmlnZ2VyID0+IHtcbiAgICBmZWVkYmFja1RyaWdnZXIuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcbiAgICAgIGZlZWRiYWNrLmNsYXNzTGlzdC5hZGQoZmVlZGJhY2tBY3RpdmVDbGFzcyk7XG4gICAgfSk7XG4gIH0pO1xuXG4gIGZlZWRiYWNrU2NyZWVubG9jay5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xuICAgIGZlZWRiYWNrLmNsYXNzTGlzdC5yZW1vdmUoZmVlZGJhY2tBY3RpdmVDbGFzcyk7XG4gIH0pO1xuXG4gIGZlZWRiYWNrQ2xvc2VUcmlnZ2VyLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XG4gICAgZmVlZGJhY2suY2xhc3NMaXN0LnJlbW92ZShmZWVkYmFja0FjdGl2ZUNsYXNzKTtcbiAgfSk7XG59KSgpO1xuIiwiKCgpID0+IHtcbiAgY29uc3QgZGF0YVRyaWdnZXJBdHRyaWJ1dGVOYW1lID0gXCJob3RlbC10YWItdHJpZ2dlci1pbmRleFwiO1xuICBjb25zdCBkYXRhQXR0cmlidXRlTmFtZSA9IFwiaG90ZWwtZGF0YVwiO1xuICBjb25zdCBnb2xkQmdDbGFzcyA9IFwiSG90ZWxQYWdlX19UYWJMaW5rLS1BY3RpdmVcIjtcblxuICBcbiAgY29uc3QgYXR0cmlidXRlTmFtZVRvUXVlcnkgPSBhdHRyaWJ1dGVOYW1lID0+IGBbJHthdHRyaWJ1dGVOYW1lfV1gO1xuICBjb25zdCBjcmVhdGVRdWVyeUZvckRhdGFCeUlkID0gaWQgPT4gYFske2RhdGFBdHRyaWJ1dGVOYW1lfSA9IFwiJHtpZH1cIl1gO1xuICBjb25zdCBoaWRlRWxlbWVudCA9IGVsZW1lbnQgPT4geyBlbGVtZW50LnN0eWxlLmRpc3BsYXkgPSBcIm5vbmVcIjsgfTtcbiAgY29uc3Qgc2hvd0VsZW1lbnQgPSBlbGVtZW50ID0+IHsgZWxlbWVudC5zdHlsZS5kaXNwbGF5ID0gXCJibG9ja1wiOyB9O1xuICBcbiAgbGV0IGhvdGVsUGhvdG9zSW5pdGVkID0gZmFsc2U7XG5cbiAgY29uc3QgaW5pdFNsaWRlcnMgPSAoKSA9PiB7XG4gICAgaG90ZWxQaG90b3NJbml0ZWQgPSB0cnVlO1xuXG4gICAgc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICBjb25zdCBub21lckVsZW1lbnRRdWVyeSA9IFwiLkhvdGVsUGFnZV9fTm9tZXJcIjtcbiAgICAgIFxuICAgICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChub21lckVsZW1lbnRRdWVyeSkuZm9yRWFjaChub21lciA9PiB7XG4gICAgICAgIGNvbnN0IHNsaWRlckRlc2t0b3BFbGVtZW50UXVlcnkgPSBcIi5Ib3RlbFBhZ2VfX05vbWVyUGhvdG9TbGlkZXJcIjtcbiAgICAgICAgY29uc3Qgc2xpZGVyTW9iaWxlRWxlbWVudFF1ZXJ5ID0gXCIuSG90ZWxQYWdlX19Ob21lck1vYmlsZVBob3RvU2xpZGVyXCI7XG4gICAgICAgIGNvbnN0IHNsaWRlclBvcHVwRWxlbWVudFF1ZXJ5ID0gXCIuSG90ZWxQYWdlX19Ob21lclBvcHVwUGhvdG9TbGlkZXItLURlc2t0b3BcIjtcblxuICAgICAgICBjb25zdCBzcGxpZGVEZXNrdG9wID0gbmV3IFNwbGlkZShub21lci5xdWVyeVNlbGVjdG9yKHNsaWRlckRlc2t0b3BFbGVtZW50UXVlcnkpLCB7XG4gICAgICAgICAgdHlwZTogXCJsb29wXCIsXG4gICAgICAgICAgYXV0b3BsYXk6IHRydWUsXG4gICAgICAgICAgcGVyUGFnZTogMyxcbiAgICAgICAgICBwZXJNb3ZlOiAxLFxuICAgICAgICAgIGRpcmVjdGlvbjogXCJ0dGJcIixcbiAgICAgICAgICBoZWlnaHQ6IFwiNjc1cHhcIixcbiAgICAgICAgICBwYWdpbmF0aW9uOiBmYWxzZSxcbiAgICAgICAgICBsYXp5TG9hZDogXCJuZWFyYnlcIixcbiAgICAgICAgICBwcmVsb2FkUGFnZXM6IDMsXG4gICAgICAgICAgYXJyb3dQYXRoOiBcIk0yLjAxNjIgMzkuOTU0MUMzLjM3OTIzIDQxLjM0ODYgNS41ODA1NiA0MS4zNDg2IDYuOTQzNTkgMzkuOTU0MUwyMi45ODM4IDIzLjQ0NTJDMjQuMzM4NyAyMi4wNDIzIDI0LjMzODcgMTkuNzc2NyAyMi45ODM4IDE4LjM3MzhMNi45NDM1OSAxLjg2NDg3QzUuNTU3MDcgMC42NDI3OSAzLjQ5MDI1IDAuNzI0OTU0IDIuMTk5NDUgMi4wNTM0N0MwLjkwODY1NCAzLjM4MTk5IDAuODI4ODIxIDUuNTA5MjEgMi4wMTYyIDYuOTM2MjRMMTUuNTc1MiAyMC45Mjc1TDIuMDE2MiAzNC44ODI3QzAuNjYxMjY2IDM2LjI4NTYgMC42NjEyNjYgMzguNTUxMiAyLjAxNjIgMzkuOTU0MVpcIlxuICAgICAgICB9KS5tb3VudCgpO1xuXG4gICAgICAgIGNvbnN0IHNsaWRlck1vYmlsZSA9IG5ldyBTcGxpZGUobm9tZXIucXVlcnlTZWxlY3RvcihzbGlkZXJNb2JpbGVFbGVtZW50UXVlcnkpLCB7XG4gICAgICAgICAgdHlwZTogXCJsb29wXCIsXG4gICAgICAgICAgYXV0b3BsYXk6IHRydWUsXG4gICAgICAgICAgcGVyUGFnZTogMSxcbiAgICAgICAgICBwZXJNb3ZlOiAxLFxuICAgICAgICAgIHBhZ2luYXRpb246IGZhbHNlLFxuICAgICAgICAgIGxhenlMb2FkOiBcIm5lYXJieVwiLFxuICAgICAgICAgIHByZWxvYWRQYWdlczogMyxcbiAgICAgICAgICBnYXA6IFwiMmVtXCIsXG4gICAgICAgICAgYXJyb3dQYXRoOiBcIk0xLjA2MDM5IDM4Ljk1NDFDMi40ODI2NyA0MC4zNDg2IDQuNzc5NzIgNDAuMzQ4NiA2LjIwMiAzOC45NTQxTDIyLjkzOTYgMjIuNDQ1MkMyNC4zNTM1IDIxLjA0MjMgMjQuMzUzNSAxOC43NzY3IDIyLjkzOTYgMTcuMzczOEw2LjIwMiAwLjg2NDg3MUM0Ljc1NTIgLTAuMzU3MjEgMi41OTg1MiAtMC4yNzUwNDYgMS4yNTE2IDEuMDUzNDdDLTAuMDk1MzE4OCAyLjM4MTk5IC0wLjE3ODYyMyA0LjUwOTIxIDEuMDYwMzkgNS45MzYyNEwxNS4yMDkgMTkuOTI3NUwxLjA2MDM5IDMzLjg4MjdDLTAuMzUzNDYzIDM1LjI4NTYgLTAuMzUzNDYzIDM3LjU1MTIgMS4wNjAzOSAzOC45NTQxWlwiXG4gICAgICAgIH0pLm1vdW50KCk7XG5cbiAgICAgICAgY29uc3Qgc2xpZGVyUG9wdXAgPSBuZXcgU3BsaWRlKG5vbWVyLnF1ZXJ5U2VsZWN0b3Ioc2xpZGVyUG9wdXBFbGVtZW50UXVlcnkpLCB7XG4gICAgICAgICAgdHlwZTogXCJsb29wXCIsXG4gICAgICAgICAgYXV0b3BsYXk6IHRydWUsXG4gICAgICAgICAgcGVyUGFnZTogMSxcbiAgICAgICAgICBwZXJNb3ZlOiAxLFxuICAgICAgICAgIHBhZ2luYXRpb246IGZhbHNlLFxuICAgICAgICAgIGxhenlMb2FkOiBcIm5lYXJieVwiLFxuICAgICAgICAgIHByZWxvYWRQYWdlczogMyxcbiAgICAgICAgICBhcnJvd1BhdGg6IFwiTTEuMDYwMzkgMzguOTU0MUMyLjQ4MjY3IDQwLjM0ODYgNC43Nzk3MiA0MC4zNDg2IDYuMjAyIDM4Ljk1NDFMMjIuOTM5NiAyMi40NDUyQzI0LjM1MzUgMjEuMDQyMyAyNC4zNTM1IDE4Ljc3NjcgMjIuOTM5NiAxNy4zNzM4TDYuMjAyIDAuODY0ODcxQzQuNzU1MiAtMC4zNTcyMSAyLjU5ODUyIC0wLjI3NTA0NiAxLjI1MTYgMS4wNTM0N0MtMC4wOTUzMTg4IDIuMzgxOTkgLTAuMTc4NjIzIDQuNTA5MjEgMS4wNjAzOSA1LjkzNjI0TDE1LjIwOSAxOS45Mjc1TDEuMDYwMzkgMzMuODgyN0MtMC4zNTM0NjMgMzUuMjg1NiAtMC4zNTM0NjMgMzcuNTUxMiAxLjA2MDM5IDM4Ljk1NDFaXCJcbiAgICAgICAgfSk7XG5cbiAgICAgICAgc2xpZGVyUG9wdXAuc3luYyhzcGxpZGVEZXNrdG9wKS5tb3VudCgpO1xuICAgICAgICBcbiAgICAgICAgc3BsaWRlRGVza3RvcC5vbihcImNsaWNrXCIsICgpID0+IHtcbiAgICAgICAgICBub21lci5xdWVyeVNlbGVjdG9yKFwiLkhvdGVsUGFnZV9fTm9tZXJQb3B1cFBob3RvU2xpZGVyQ29udGFpbmVyXCIpLmNsYXNzTGlzdC5hZGQoXCJIb3RlbFBhZ2VfX05vbWVyUG9wdXBQaG90b1NsaWRlckNvbnRhaW5lci0tQWN0aXZlRGVza3RvcFwiKTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgbm9tZXIucXVlcnlTZWxlY3RvcihcIi5Ib3RlbFBhZ2VfX05vbWVyUG9wdXBTY3JlZW5sb2NrXCIpLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XG4gICAgICAgICAgbm9tZXIucXVlcnlTZWxlY3RvcihcIi5Ib3RlbFBhZ2VfX05vbWVyUG9wdXBQaG90b1NsaWRlckNvbnRhaW5lclwiKS5jbGFzc0xpc3QucmVtb3ZlKFwiSG90ZWxQYWdlX19Ob21lclBvcHVwUGhvdG9TbGlkZXJDb250YWluZXItLUFjdGl2ZU1vYmlsZVwiLCBcIkhvdGVsUGFnZV9fTm9tZXJQb3B1cFBob3RvU2xpZGVyQ29udGFpbmVyLS1BY3RpdmVEZXNrdG9wXCIpO1xuICAgICAgICB9KTtcbiAgICAgIH0pO1xuICAgIH0sIDEwMCk7XG4gIH07XG5cbiAgY29uc3QgZGF0YXMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKGF0dHJpYnV0ZU5hbWVUb1F1ZXJ5KGRhdGFBdHRyaWJ1dGVOYW1lKSk7XG4gIGNvbnN0IGRhdGFUcmlnZ2VycyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoYXR0cmlidXRlTmFtZVRvUXVlcnkoZGF0YVRyaWdnZXJBdHRyaWJ1dGVOYW1lKSk7XG4gIGNvbnN0IGRhdGFDb3VudCA9IGRhdGFUcmlnZ2Vycy5sZW5ndGg7XG4gIGNvbnN0IHByb2dyZXNzQmFyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5Ib3RlbFBhZ2VfX1RhYnNQcm9ncmVzc0JhcklubmVyXCIpO1xuXG4gIGRhdGFzLmZvckVhY2goZGF0YSA9PiBoaWRlRWxlbWVudChkYXRhKSk7XG5cbiAgZGF0YVRyaWdnZXJzLmZvckVhY2goZGF0YVRyaWdnZXIgPT4ge1xuICAgIGRhdGFUcmlnZ2VyLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XG4gICAgICBkYXRhcy5mb3JFYWNoKGRhdGEgPT4gaGlkZUVsZW1lbnQoZGF0YSkpO1xuXG4gICAgICBkYXRhVHJpZ2dlcnMuZm9yRWFjaChkYXRhVHJpZ2dlcjIgPT4ge1xuICAgICAgICBkYXRhVHJpZ2dlcjIuY2xhc3NMaXN0LnJlbW92ZShnb2xkQmdDbGFzcyk7XG4gICAgICB9KTtcblxuICAgICAgZGF0YVRyaWdnZXIuY2xhc3NMaXN0LmFkZChnb2xkQmdDbGFzcyk7XG5cbiAgICAgIHByb2dyZXNzQmFyLnN0eWxlID0gYFxuICAgICAgICBsZWZ0OiAkeyAoKCtkYXRhVHJpZ2dlci5nZXRBdHRyaWJ1dGUoZGF0YVRyaWdnZXJBdHRyaWJ1dGVOYW1lKSAtIDEpIC8gZGF0YUNvdW50KSAqIDEwMCB9JTtcbiAgICAgICAgd2lkdGg6ICR7IDEgLyBkYXRhQ291bnQgKiAxMDAgfSU7XG4gICAgICBgO1xuXG4gICAgICBzaG93RWxlbWVudChcbiAgICAgICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcbiAgICAgICAgICBjcmVhdGVRdWVyeUZvckRhdGFCeUlkKGRhdGFUcmlnZ2VyLmdldEF0dHJpYnV0ZShkYXRhVHJpZ2dlckF0dHJpYnV0ZU5hbWUpKVxuICAgICAgICApXG4gICAgICApO1xuXG4gICAgICBpZiAoZGF0YVRyaWdnZXIuZ2V0QXR0cmlidXRlKGRhdGFUcmlnZ2VyQXR0cmlidXRlTmFtZSkgPT09IFwiNlwiICYmICFob3RlbFBob3Rvc0luaXRlZCkge1xuICAgICAgICBpbml0U2xpZGVycygpO1xuICAgICAgfVxuICAgIH0pO1xuICB9KTtcblxuICBpZiAoZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIltob3RlbC10YWItdHJpZ2dlci1pbmRleD0nMSddXCIpKSB7XG4gICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIltob3RlbC10YWItdHJpZ2dlci1pbmRleD0nMSddXCIpLmNsaWNrKCk7XG4gIH1cbn0pKCk7IiwiKCgpID0+IHtcclxuICBjb25zdCBtb2JpbGVTaWRlYmFyRWxlbWVudCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIubW9iaWxlLXNpZGViYXJcIik7XHJcbiAgY29uc3QgbW9iaWxlU2lkZWJhclRyaWdnZXJFbGVtZW50ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5tb2JpbGUtc2lkZWJhci10cmlnZ2VyXCIpO1xyXG4gIGNvbnN0IG1vYmlsZVNpZGViYXJDbG9zZVRyaWdnZXJFbGVtZW50ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5tb2JpbGUtc2lkZWJhcl9fY2xvc2UtdHJpZ2dlclwiKTtcclxuICBjb25zdCBtb2JpbGVTaWRlYmFyU2NyZWVubG9ja0VsZW1lbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLm1vYmlsZS1zaWRlYmFyX19zY3JlZW5sb2NrXCIpO1xyXG4gIGNvbnN0IG1vYmlsZVNpZGViYXJJdGVtRWxlbWVudHMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKFwiLm1vYmlsZS1zaWRlYmFyX19pdGVtXCIpO1xyXG5cclxuICBjb25zdCBtb2JpbGVTaWRlYmFyQWN0aXZlQ2xhc3MgPSBcIm1vYmlsZS1zaWRlYmFyLS1hY3RpdmVcIjtcclxuXHJcbiAgaWYgKFxyXG4gICAgIW1vYmlsZVNpZGViYXJFbGVtZW50IFxyXG4gICAgfHwgIW1vYmlsZVNpZGViYXJUcmlnZ2VyRWxlbWVudCBcclxuICAgIHx8ICFtb2JpbGVTaWRlYmFyQ2xvc2VUcmlnZ2VyRWxlbWVudCBcclxuICAgIHx8ICFtb2JpbGVTaWRlYmFyU2NyZWVubG9ja0VsZW1lbnRcclxuICAgIHx8IG1vYmlsZVNpZGViYXJJdGVtRWxlbWVudHMubGVuZ3RoID09PSAwIFxyXG4gICkge1xyXG4gICAgcmV0dXJuO1xyXG4gIH1cclxuXHJcbiAgY29uc3Qgb3BlblNpZGViYXIgPSAoKSA9PiB7XHJcbiAgICBkb2N1bWVudC5ib2R5LnN0eWxlLm92ZXJmbG93ID0gXCJoaWRkZW5cIjtcclxuICAgIG1vYmlsZVNpZGViYXJFbGVtZW50LmNsYXNzTGlzdC5hZGQobW9iaWxlU2lkZWJhckFjdGl2ZUNsYXNzKTtcclxuICB9O1xyXG5cclxuICBjb25zdCBjbG9zZVNpZGViYXIgPSAoKSA9PiB7XHJcbiAgICBkb2N1bWVudC5ib2R5LnN0eWxlLm92ZXJmbG93ID0gXCJhdXRvXCI7XHJcbiAgICBtb2JpbGVTaWRlYmFyRWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKG1vYmlsZVNpZGViYXJBY3RpdmVDbGFzcyk7XHJcbiAgfTtcclxuXHJcbiAgY29uc3QgaGFuZGxlUmVzaXplID0gKCkgPT4ge1xyXG4gICAgY29uc3QgbW9iaWxlV2lkdGhMaW1pdCA9IDc2OTtcclxuICAgIFxyXG4gICAgaWYgKHdpbmRvdy5pbm5lcldpZHRoID49IG1vYmlsZVdpZHRoTGltaXQpIHtcclxuICAgICAgY2xvc2VTaWRlYmFyKCk7XHJcbiAgICB9XHJcbiAgfTtcclxuXHJcbiAgbW9iaWxlU2lkZWJhckl0ZW1FbGVtZW50cy5mb3JFYWNoKG1vYmlsZVNpZGViYXJJdGVtRWxlbWVudCA9PiB7XHJcbiAgICBjb25zdCB0cmlnZ2VyID0gbW9iaWxlU2lkZWJhckl0ZW1FbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIubW9iaWxlLXNpZGViYXJfX3N1Ym1lbnUtdHJpZ2dlclwiKTtcclxuICAgIGNvbnN0IHN1Ym1lbnUgPSBtb2JpbGVTaWRlYmFySXRlbUVsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5tb2JpbGUtc2lkZWJhcl9fc3VibWVudVwiKTtcclxuICAgIFxyXG4gICAgdHJpZ2dlci5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xyXG4gICAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKFwiLm1vYmlsZS1zaWRlYmFyX19zdWJtZW51XCIpXHJcbiAgICAgICAgLmZvckVhY2goc3VibWVudUVhY2ggPT4ge1xyXG4gICAgICAgICAgaWYgKHN1Ym1lbnVFYWNoICE9PSBzdWJtZW51KSB7XHJcbiAgICAgICAgICAgIHN1Ym1lbnVFYWNoLmNsYXNzTGlzdC5yZW1vdmUoXCJtb2JpbGUtc2lkZWJhcl9fc3VibWVudS0tYWN0aXZlXCIpO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgICBzdWJtZW51LmNsYXNzTGlzdC50b2dnbGUoXCJtb2JpbGUtc2lkZWJhcl9fc3VibWVudS0tYWN0aXZlXCIpO1xyXG4gICAgfSk7XHJcbiAgfSk7XHJcblxyXG4gIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKFwicmVzaXplXCIsIGhhbmRsZVJlc2l6ZSk7XHJcbiAgbW9iaWxlU2lkZWJhclRyaWdnZXJFbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCBvcGVuU2lkZWJhcik7XHJcbiAgbW9iaWxlU2lkZWJhckNsb3NlVHJpZ2dlckVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIGNsb3NlU2lkZWJhcik7XHJcbiAgbW9iaWxlU2lkZWJhclNjcmVlbmxvY2tFbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCBjbG9zZVNpZGViYXIpO1xyXG59KSgpO1xyXG5cclxuXHJcbigoKSA9PiB7XHJcbiAgY29uc3QgbW9iaWxlU2lkZWJhckVsZW1lbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLk1vYmlsZVNpZGViYXJcIik7XHJcbiAgY29uc3QgbW9iaWxlU2lkZWJhclRyaWdnZXJFbGVtZW50ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5tb2JpbGUtc2lkZWJhci10cmlnZ2VyXCIpO1xyXG4gIGNvbnN0IG1vYmlsZVNpZGViYXJDbG9zZVRyaWdnZXJFbGVtZW50ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5Nb2JpbGVTaWRlYmFyX19DbG9zZVRyaWdnZXJcIik7XHJcbiAgY29uc3QgbW9iaWxlU2lkZWJhclNjcmVlbmxvY2tFbGVtZW50ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5Nb2JpbGVTaWRlYmFyX19TY3JlZW5Mb2NrXCIpO1xyXG4gIGNvbnN0IG1vYmlsZVNpZGViYXJJdGVtRWxlbWVudHMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKFwiLk1vYmlsZVNpZGViYXJfX1NlY29uZENvbnRlbnRJdGVtXCIpO1xyXG5cclxuICBjb25zdCBtb2JpbGVTaWRlYmFyQWN0aXZlQ2xhc3MgPSBcIk1vYmlsZVNpZGViYXItLUFjdGl2ZVwiO1xyXG5cclxuICBpZiAoXHJcbiAgICAhbW9iaWxlU2lkZWJhckVsZW1lbnQgXHJcbiAgICB8fCAhbW9iaWxlU2lkZWJhclRyaWdnZXJFbGVtZW50IFxyXG4gICAgfHwgIW1vYmlsZVNpZGViYXJDbG9zZVRyaWdnZXJFbGVtZW50IFxyXG4gICAgfHwgIW1vYmlsZVNpZGViYXJTY3JlZW5sb2NrRWxlbWVudFxyXG4gICAgfHwgbW9iaWxlU2lkZWJhckl0ZW1FbGVtZW50cy5sZW5ndGggPT09IDAgXHJcbiAgKSB7XHJcbiAgICByZXR1cm47XHJcbiAgfVxyXG5cclxuICBjb25zdCBvcGVuU2lkZWJhciA9ICgpID0+IHtcclxuICAgIGRvY3VtZW50LmJvZHkuc3R5bGUub3ZlcmZsb3cgPSBcImhpZGRlblwiO1xyXG4gICAgbW9iaWxlU2lkZWJhckVsZW1lbnQuY2xhc3NMaXN0LmFkZChtb2JpbGVTaWRlYmFyQWN0aXZlQ2xhc3MpO1xyXG4gIH07XHJcblxyXG4gIGNvbnN0IGNsb3NlU2lkZWJhciA9ICgpID0+IHtcclxuICAgIGRvY3VtZW50LmJvZHkuc3R5bGUub3ZlcmZsb3cgPSBcImF1dG9cIjtcclxuICAgIG1vYmlsZVNpZGViYXJFbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUobW9iaWxlU2lkZWJhckFjdGl2ZUNsYXNzKTtcclxuICB9O1xyXG5cclxuICBjb25zdCBoYW5kbGVSZXNpemUgPSAoKSA9PiB7XHJcbiAgICBjb25zdCBtb2JpbGVXaWR0aExpbWl0ID0gNzY5O1xyXG4gICAgXHJcbiAgICBpZiAod2luZG93LmlubmVyV2lkdGggPj0gbW9iaWxlV2lkdGhMaW1pdCkge1xyXG4gICAgICBjbG9zZVNpZGViYXIoKTtcclxuICAgIH1cclxuICB9O1xyXG5cclxuICBtb2JpbGVTaWRlYmFySXRlbUVsZW1lbnRzLmZvckVhY2gobW9iaWxlU2lkZWJhckl0ZW1FbGVtZW50ID0+IHtcclxuICAgIGNvbnN0IHRyaWdnZXIgPSBtb2JpbGVTaWRlYmFySXRlbUVsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5Nb2JpbGVTaWRlYmFyX19TZWNvbmRDb250ZW50U3VibWVudVRyaWdnZXJcIik7XHJcbiAgICBjb25zdCBzdWJtZW51ID0gbW9iaWxlU2lkZWJhckl0ZW1FbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuTW9iaWxlU2lkZWJhcl9fU2Vjb25kQ29udGVudFN1Ym1lbnVcIik7XHJcbiAgICBcclxuICAgIHRyaWdnZXIuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcclxuICAgICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChcIi5Nb2JpbGVTaWRlYmFyX19TZWNvbmRDb250ZW50U3VibWVudVwiKVxyXG4gICAgICAgIC5mb3JFYWNoKHN1Ym1lbnVFYWNoID0+IHtcclxuICAgICAgICAgIGlmIChzdWJtZW51RWFjaCAhPT0gc3VibWVudSkge1xyXG4gICAgICAgICAgICBzdWJtZW51RWFjaC5jbGFzc0xpc3QucmVtb3ZlKFwiTW9iaWxlU2lkZWJhcl9fU2Vjb25kQ29udGVudFN1Ym1lbnUtLUFjdGl2ZVwiKTtcclxuICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgICAgc3VibWVudS5jbGFzc0xpc3QudG9nZ2xlKFwiTW9iaWxlU2lkZWJhcl9fU2Vjb25kQ29udGVudFN1Ym1lbnUtLUFjdGl2ZVwiKTtcclxuICAgIH0pO1xyXG4gIH0pO1xyXG5cclxuICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcihcInJlc2l6ZVwiLCBoYW5kbGVSZXNpemUpO1xyXG4gIG1vYmlsZVNpZGViYXJUcmlnZ2VyRWxlbWVudC5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgb3BlblNpZGViYXIpO1xyXG4gIG1vYmlsZVNpZGViYXJDbG9zZVRyaWdnZXJFbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCBjbG9zZVNpZGViYXIpO1xyXG4gIG1vYmlsZVNpZGViYXJTY3JlZW5sb2NrRWxlbWVudC5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgY2xvc2VTaWRlYmFyKTtcclxufSkoKTtcclxuIiwiKCgpID0+IHtcclxuICBjb25zdCBhY2NvcmRpb25RdWVyeSA9IFwiLnJoLWFjY29yZGlvblwiO1xyXG4gIGNvbnN0IGFjY29yZGlvblRyaWdnZXJRdWVyeSA9IFwiLnJoLWFjY29yZGlvbl9fdHJpZ2dlclwiO1xyXG4gIGNvbnN0IGFjY29yZGlvbkFjdGl2ZUNsYXNzID0gXCJyaC1hY2NvcmRpb24tLWFjdGl2ZVwiO1xyXG5cclxuICBjb25zdCBhY2NvcmRpb25FbGVtZW50cyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoYWNjb3JkaW9uUXVlcnkpO1xyXG5cclxuICBpZiAoIWFjY29yZGlvbkVsZW1lbnRzKSB7XHJcbiAgICByZXR1cm47XHJcbiAgfVxyXG5cclxuICBhY2NvcmRpb25FbGVtZW50cy5mb3JFYWNoKGFjY29yZGlvbiA9PiB7XHJcbiAgICBhY2NvcmRpb24ucXVlcnlTZWxlY3RvcihhY2NvcmRpb25UcmlnZ2VyUXVlcnkpLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XHJcbiAgICAgIGFjY29yZGlvbi5jbGFzc0xpc3QudG9nZ2xlKGFjY29yZGlvbkFjdGl2ZUNsYXNzKTtcclxuICAgIH0pO1xyXG4gIH0pO1xyXG59KSgpO1xyXG5cclxuKCgpID0+IHtcclxuICBjb25zdCBhY2NvcmRpb25RdWVyeSA9IFwiLlJIQWNjb3JkaW9uXCI7XHJcbiAgY29uc3QgYWNjb3JkaW9uVHJpZ2dlclF1ZXJ5ID0gXCIuUkhBY2NvcmRpb25fX1RyaWdnZXJcIjtcclxuICBjb25zdCBhY2NvcmRpb25BY3RpdmVDbGFzcyA9IFwiUkhBY2NvcmRpb24tLUFjdGl2ZVwiO1xyXG5cclxuICBjb25zdCBhY2NvcmRpb25FbGVtZW50cyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoYWNjb3JkaW9uUXVlcnkpO1xyXG5cclxuICBpZiAoIWFjY29yZGlvbkVsZW1lbnRzKSB7XHJcbiAgICByZXR1cm47XHJcbiAgfVxyXG5cclxuICBhY2NvcmRpb25FbGVtZW50cy5mb3JFYWNoKGFjY29yZGlvbiA9PiB7XHJcbiAgICBhY2NvcmRpb24ucXVlcnlTZWxlY3RvcihhY2NvcmRpb25UcmlnZ2VyUXVlcnkpLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XHJcbiAgICAgIGFjY29yZGlvbi5jbGFzc0xpc3QudG9nZ2xlKGFjY29yZGlvbkFjdGl2ZUNsYXNzKTtcclxuICAgIH0pO1xyXG4gIH0pO1xyXG59KSgpO1xyXG4iLCIoKCkgPT4ge1xyXG4gIGNvbnN0IHRvdXJTZWFyY2hCdXR0b25FbGVtZW50ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5zZWFyY2gtZm9ybS1zd2l0Y2hfX2J1dHRvbl90b3VyXCIpO1xyXG4gIGNvbnN0IGhvdGVsU2VhcmNoQnV0dG9uRWxlbWVudCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuc2VhcmNoLWZvcm0tc3dpdGNoX19idXR0b25faG90ZWxcIik7XHJcbiAgY29uc3QgdG91clNlYXJjaEZvcm1FbGVtZW50ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5zZWFyY2gtZm9ybS1zd2l0Y2hfX2Zvcm1fdG91clwiKTtcclxuICBjb25zdCBob3RlbFNlYXJjaEZvcm1FbGVtZW50ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5zZWFyY2gtZm9ybS1zd2l0Y2hfX2Zvcm1faG90ZWxcIik7XHJcblxyXG4gIGlmIChcclxuICAgICF0b3VyU2VhcmNoQnV0dG9uRWxlbWVudCBcclxuICAgIHx8ICFob3RlbFNlYXJjaEJ1dHRvbkVsZW1lbnRcclxuICAgIHx8ICF0b3VyU2VhcmNoRm9ybUVsZW1lbnRcclxuICAgIHx8ICFob3RlbFNlYXJjaEZvcm1FbGVtZW50XHJcbiAgKSB7XHJcbiAgICByZXR1cm47XHJcbiAgfVxyXG5cclxuICBjb25zdCBidXR0b25BY3RpdmVDbGFzcyA9IFwic2VhcmNoLWZvcm0tc3dpdGNoX19idXR0b24tLWFjdGl2ZVwiO1xyXG4gIGNvbnN0IGZvcm1BY3RpdmVDbGFzcyA9IFwic2VhcmNoLWZvcm0tc3dpdGNoX19mb3JtLS1hY3RpdmVcIjtcclxuXHJcbiAgdG91clNlYXJjaEJ1dHRvbkVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcclxuICAgIHRvdXJTZWFyY2hCdXR0b25FbGVtZW50LmNsYXNzTGlzdC5hZGQoYnV0dG9uQWN0aXZlQ2xhc3MpO1xyXG4gICAgdG91clNlYXJjaEZvcm1FbGVtZW50LmNsYXNzTGlzdC5hZGQoZm9ybUFjdGl2ZUNsYXNzKTtcclxuICAgIGhvdGVsU2VhcmNoQnV0dG9uRWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKGJ1dHRvbkFjdGl2ZUNsYXNzKTtcclxuICAgIGhvdGVsU2VhcmNoRm9ybUVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZShmb3JtQWN0aXZlQ2xhc3MpO1xyXG4gIH0pO1xyXG5cclxuICBob3RlbFNlYXJjaEJ1dHRvbkVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcclxuICAgIGhvdGVsU2VhcmNoQnV0dG9uRWxlbWVudC5jbGFzc0xpc3QuYWRkKGJ1dHRvbkFjdGl2ZUNsYXNzKTtcclxuICAgIGhvdGVsU2VhcmNoRm9ybUVsZW1lbnQuY2xhc3NMaXN0LmFkZChmb3JtQWN0aXZlQ2xhc3MpO1xyXG4gICAgdG91clNlYXJjaEJ1dHRvbkVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZShidXR0b25BY3RpdmVDbGFzcyk7XHJcbiAgICB0b3VyU2VhcmNoRm9ybUVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZShmb3JtQWN0aXZlQ2xhc3MpO1xyXG4gIH0pO1xyXG59KSgpO1xyXG4iLCJkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKFwiRE9NQ29udGVudExvYWRlZFwiLCAoKSA9PiB7XG4gIGNvbnN0IHNsaWRlckVsZW1lbnRRdWVyeSA9IFwiLkNvdW50cnlQYWdlX19UYWJzQ29udGFpbmVyLS1TY3JvbGxcIjtcblxuICBpZiAoZG9jdW1lbnQucXVlcnlTZWxlY3RvcihzbGlkZXJFbGVtZW50UXVlcnkpKSB7XG4gICAgbmV3IFNwbGlkZShzbGlkZXJFbGVtZW50UXVlcnksIHtcbiAgICAgIGF1dG9wbGF5OiBmYWxzZSxcbiAgICAgIGFycm93czogZmFsc2UsXG4gICAgICBwYWdpbmF0aW9uOiBmYWxzZSxcbiAgICAgIGF1dG9XaWR0aDogdHJ1ZSxcbiAgICB9KS5tb3VudCgpO1xuICB9XG59KTtcbiIsImRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJET01Db250ZW50TG9hZGVkXCIsICgpID0+IHtcbiAgY29uc3Qgc2xpZGVyRWxlbWVudFF1ZXJ5ID0gXCIuSG90ZWxQYWdlX19UYWJzQ29udGFpbmVyLS1TY3JvbGxcIjtcblxuICBpZiAoZG9jdW1lbnQucXVlcnlTZWxlY3RvcihzbGlkZXJFbGVtZW50UXVlcnkpKSB7XG4gICAgbmV3IFNwbGlkZShzbGlkZXJFbGVtZW50UXVlcnksIHtcbiAgICAgIGF1dG9wbGF5OiBmYWxzZSxcbiAgICAgIGFycm93czogZmFsc2UsXG4gICAgICBwZXJNb3ZlOiAxLFxuICAgICAgcGFnaW5hdGlvbjogZmFsc2UsXG4gICAgICBhdXRvV2lkdGg6IHRydWUsXG4gICAgfSkubW91bnQoKTtcbiAgfVxufSk7XG4iLCJkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKFwiRE9NQ29udGVudExvYWRlZFwiLCAoKSA9PiB7XG4gIGlmIChkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLkhvdGVsUGFnZV9fUGhvdG9TbGlkZXItLUJhc2VcIikpIHtcbiAgICBjb25zdCBzcGxpZGUgPSBuZXcgU3BsaWRlKFwiLkhvdGVsUGFnZV9fUGhvdG9TbGlkZXItLUJhc2VcIiwge1xuICAgICAgdHlwZTogXCJsb29wXCIsXG4gICAgICBhdXRvV2lkdGg6IHRydWUsXG4gICAgICBwZXJQYWdlOiA1LFxuICAgICAgcGVyTW92ZTogMSxcbiAgICAgIHBhZ2luYXRpb246IGZhbHNlLFxuICAgICAgbGF6eUxvYWQ6IFwibmVhcmJ5XCIsXG4gICAgICBwcmVsb2FkUGFnZXM6IDUsXG4gICAgICBwcmVsb2FkUGFnZXM6IDUsXG4gICAgICBhcnJvd1BhdGg6IFwiTTEuMDYwMzkgMzguOTU0MUMyLjQ4MjY3IDQwLjM0ODYgNC43Nzk3MiA0MC4zNDg2IDYuMjAyIDM4Ljk1NDFMMjIuOTM5NiAyMi40NDUyQzI0LjM1MzUgMjEuMDQyMyAyNC4zNTM1IDE4Ljc3NjcgMjIuOTM5NiAxNy4zNzM4TDYuMjAyIDAuODY0ODcxQzQuNzU1MiAtMC4zNTcyMSAyLjU5ODUyIC0wLjI3NTA0NiAxLjI1MTYgMS4wNTM0N0MtMC4wOTUzMTg4IDIuMzgxOTkgLTAuMTc4NjIzIDQuNTA5MjEgMS4wNjAzOSA1LjkzNjI0TDE1LjIwOSAxOS45Mjc1TDEuMDYwMzkgMzMuODgyN0MtMC4zNTM0NjMgMzUuMjg1NiAtMC4zNTM0NjMgMzcuNTUxMiAxLjA2MDM5IDM4Ljk1NDFaXCJcbiAgICB9KTtcblxuICAgIGNvbnN0IHNwbGlkZVBvcHVwID0gbmV3IFNwbGlkZShcIi5Ib3RlbFBhZ2VfX1Bob3RvU2xpZGVyLS1Qb3B1cFwiLCB7XG4gICAgICB0eXBlOiBcImxvb3BcIixcbiAgICAgIGF1dG9XaWR0aDogdHJ1ZSxcbiAgICAgIHBlclBhZ2U6IDEsXG4gICAgICBwZXJNb3ZlOiAxLFxuICAgICAgcGFnaW5hdGlvbjogZmFsc2UsXG4gICAgICBsYXp5TG9hZDogXCJuZWFyYnlcIixcbiAgICAgIHByZWxvYWRQYWdlczogNSxcbiAgICAgIGFycm93UGF0aDogXCJNMS4wNjAzOSAzOC45NTQxQzIuNDgyNjcgNDAuMzQ4NiA0Ljc3OTcyIDQwLjM0ODYgNi4yMDIgMzguOTU0MUwyMi45Mzk2IDIyLjQ0NTJDMjQuMzUzNSAyMS4wNDIzIDI0LjM1MzUgMTguNzc2NyAyMi45Mzk2IDE3LjM3MzhMNi4yMDIgMC44NjQ4NzFDNC43NTUyIC0wLjM1NzIxIDIuNTk4NTIgLTAuMjc1MDQ2IDEuMjUxNiAxLjA1MzQ3Qy0wLjA5NTMxODggMi4zODE5OSAtMC4xNzg2MjMgNC41MDkyMSAxLjA2MDM5IDUuOTM2MjRMMTUuMjA5IDE5LjkyNzVMMS4wNjAzOSAzMy44ODI3Qy0wLjM1MzQ2MyAzNS4yODU2IC0wLjM1MzQ2MyAzNy41NTEyIDEuMDYwMzkgMzguOTU0MVpcIlxuICAgIH0pO1xuXG4gICAgY29uc3Qgc3BsaWRlUG9wdXBCb3R0b20gPSBuZXcgU3BsaWRlKFwiLkhvdGVsUGFnZV9fUGhvdG9TbGlkZXItLVBvcHVwQm90dG9tXCIsIHtcbiAgICAgIHR5cGU6IFwibG9vcFwiLFxuICAgICAgYXV0b1dpZHRoOiB0cnVlLFxuICAgICAgcGVyUGFnZTogMSxcbiAgICAgIHBlck1vdmU6IDEsXG4gICAgICBwYWdpbmF0aW9uOiBmYWxzZSxcbiAgICAgIGxhenlMb2FkOiBcIm5lYXJieVwiLFxuICAgICAgcHJlbG9hZFBhZ2VzOiA1LFxuICAgICAgZHJhZzogZmFsc2UsXG4gICAgICBhcnJvd3M6IGZhbHNlLFxuICAgICAgdXBkYXRlT25Nb3ZlOiB0cnVlLFxuICAgICAgYXJyb3dQYXRoOiBcIk0xLjA2MDM5IDM4Ljk1NDFDMi40ODI2NyA0MC4zNDg2IDQuNzc5NzIgNDAuMzQ4NiA2LjIwMiAzOC45NTQxTDIyLjkzOTYgMjIuNDQ1MkMyNC4zNTM1IDIxLjA0MjMgMjQuMzUzNSAxOC43NzY3IDIyLjkzOTYgMTcuMzczOEw2LjIwMiAwLjg2NDg3MUM0Ljc1NTIgLTAuMzU3MjEgMi41OTg1MiAtMC4yNzUwNDYgMS4yNTE2IDEuMDUzNDdDLTAuMDk1MzE4OCAyLjM4MTk5IC0wLjE3ODYyMyA0LjUwOTIxIDEuMDYwMzkgNS45MzYyNEwxNS4yMDkgMTkuOTI3NUwxLjA2MDM5IDMzLjg4MjdDLTAuMzUzNDYzIDM1LjI4NTYgLTAuMzUzNDYzIDM3LjU1MTIgMS4wNjAzOSAzOC45NTQxWlwiXG4gICAgfSk7XG5cbiAgICBzcGxpZGVQb3B1cEJvdHRvbS5zeW5jKHNwbGlkZVBvcHVwKTtcblxuICAgIHNwbGlkZS5vbihcImNsaWNrXCIsICgpID0+IHtcbiAgICAgIGNvbnN0IG1vYmlsZVdpZHRoTGltaXQgPSA3Njk7XG5cbiAgICAgIGlmICh3aW5kb3cuaW5uZXJXaWR0aCA+PSBtb2JpbGVXaWR0aExpbWl0KSB7XG4gICAgICAgIHNwbGlkZVBvcHVwLmdvKHNwbGlkZS5pbmRleCk7XG4gICAgICAgIHNwbGlkZVBvcHVwQm90dG9tLmdvKHNwbGlkZS5pbmRleCk7XG4gICAgICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuSG90ZWxQYWdlX19QaG90b1NsaWRlckNvbnRhaW5lclwiKS5jbGFzc0xpc3QuYWRkKFwiSG90ZWxQYWdlX19QaG90b1NsaWRlckNvbnRhaW5lci0tQWN0aXZlXCIpOyAgICAgIFxuICAgICAgfVxuICAgIH0pO1xuXG4gICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5Ib3RlbFBhZ2VfX1Bob3RvU2xpZGVyU2NyZWVuTG9ja1wiKS5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xuICAgICAgc3BsaWRlLmdvKHNwbGlkZVBvcHVwLmluZGV4KTtcbiAgICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuSG90ZWxQYWdlX19QaG90b1NsaWRlckNvbnRhaW5lclwiKS5jbGFzc0xpc3QucmVtb3ZlKFwiSG90ZWxQYWdlX19QaG90b1NsaWRlckNvbnRhaW5lci0tQWN0aXZlXCIpO1xuICAgIH0pO1xuXG4gICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5Ib3RlbFBhZ2VfX1Bob3RvU2xpZGVyQ2xvc2VCdXR0b25cIikuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcbiAgICAgIHNwbGlkZS5nbyhzcGxpZGVQb3B1cC5pbmRleCk7XG4gICAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLkhvdGVsUGFnZV9fUGhvdG9TbGlkZXJDb250YWluZXJcIikuY2xhc3NMaXN0LnJlbW92ZShcIkhvdGVsUGFnZV9fUGhvdG9TbGlkZXJDb250YWluZXItLUFjdGl2ZVwiKTtcbiAgICB9KTtcblxuICAgIHNwbGlkZS5tb3VudCgpO1xuICAgIHNwbGlkZVBvcHVwLm1vdW50KCk7XG4gICAgc3BsaWRlUG9wdXBCb3R0b20ubW91bnQoKTtcblxuICAgIHNwbGlkZVBvcHVwLm9uKFwibW92ZVwiLCAoKSA9PiB7XG4gICAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLkhvdGVsUGFnZV9fUGhvdG9TbGlkZXJQb3B1cENvdW50ZXJcIikuaW5uZXJIVE1MID0gYCR7IHNwbGlkZVBvcHVwLmluZGV4ICsgMSB9LyR7IHNwbGlkZVBvcHVwLmxlbmd0aCB9YDtcbiAgICB9KTtcbiAgfVxufSk7XG4iLCJkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKFwiRE9NQ29udGVudExvYWRlZFwiLCAoKSA9PiB7XG4gIGNvbnN0IHNsaWRlckVsZW1lbnRRdWVyeSA9IFwiLk1vYmlsZVdpdGhZb3VfX1NwbGlkZVJvb3RcIjtcblxuICBpZiAoZG9jdW1lbnQucXVlcnlTZWxlY3RvcihzbGlkZXJFbGVtZW50UXVlcnkpKSB7XG4gICAgbmV3IFNwbGlkZShzbGlkZXJFbGVtZW50UXVlcnksIHtcbiAgICAgIHR5cGU6IFwibG9vcFwiLFxuICAgICAgcGFnaW5hdGlvbjogZmFsc2VcbiAgICB9KS5tb3VudCgpO1xuICB9XG59KTtcbiIsIigoKSA9PiB7XG4gIGNvbnN0IHRlbGVncmFtID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5UZWxlZ3JhbUZvcm1cIik7XG4gIGNvbnN0IHRlbGVncmFtVHJpZ2dlcnMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKFwiLlRlbGVncmFtX19UcmlnZ2VyXCIpO1xuICBjb25zdCB0ZWxlZ3JhbVNjcmVlbmxvY2sgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLlRlbGVncmFtRm9ybV9fU2NyZWVubG9ja1wiKTtcbiAgY29uc3QgdGVsZWdyYW1DbG9zZVRyaWdnZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLlRlbGVncmFtRm9ybV9fQ2xvc2VUcmlnZ2VyXCIpO1xuXG4gIGNvbnN0IHRlbGVncmFtQWN0aXZlQ2xhc3MgPSBcIlRlbGVncmFtRm9ybS0tQWN0aXZlXCI7XG5cbiAgaWYgKCF0ZWxlZ3JhbSB8fCAhdGVsZWdyYW1UcmlnZ2VycyB8fCAhdGVsZWdyYW1TY3JlZW5sb2NrIHx8ICF0ZWxlZ3JhbUNsb3NlVHJpZ2dlcikge1xuICAgIHJldHVybjtcbiAgfVxuXG4gIHRlbGVncmFtVHJpZ2dlcnMuZm9yRWFjaCh0ZWxlZ3JhbVRyaWdnZXIgPT4ge1xuICAgIHRlbGVncmFtVHJpZ2dlci5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xuICAgICAgdGVsZWdyYW0uY2xhc3NMaXN0LmFkZCh0ZWxlZ3JhbUFjdGl2ZUNsYXNzKTtcbiAgICB9KTtcbiAgfSk7XG5cbiAgdGVsZWdyYW1TY3JlZW5sb2NrLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XG4gICAgdGVsZWdyYW0uY2xhc3NMaXN0LnJlbW92ZSh0ZWxlZ3JhbUFjdGl2ZUNsYXNzKTtcbiAgfSk7XG5cbiAgdGVsZWdyYW1DbG9zZVRyaWdnZXIuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcbiAgICB0ZWxlZ3JhbS5jbGFzc0xpc3QucmVtb3ZlKHRlbGVncmFtQWN0aXZlQ2xhc3MpO1xuICB9KTtcbn0pKCk7XG4iXX0=
