"use strict";!function(){var e="b2c-menu--to-right",t=document.querySelector(".b2c-menu"),o=document.querySelector(".b2c-menu__content"),n=document.querySelector(".b2c-menu__trigger");(t||o||n)&&(o.style.animation="none",n.addEventListener("click",function(){o.style.animation="",t.classList.toggle("b2c-menu--active")}),window.addEventListener("scroll",function(){0<window.scrollY-232?t.classList.add(e):t.classList.remove(e)}))}(),function(){function e(e){return"[".concat(e,"]")}function o(e){e.style.display="none"}function n(e){e.style.display="block"}var c="rh-country-data-section",r="rh-country-data-trigger",i="rh-country-data",d="rh-country-data-title",u="rh-bg-gold",l=document.querySelectorAll(e(i)),a=document.querySelectorAll(e(c)),t=document.querySelectorAll(e(r)),s=document.querySelectorAll(e(d));l.forEach(o),a.forEach(o),s.forEach(function(e){return e.classList.remove(u)}),t.forEach(function(t){t.addEventListener("click",function(){var e;l.forEach(o),a.forEach(o),s.forEach(function(e){return e.classList.remove(u)}),n(document.querySelector((e=t.getAttribute(r),"[".concat(i,' = "').concat(e,'"]')))),n(document.querySelector((e=t.getAttribute("rh-country-data-section-trigger"),"[".concat(c,' = "').concat(e,'"]')))),document.querySelectorAll((e=t.getAttribute(r),"[".concat(d,' = "').concat(e,'"]'))).forEach(function(e){return e.classList.add(u)})})})}(),function(){var t=document.querySelector(".Feedback"),e=document.querySelectorAll(".Feedback__Trigger"),o=document.querySelector(".Feedback__Screenlock"),n=document.querySelector(".Feedback__CloseTrigger"),c="Feedback--Active";t&&e&&o&&n&&(e.forEach(function(e){e.addEventListener("click",function(){t.classList.add(c)})}),o.addEventListener("click",function(){t.classList.remove(c)}),n.addEventListener("click",function(){t.classList.remove(c)}))}(),function(){var e,t=document.querySelector(".mobile-sidebar"),o=document.querySelector(".mobile-sidebar-trigger"),n=document.querySelector(".mobile-sidebar__close-trigger"),c=document.querySelector(".mobile-sidebar__screenlock"),r=document.querySelectorAll(".mobile-sidebar__item"),i="mobile-sidebar--active";t&&o&&n&&c&&0!==r.length&&(e=function(){document.body.style.overflow="auto",t.classList.remove(i)},r.forEach(function(e){var t=e.querySelector(".mobile-sidebar__submenu-trigger"),o=e.querySelector(".mobile-sidebar__submenu");t.addEventListener("click",function(){document.querySelectorAll(".mobile-sidebar__submenu").forEach(function(e){e!==o&&e.classList.remove("mobile-sidebar__submenu--active")}),o.classList.toggle("mobile-sidebar__submenu--active")})}),window.addEventListener("resize",function(){769<=window.innerWidth&&e()}),o.addEventListener("click",function(){document.body.style.overflow="hidden",t.classList.add(i)}),n.addEventListener("click",e),c.addEventListener("click",e))}(),function(){var e,t=document.querySelector(".MobileSidebar"),o=document.querySelector(".mobile-sidebar-trigger"),n=document.querySelector(".MobileSidebar__CloseTrigger"),c=document.querySelector(".MobileSidebar__ScreenLock"),r=document.querySelectorAll(".MobileSidebar__SecondContentItem"),i="MobileSidebar--Active";t&&o&&n&&c&&0!==r.length&&(e=function(){document.body.style.overflow="auto",t.classList.remove(i)},r.forEach(function(e){var t=e.querySelector(".MobileSidebar__SecondContentSubmenuTrigger"),o=e.querySelector(".MobileSidebar__SecondContentSubmenu");t.addEventListener("click",function(){document.querySelectorAll(".MobileSidebar__SecondContentSubmenu").forEach(function(e){e!==o&&e.classList.remove("MobileSidebar__SecondContentSubmenu--Active")}),o.classList.toggle("MobileSidebar__SecondContentSubmenu--Active")})}),window.addEventListener("resize",function(){769<=window.innerWidth&&e()}),o.addEventListener("click",function(){document.body.style.overflow="hidden",t.classList.add(i)}),n.addEventListener("click",e),c.addEventListener("click",e))}(),function(){var e=document.querySelectorAll(".rh-accordion");e&&e.forEach(function(e){e.querySelector(".rh-accordion__trigger").addEventListener("click",function(){e.classList.toggle("rh-accordion--active")})})}(),function(){var e=document.querySelectorAll(".RHAccordion");e&&e.forEach(function(e){e.querySelector(".RHAccordion__Trigger").addEventListener("click",function(){e.classList.toggle("RHAccordion--Active")})})}(),function(){var e,t,o=document.querySelector(".search-form-switch__button_tour"),n=document.querySelector(".search-form-switch__button_hotel"),c=document.querySelector(".search-form-switch__form_tour"),r=document.querySelector(".search-form-switch__form_hotel");o&&n&&c&&r&&(e="search-form-switch__button--active",t="search-form-switch__form--active",o.addEventListener("click",function(){o.classList.add(e),c.classList.add(t),n.classList.remove(e),r.classList.remove(t)}),n.addEventListener("click",function(){n.classList.add(e),r.classList.add(t),o.classList.remove(e),c.classList.remove(t)}))}(),document.addEventListener("DOMContentLoaded",function(){var e=".b2b-top-slider";document.querySelector(e)&&new Splide(e,{type:"loop",autoplay:!0,arrows:!1}).mount()}),document.addEventListener("DOMContentLoaded",function(){var e=".with-you-slider";document.querySelector(e)&&new Splide(e,{type:"loop",pagination:!1}).mount()}),document.addEventListener("DOMContentLoaded",function(){var e=".our-guests-slider",t=".our-guests-slider--mobile";document.querySelector(e)&&new Splide(e,{type:"loop",autoplay:!0,arrows:!0,pagination:!1,gap:20,perPage:3}).mount(),document.querySelector(t)&&new Splide(t,{type:"loop",autoplay:!0,arrows:!0,pagination:!1,perPage:1}).mount()}),document.addEventListener("DOMContentLoaded",function(){var e=".our-goods-slider";document.querySelector(e)&&new Splide(e,{type:"loop",autoplay:!1,arrows:!1,perPage:1}).mount()}),document.addEventListener("DOMContentLoaded",function(){var e=".b2c-blog-slider",t=".b2c-blog-slider--mobile";document.querySelector(e)&&new Splide(e,{type:"loop",autoplay:!1,arrows:!0,pagination:!1,gap:20,perPage:4}).mount(),document.querySelector(t)&&new Splide(t,{type:"loop",autoplay:!0,arrows:!0,pagination:!1,perPage:1}).mount()});
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImIyYy1tZW51LmpzIiwiY291bnRyeS1pbmZvLWhhbmRsZXIuanMiLCJmZWVkYmFjay5qcyIsIm1vYmlsZS1zaWRlYmFyLmpzIiwicmgtYWNjb3JkaW9uLmpzIiwic2VhcmNoLWZyb20tc3dpdGNoLmpzIiwic3BsaWRlLWluaXRpYXRvci5qcyJdLCJuYW1lcyI6WyJiMmNNZW51VG9SaWdodENsYXNzIiwiYjJjTWVudUVsZW1lbnQiLCJkb2N1bWVudCIsInF1ZXJ5U2VsZWN0b3IiLCJiMmNNZW51Q29udGVudEVsZW1lbnQiLCJiMmNUcmlnZ2VyRWxlbWVudCIsInN0eWxlIiwiYW5pbWF0aW9uIiwiYWRkRXZlbnRMaXN0ZW5lciIsImNsYXNzTGlzdCIsInRvZ2dsZSIsIndpbmRvdyIsInNjcm9sbFkiLCJhZGQiLCJyZW1vdmUiLCJhdHRyaWJ1dGVOYW1lVG9RdWVyeSIsImF0dHJpYnV0ZU5hbWUiLCJjb25jYXQiLCJoaWRlRWxlbWVudCIsImVsZW1lbnQiLCJkaXNwbGF5Iiwic2hvd0VsZW1lbnQiLCJkYXRhU2VjdGlvbkF0dHJpYnV0ZU5hbWUiLCJkYXRhVHJpZ2dlckF0dHJpYnV0ZU5hbWUiLCJkYXRhQXR0cmlidXRlTmFtZSIsImRhdGFUaXRsZUF0dHJpYnV0ZU5hbWUiLCJnb2xkQmdDbGFzcyIsImRhdGFzIiwicXVlcnlTZWxlY3RvckFsbCIsImRhdGFTZWN0aW9ucyIsImRhdGFUcmlnZ2VycyIsImRhdGFUaXRsZXMiLCJmb3JFYWNoIiwiZGF0YVRpdGxlIiwiZGF0YVRyaWdnZXIiLCJpZCIsImdldEF0dHJpYnV0ZSIsImZlZWRiYWNrIiwiZmVlZGJhY2tUcmlnZ2VycyIsImZlZWRiYWNrU2NyZWVubG9jayIsImZlZWRiYWNrQ2xvc2VUcmlnZ2VyIiwiZmVlZGJhY2tBY3RpdmVDbGFzcyIsImZlZWRiYWNrVHJpZ2dlciIsImNsb3NlU2lkZWJhciIsIm1vYmlsZVNpZGViYXJFbGVtZW50IiwibW9iaWxlU2lkZWJhclRyaWdnZXJFbGVtZW50IiwibW9iaWxlU2lkZWJhckNsb3NlVHJpZ2dlckVsZW1lbnQiLCJtb2JpbGVTaWRlYmFyU2NyZWVubG9ja0VsZW1lbnQiLCJtb2JpbGVTaWRlYmFySXRlbUVsZW1lbnRzIiwibW9iaWxlU2lkZWJhckFjdGl2ZUNsYXNzIiwibGVuZ3RoIiwiYm9keSIsIm92ZXJmbG93IiwibW9iaWxlU2lkZWJhckl0ZW1FbGVtZW50IiwidHJpZ2dlciIsInN1Ym1lbnUiLCJzdWJtZW51RWFjaCIsImlubmVyV2lkdGgiLCJhY2NvcmRpb25FbGVtZW50cyIsImFjY29yZGlvbiIsImJ1dHRvbkFjdGl2ZUNsYXNzIiwiZm9ybUFjdGl2ZUNsYXNzIiwidG91clNlYXJjaEJ1dHRvbkVsZW1lbnQiLCJob3RlbFNlYXJjaEJ1dHRvbkVsZW1lbnQiLCJ0b3VyU2VhcmNoRm9ybUVsZW1lbnQiLCJob3RlbFNlYXJjaEZvcm1FbGVtZW50Iiwic2xpZGVyRWxlbWVudFF1ZXJ5IiwiU3BsaWRlIiwidHlwZSIsImF1dG9wbGF5IiwiYXJyb3dzIiwibW91bnQiLCJwYWdpbmF0aW9uIiwic2xpZGVyRWxlbWVudFF1ZXJ5TW9iaWxlIiwiZ2FwIiwicGVyUGFnZSJdLCJtYXBwaW5ncyI6ImNBQUEsV0FDQSxJQUtBQSxFQUFBLHFCQUVBQyxFQUFBQyxTQUFBQyxjQVBBLGFBUUFDLEVBQUFGLFNBQUFDLGNBUEEsc0JBUUFFLEVBQUFILFNBQUFDLGNBUEEsdUJBU0FGLEdBQUFHLEdBQUFDLEtBSUFELEVBQUFFLE1BQUFDLFVBQUEsT0FlQUYsRUFBQUcsaUJBQUEsUUFMQSxXQUNBSixFQUFBRSxNQUFBQyxVQUFBLEdBQ0FOLEVBQUFRLFVBQUFDLE9BdkJBLHNCQTJCQUMsT0FBQUgsaUJBQUEsU0FkQSxXQUNBLEVBQUFHLE9BQUFDLFFBQUEsSUFDQVgsRUFBQVEsVUFBQUksSUFBQWIsR0FFQUMsRUFBQVEsVUFBQUssT0FBQWQsTUF0QkEsR0NBQSxXQVlBLFNBQUFlLEVBQUFDLEdBQUEsTUFBQSxJQUFBQyxPQUFBRCxFQUFBLEtBd0JBLFNBQUFFLEVBQUFDLEdBQ0FB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QUNBSixRQUdBckUsU0FBQUMsY0FBQXNFLElBQ0EsSUFBQU4sT0FBQU0sRUFBQSxDQUNBTCxLQUFBLE9BQ0FDLFVBQUEsRUFDQUMsUUFBQSxFQUNBRSxZQUFBLEVBQ0FHLFFBQUEsSUFDQUosVUFJQXJFLFNBQUFNLGlCQUFBLG1CQUFBLFdBQ0EsSUFBQTBELEVBQUEsb0JBRUFoRSxTQUFBQyxjQUFBK0QsSUFDQSxJQUFBQyxPQUFBRCxFQUFBLENBQ0FFLEtBQUEsT0FDQUMsVUFBQSxFQUNBQyxRQUFBLEVBQ0FLLFFBQUEsSUFDQUosVUFJQXJFLFNBQUFNLGlCQUFBLG1CQUFBLFdBQ0EsSUFBQTBELEVBQUEsbUJBQ0FPLEVBQUEsMkJBRUF2RSxTQUFBQyxjQUFBK0QsSUFDQSxJQUFBQyxPQUFBRCxFQUFBLENBQ0FFLEtBQUEsT0FDQUMsVUFBQSxFQUNBQyxRQUFBLEVBQ0FFLFlBQUEsRUFDQUUsSUFBQSxHQUNBQyxRQUFBLElBQ0FKLFFBR0FyRSxTQUFBQyxjQUFBc0UsSUFDQSxJQUFBTixPQUFBTSxFQUFBLENBQ0FMLEtBQUEsT0FDQUMsVUFBQSxFQUNBQyxRQUFBLEVBQ0FFLFlBQUEsRUFDQUcsUUFBQSxJQUNBSiIsImZpbGUiOiJjdXN0b21lci5qcyIsInNvdXJjZXNDb250ZW50IjpbIigoKSA9PiB7XHJcbiAgY29uc3QgYjJjTWVudVF1ZXJ5ID0gXCIuYjJjLW1lbnVcIjtcclxuICBjb25zdCBiMmNNZW51Q29udGVudFF1ZXJ5ID0gXCIuYjJjLW1lbnVfX2NvbnRlbnRcIjtcclxuICBjb25zdCBiMmNUcmlnZ2VyUXVlcnkgPSBcIi5iMmMtbWVudV9fdHJpZ2dlclwiO1xyXG5cclxuICBjb25zdCBiMmNNZW51QWN0aXZlQ2xhc3MgPSBcImIyYy1tZW51LS1hY3RpdmVcIjtcclxuICBjb25zdCBiMmNNZW51VG9SaWdodENsYXNzID0gXCJiMmMtbWVudS0tdG8tcmlnaHRcIjtcclxuXHJcbiAgY29uc3QgYjJjTWVudUVsZW1lbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGIyY01lbnVRdWVyeSk7XHJcbiAgY29uc3QgYjJjTWVudUNvbnRlbnRFbGVtZW50ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihiMmNNZW51Q29udGVudFF1ZXJ5KTtcclxuICBjb25zdCBiMmNUcmlnZ2VyRWxlbWVudCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoYjJjVHJpZ2dlclF1ZXJ5KTtcclxuXHJcbiAgaWYgKCFiMmNNZW51RWxlbWVudCAmJiAhYjJjTWVudUNvbnRlbnRFbGVtZW50ICYmICFiMmNUcmlnZ2VyRWxlbWVudCkge1xyXG4gICAgcmV0dXJuO1xyXG4gIH1cclxuXHJcbiAgYjJjTWVudUNvbnRlbnRFbGVtZW50LnN0eWxlLmFuaW1hdGlvbiA9IFwibm9uZVwiO1xyXG4gIFxyXG4gIGNvbnN0IGhhbmRsZVNjcm9sbCA9ICgpID0+IHtcclxuICAgIGlmICh3aW5kb3cuc2Nyb2xsWSAtIDIzMiA+IDApIHtcclxuICAgICAgYjJjTWVudUVsZW1lbnQuY2xhc3NMaXN0LmFkZChiMmNNZW51VG9SaWdodENsYXNzKTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIGIyY01lbnVFbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUoYjJjTWVudVRvUmlnaHRDbGFzcyk7XHJcbiAgICB9XHJcbiAgfTtcclxuXHJcbiAgY29uc3QgdG9nZ2xlTWVudSA9ICgpID0+IHtcclxuICAgIGIyY01lbnVDb250ZW50RWxlbWVudC5zdHlsZS5hbmltYXRpb24gPSBcIlwiO1xyXG4gICAgYjJjTWVudUVsZW1lbnQuY2xhc3NMaXN0LnRvZ2dsZShiMmNNZW51QWN0aXZlQ2xhc3MpO1xyXG4gIH07XHJcblxyXG4gIGIyY1RyaWdnZXJFbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCB0b2dnbGVNZW51KTtcclxuICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcihcInNjcm9sbFwiLCBoYW5kbGVTY3JvbGwpO1xyXG59KSgpOyIsIigoKSA9PiB7XHJcbiAgY29uc3QgZGF0YVNlY3Rpb25UcmlnZ2VyQXR0cmlidXRlTmFtZSA9IFwicmgtY291bnRyeS1kYXRhLXNlY3Rpb24tdHJpZ2dlclwiO1xyXG4gIGNvbnN0IGRhdGFTZWN0aW9uQXR0cmlidXRlTmFtZSA9IFwicmgtY291bnRyeS1kYXRhLXNlY3Rpb25cIjtcclxuICBjb25zdCBkYXRhVHJpZ2dlckF0dHJpYnV0ZU5hbWUgPSBcInJoLWNvdW50cnktZGF0YS10cmlnZ2VyXCI7XHJcbiAgY29uc3QgZGF0YUF0dHJpYnV0ZU5hbWUgPSBcInJoLWNvdW50cnktZGF0YVwiO1xyXG4gIGNvbnN0IGRhdGFUaXRsZUF0dHJpYnV0ZU5hbWUgPSBcInJoLWNvdW50cnktZGF0YS10aXRsZVwiO1xyXG4gIGNvbnN0IGdvbGRCZ0NsYXNzID0gXCJyaC1iZy1nb2xkXCI7XHJcblxyXG4gIC8qKlxyXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBhdHRyaWJ1dGVOYW1lXHJcbiAgICogQHJldHVybnMgIHtzdHJpbmd9XHJcbiAgICovXHJcbiAgY29uc3QgYXR0cmlidXRlTmFtZVRvUXVlcnkgPSBhdHRyaWJ1dGVOYW1lID0+IGBbJHthdHRyaWJ1dGVOYW1lfV1gO1xyXG5cclxuICAvKipcclxuICAgKiBAcGFyYW0ge3N0cmluZyB8IG51bWJlcn0gaWRcclxuICAgKiBAcmV0dXJucyB7dm9pZH1cclxuICAgKi9cclxuICAgY29uc3QgY3JlYXRlUXVlcnlGb3JEYXRhQnlJZCA9IGlkID0+IGBbJHtkYXRhQXR0cmlidXRlTmFtZX0gPSBcIiR7aWR9XCJdYDtcclxuXHJcbiAgLyoqXHJcbiAgICogQHBhcmFtIHtzdHJpbmcgfCBudW1iZXJ9IGlkXHJcbiAgICogQHJldHVybnMge3ZvaWR9XHJcbiAgICovXHJcbiAgY29uc3QgY3JlYXRlUXVlcnlGb3JEYXRhU2VjdGlvbkJ5SWQgPSBpZCA9PiBgWyR7ZGF0YVNlY3Rpb25BdHRyaWJ1dGVOYW1lfSA9IFwiJHtpZH1cIl1gO1xyXG5cclxuICAgLyoqXHJcbiAgICogQHBhcmFtIHtzdHJpbmcgfCBudW1iZXJ9IGlkXHJcbiAgICogQHJldHVybnMge3ZvaWR9XHJcbiAgICovXHJcbiAgY29uc3QgY3JlYXRlUXVlcnlGb3JEYXRhVGl0bGVCeUlkID0gaWQgPT4gYFske2RhdGFUaXRsZUF0dHJpYnV0ZU5hbWV9ID0gXCIke2lkfVwiXWA7XHJcblxyXG4gIC8qKlxyXG4gICAqIEBwYXJhbSB7SFRNTEVsZW1lbnR9IGVsZW1lbnRcclxuICAgKiBAcmV0dXJucyB7dm9pZH0gXHJcbiAgICovXHJcbiAgY29uc3QgaGlkZUVsZW1lbnQgPSBlbGVtZW50ID0+IHtcclxuICAgIGVsZW1lbnQuc3R5bGUuZGlzcGxheSA9IFwibm9uZVwiO1xyXG4gIH07XHJcblxyXG4gIC8qKlxyXG4gICAqIEBwYXJhbSB7SFRNTEVsZW1lbnR9IGVsZW1lbnRcclxuICAgKiBAcmV0dXJucyB7dm9pZH0gXHJcbiAgICovXHJcbiAgY29uc3Qgc2hvd0VsZW1lbnQgPSBlbGVtZW50ID0+IHtcclxuICAgIGVsZW1lbnQuc3R5bGUuZGlzcGxheSA9IFwiYmxvY2tcIjtcclxuICB9O1xyXG5cclxuICBjb25zdCBkYXRhcyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoYXR0cmlidXRlTmFtZVRvUXVlcnkoZGF0YUF0dHJpYnV0ZU5hbWUpKTtcclxuICBjb25zdCBkYXRhU2VjdGlvbnMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKGF0dHJpYnV0ZU5hbWVUb1F1ZXJ5KGRhdGFTZWN0aW9uQXR0cmlidXRlTmFtZSkpO1xyXG4gIGNvbnN0IGRhdGFUcmlnZ2VycyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoYXR0cmlidXRlTmFtZVRvUXVlcnkoZGF0YVRyaWdnZXJBdHRyaWJ1dGVOYW1lKSk7XHJcbiAgY29uc3QgZGF0YVRpdGxlcyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoYXR0cmlidXRlTmFtZVRvUXVlcnkoZGF0YVRpdGxlQXR0cmlidXRlTmFtZSkpO1xyXG5cclxuICBkYXRhcy5mb3JFYWNoKGRhdGEgPT4gaGlkZUVsZW1lbnQoZGF0YSkpO1xyXG4gIGRhdGFTZWN0aW9ucy5mb3JFYWNoKGRhdGFTZWN0aW9uID0+IGhpZGVFbGVtZW50KGRhdGFTZWN0aW9uKSk7XHJcbiAgZGF0YVRpdGxlcy5mb3JFYWNoKGRhdGFUaXRsZSA9PiBkYXRhVGl0bGUuY2xhc3NMaXN0LnJlbW92ZShnb2xkQmdDbGFzcykpO1xyXG5cclxuICBkYXRhVHJpZ2dlcnMuZm9yRWFjaChkYXRhVHJpZ2dlciA9PiB7XHJcbiAgICBkYXRhVHJpZ2dlci5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xyXG4gICAgICBkYXRhcy5mb3JFYWNoKGRhdGEgPT4gaGlkZUVsZW1lbnQoZGF0YSkpO1xyXG4gICAgICBkYXRhU2VjdGlvbnMuZm9yRWFjaChkYXRhU2VjdGlvbiA9PiBoaWRlRWxlbWVudChkYXRhU2VjdGlvbikpO1xyXG4gICAgICBkYXRhVGl0bGVzLmZvckVhY2goZGF0YVRpdGxlID0+IGRhdGFUaXRsZS5jbGFzc0xpc3QucmVtb3ZlKGdvbGRCZ0NsYXNzKSk7XHJcblxyXG4gICAgICBzaG93RWxlbWVudChcclxuICAgICAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFxyXG4gICAgICAgICAgY3JlYXRlUXVlcnlGb3JEYXRhQnlJZChkYXRhVHJpZ2dlci5nZXRBdHRyaWJ1dGUoZGF0YVRyaWdnZXJBdHRyaWJ1dGVOYW1lKSlcclxuICAgICAgICApXHJcbiAgICAgICk7XHJcbiAgICAgIHNob3dFbGVtZW50KFxyXG4gICAgICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoY3JlYXRlUXVlcnlGb3JEYXRhU2VjdGlvbkJ5SWQoXHJcbiAgICAgICAgICBkYXRhVHJpZ2dlci5nZXRBdHRyaWJ1dGUoZGF0YVNlY3Rpb25UcmlnZ2VyQXR0cmlidXRlTmFtZSlcclxuICAgICAgICApKVxyXG4gICAgICApO1xyXG4gICAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKGNyZWF0ZVF1ZXJ5Rm9yRGF0YVRpdGxlQnlJZChcclxuICAgICAgICBkYXRhVHJpZ2dlci5nZXRBdHRyaWJ1dGUoZGF0YVRyaWdnZXJBdHRyaWJ1dGVOYW1lKVxyXG4gICAgICApKS5mb3JFYWNoKGRhdGFUaXRsZSA9PiBkYXRhVGl0bGUuY2xhc3NMaXN0LmFkZChnb2xkQmdDbGFzcykpO1xyXG4gICAgfSk7XHJcbiAgfSk7XHJcbn0pKCk7IiwiKCgpID0+IHtcbiAgY29uc3QgZmVlZGJhY2sgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLkZlZWRiYWNrXCIpO1xuICBjb25zdCBmZWVkYmFja1RyaWdnZXJzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChcIi5GZWVkYmFja19fVHJpZ2dlclwiKTtcbiAgY29uc3QgZmVlZGJhY2tTY3JlZW5sb2NrID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5GZWVkYmFja19fU2NyZWVubG9ja1wiKTtcbiAgY29uc3QgZmVlZGJhY2tDbG9zZVRyaWdnZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLkZlZWRiYWNrX19DbG9zZVRyaWdnZXJcIik7XG5cbiAgY29uc3QgZmVlZGJhY2tBY3RpdmVDbGFzcyA9IFwiRmVlZGJhY2stLUFjdGl2ZVwiO1xuXG4gIGlmICghZmVlZGJhY2sgfHwgIWZlZWRiYWNrVHJpZ2dlcnMgfHwgIWZlZWRiYWNrU2NyZWVubG9jayB8fCAhZmVlZGJhY2tDbG9zZVRyaWdnZXIpIHtcbiAgICByZXR1cm47XG4gIH1cblxuICBmZWVkYmFja1RyaWdnZXJzLmZvckVhY2goZmVlZGJhY2tUcmlnZ2VyID0+IHtcbiAgICBmZWVkYmFja1RyaWdnZXIuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcbiAgICAgIGZlZWRiYWNrLmNsYXNzTGlzdC5hZGQoZmVlZGJhY2tBY3RpdmVDbGFzcyk7XG4gICAgfSk7XG4gIH0pO1xuXG4gIGZlZWRiYWNrU2NyZWVubG9jay5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xuICAgIGZlZWRiYWNrLmNsYXNzTGlzdC5yZW1vdmUoZmVlZGJhY2tBY3RpdmVDbGFzcyk7XG4gIH0pO1xuXG4gIGZlZWRiYWNrQ2xvc2VUcmlnZ2VyLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XG4gICAgZmVlZGJhY2suY2xhc3NMaXN0LnJlbW92ZShmZWVkYmFja0FjdGl2ZUNsYXNzKTtcbiAgfSk7XG59KSgpO1xuIiwiKCgpID0+IHtcclxuICBjb25zdCBtb2JpbGVTaWRlYmFyRWxlbWVudCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIubW9iaWxlLXNpZGViYXJcIik7XHJcbiAgY29uc3QgbW9iaWxlU2lkZWJhclRyaWdnZXJFbGVtZW50ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5tb2JpbGUtc2lkZWJhci10cmlnZ2VyXCIpO1xyXG4gIGNvbnN0IG1vYmlsZVNpZGViYXJDbG9zZVRyaWdnZXJFbGVtZW50ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5tb2JpbGUtc2lkZWJhcl9fY2xvc2UtdHJpZ2dlclwiKTtcclxuICBjb25zdCBtb2JpbGVTaWRlYmFyU2NyZWVubG9ja0VsZW1lbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLm1vYmlsZS1zaWRlYmFyX19zY3JlZW5sb2NrXCIpO1xyXG4gIGNvbnN0IG1vYmlsZVNpZGViYXJJdGVtRWxlbWVudHMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKFwiLm1vYmlsZS1zaWRlYmFyX19pdGVtXCIpO1xyXG5cclxuICBjb25zdCBtb2JpbGVTaWRlYmFyQWN0aXZlQ2xhc3MgPSBcIm1vYmlsZS1zaWRlYmFyLS1hY3RpdmVcIjtcclxuXHJcbiAgaWYgKFxyXG4gICAgIW1vYmlsZVNpZGViYXJFbGVtZW50IFxyXG4gICAgfHwgIW1vYmlsZVNpZGViYXJUcmlnZ2VyRWxlbWVudCBcclxuICAgIHx8ICFtb2JpbGVTaWRlYmFyQ2xvc2VUcmlnZ2VyRWxlbWVudCBcclxuICAgIHx8ICFtb2JpbGVTaWRlYmFyU2NyZWVubG9ja0VsZW1lbnRcclxuICAgIHx8IG1vYmlsZVNpZGViYXJJdGVtRWxlbWVudHMubGVuZ3RoID09PSAwIFxyXG4gICkge1xyXG4gICAgcmV0dXJuO1xyXG4gIH1cclxuXHJcbiAgY29uc3Qgb3BlblNpZGViYXIgPSAoKSA9PiB7XHJcbiAgICBkb2N1bWVudC5ib2R5LnN0eWxlLm92ZXJmbG93ID0gXCJoaWRkZW5cIjtcclxuICAgIG1vYmlsZVNpZGViYXJFbGVtZW50LmNsYXNzTGlzdC5hZGQobW9iaWxlU2lkZWJhckFjdGl2ZUNsYXNzKTtcclxuICB9O1xyXG5cclxuICBjb25zdCBjbG9zZVNpZGViYXIgPSAoKSA9PiB7XHJcbiAgICBkb2N1bWVudC5ib2R5LnN0eWxlLm92ZXJmbG93ID0gXCJhdXRvXCI7XHJcbiAgICBtb2JpbGVTaWRlYmFyRWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKG1vYmlsZVNpZGViYXJBY3RpdmVDbGFzcyk7XHJcbiAgfTtcclxuXHJcbiAgY29uc3QgaGFuZGxlUmVzaXplID0gKCkgPT4ge1xyXG4gICAgY29uc3QgbW9iaWxlV2lkdGhMaW1pdCA9IDc2OTtcclxuICAgIFxyXG4gICAgaWYgKHdpbmRvdy5pbm5lcldpZHRoID49IG1vYmlsZVdpZHRoTGltaXQpIHtcclxuICAgICAgY2xvc2VTaWRlYmFyKCk7XHJcbiAgICB9XHJcbiAgfTtcclxuXHJcbiAgbW9iaWxlU2lkZWJhckl0ZW1FbGVtZW50cy5mb3JFYWNoKG1vYmlsZVNpZGViYXJJdGVtRWxlbWVudCA9PiB7XHJcbiAgICBjb25zdCB0cmlnZ2VyID0gbW9iaWxlU2lkZWJhckl0ZW1FbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIubW9iaWxlLXNpZGViYXJfX3N1Ym1lbnUtdHJpZ2dlclwiKTtcclxuICAgIGNvbnN0IHN1Ym1lbnUgPSBtb2JpbGVTaWRlYmFySXRlbUVsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5tb2JpbGUtc2lkZWJhcl9fc3VibWVudVwiKTtcclxuICAgIFxyXG4gICAgdHJpZ2dlci5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xyXG4gICAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKFwiLm1vYmlsZS1zaWRlYmFyX19zdWJtZW51XCIpXHJcbiAgICAgICAgLmZvckVhY2goc3VibWVudUVhY2ggPT4ge1xyXG4gICAgICAgICAgaWYgKHN1Ym1lbnVFYWNoICE9PSBzdWJtZW51KSB7XHJcbiAgICAgICAgICAgIHN1Ym1lbnVFYWNoLmNsYXNzTGlzdC5yZW1vdmUoXCJtb2JpbGUtc2lkZWJhcl9fc3VibWVudS0tYWN0aXZlXCIpO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgICBzdWJtZW51LmNsYXNzTGlzdC50b2dnbGUoXCJtb2JpbGUtc2lkZWJhcl9fc3VibWVudS0tYWN0aXZlXCIpO1xyXG4gICAgfSk7XHJcbiAgfSk7XHJcblxyXG4gIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKFwicmVzaXplXCIsIGhhbmRsZVJlc2l6ZSk7XHJcbiAgbW9iaWxlU2lkZWJhclRyaWdnZXJFbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCBvcGVuU2lkZWJhcik7XHJcbiAgbW9iaWxlU2lkZWJhckNsb3NlVHJpZ2dlckVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIGNsb3NlU2lkZWJhcik7XHJcbiAgbW9iaWxlU2lkZWJhclNjcmVlbmxvY2tFbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCBjbG9zZVNpZGViYXIpO1xyXG59KSgpO1xyXG5cclxuXHJcbigoKSA9PiB7XHJcbiAgY29uc3QgbW9iaWxlU2lkZWJhckVsZW1lbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLk1vYmlsZVNpZGViYXJcIik7XHJcbiAgY29uc3QgbW9iaWxlU2lkZWJhclRyaWdnZXJFbGVtZW50ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5tb2JpbGUtc2lkZWJhci10cmlnZ2VyXCIpO1xyXG4gIGNvbnN0IG1vYmlsZVNpZGViYXJDbG9zZVRyaWdnZXJFbGVtZW50ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5Nb2JpbGVTaWRlYmFyX19DbG9zZVRyaWdnZXJcIik7XHJcbiAgY29uc3QgbW9iaWxlU2lkZWJhclNjcmVlbmxvY2tFbGVtZW50ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5Nb2JpbGVTaWRlYmFyX19TY3JlZW5Mb2NrXCIpO1xyXG4gIGNvbnN0IG1vYmlsZVNpZGViYXJJdGVtRWxlbWVudHMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKFwiLk1vYmlsZVNpZGViYXJfX1NlY29uZENvbnRlbnRJdGVtXCIpO1xyXG5cclxuICBjb25zdCBtb2JpbGVTaWRlYmFyQWN0aXZlQ2xhc3MgPSBcIk1vYmlsZVNpZGViYXItLUFjdGl2ZVwiO1xyXG5cclxuICBpZiAoXHJcbiAgICAhbW9iaWxlU2lkZWJhckVsZW1lbnQgXHJcbiAgICB8fCAhbW9iaWxlU2lkZWJhclRyaWdnZXJFbGVtZW50IFxyXG4gICAgfHwgIW1vYmlsZVNpZGViYXJDbG9zZVRyaWdnZXJFbGVtZW50IFxyXG4gICAgfHwgIW1vYmlsZVNpZGViYXJTY3JlZW5sb2NrRWxlbWVudFxyXG4gICAgfHwgbW9iaWxlU2lkZWJhckl0ZW1FbGVtZW50cy5sZW5ndGggPT09IDAgXHJcbiAgKSB7XHJcbiAgICByZXR1cm47XHJcbiAgfVxyXG5cclxuICBjb25zdCBvcGVuU2lkZWJhciA9ICgpID0+IHtcclxuICAgIGRvY3VtZW50LmJvZHkuc3R5bGUub3ZlcmZsb3cgPSBcImhpZGRlblwiO1xyXG4gICAgbW9iaWxlU2lkZWJhckVsZW1lbnQuY2xhc3NMaXN0LmFkZChtb2JpbGVTaWRlYmFyQWN0aXZlQ2xhc3MpO1xyXG4gIH07XHJcblxyXG4gIGNvbnN0IGNsb3NlU2lkZWJhciA9ICgpID0+IHtcclxuICAgIGRvY3VtZW50LmJvZHkuc3R5bGUub3ZlcmZsb3cgPSBcImF1dG9cIjtcclxuICAgIG1vYmlsZVNpZGViYXJFbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUobW9iaWxlU2lkZWJhckFjdGl2ZUNsYXNzKTtcclxuICB9O1xyXG5cclxuICBjb25zdCBoYW5kbGVSZXNpemUgPSAoKSA9PiB7XHJcbiAgICBjb25zdCBtb2JpbGVXaWR0aExpbWl0ID0gNzY5O1xyXG4gICAgXHJcbiAgICBpZiAod2luZG93LmlubmVyV2lkdGggPj0gbW9iaWxlV2lkdGhMaW1pdCkge1xyXG4gICAgICBjbG9zZVNpZGViYXIoKTtcclxuICAgIH1cclxuICB9O1xyXG5cclxuICBtb2JpbGVTaWRlYmFySXRlbUVsZW1lbnRzLmZvckVhY2gobW9iaWxlU2lkZWJhckl0ZW1FbGVtZW50ID0+IHtcclxuICAgIGNvbnN0IHRyaWdnZXIgPSBtb2JpbGVTaWRlYmFySXRlbUVsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5Nb2JpbGVTaWRlYmFyX19TZWNvbmRDb250ZW50U3VibWVudVRyaWdnZXJcIik7XHJcbiAgICBjb25zdCBzdWJtZW51ID0gbW9iaWxlU2lkZWJhckl0ZW1FbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuTW9iaWxlU2lkZWJhcl9fU2Vjb25kQ29udGVudFN1Ym1lbnVcIik7XHJcbiAgICBcclxuICAgIHRyaWdnZXIuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcclxuICAgICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChcIi5Nb2JpbGVTaWRlYmFyX19TZWNvbmRDb250ZW50U3VibWVudVwiKVxyXG4gICAgICAgIC5mb3JFYWNoKHN1Ym1lbnVFYWNoID0+IHtcclxuICAgICAgICAgIGlmIChzdWJtZW51RWFjaCAhPT0gc3VibWVudSkge1xyXG4gICAgICAgICAgICBzdWJtZW51RWFjaC5jbGFzc0xpc3QucmVtb3ZlKFwiTW9iaWxlU2lkZWJhcl9fU2Vjb25kQ29udGVudFN1Ym1lbnUtLUFjdGl2ZVwiKTtcclxuICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgICAgc3VibWVudS5jbGFzc0xpc3QudG9nZ2xlKFwiTW9iaWxlU2lkZWJhcl9fU2Vjb25kQ29udGVudFN1Ym1lbnUtLUFjdGl2ZVwiKTtcclxuICAgIH0pO1xyXG4gIH0pO1xyXG5cclxuICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcihcInJlc2l6ZVwiLCBoYW5kbGVSZXNpemUpO1xyXG4gIG1vYmlsZVNpZGViYXJUcmlnZ2VyRWxlbWVudC5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgb3BlblNpZGViYXIpO1xyXG4gIG1vYmlsZVNpZGViYXJDbG9zZVRyaWdnZXJFbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCBjbG9zZVNpZGViYXIpO1xyXG4gIG1vYmlsZVNpZGViYXJTY3JlZW5sb2NrRWxlbWVudC5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgY2xvc2VTaWRlYmFyKTtcclxufSkoKTtcclxuIiwiKCgpID0+IHtcclxuICBjb25zdCBhY2NvcmRpb25RdWVyeSA9IFwiLnJoLWFjY29yZGlvblwiO1xyXG4gIGNvbnN0IGFjY29yZGlvblRyaWdnZXJRdWVyeSA9IFwiLnJoLWFjY29yZGlvbl9fdHJpZ2dlclwiO1xyXG4gIGNvbnN0IGFjY29yZGlvbkFjdGl2ZUNsYXNzID0gXCJyaC1hY2NvcmRpb24tLWFjdGl2ZVwiO1xyXG5cclxuICBjb25zdCBhY2NvcmRpb25FbGVtZW50cyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoYWNjb3JkaW9uUXVlcnkpO1xyXG5cclxuICBpZiAoIWFjY29yZGlvbkVsZW1lbnRzKSB7XHJcbiAgICByZXR1cm47XHJcbiAgfVxyXG5cclxuICBhY2NvcmRpb25FbGVtZW50cy5mb3JFYWNoKGFjY29yZGlvbiA9PiB7XHJcbiAgICBhY2NvcmRpb24ucXVlcnlTZWxlY3RvcihhY2NvcmRpb25UcmlnZ2VyUXVlcnkpLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XHJcbiAgICAgIGFjY29yZGlvbi5jbGFzc0xpc3QudG9nZ2xlKGFjY29yZGlvbkFjdGl2ZUNsYXNzKTtcclxuICAgIH0pO1xyXG4gIH0pO1xyXG59KSgpO1xyXG5cclxuKCgpID0+IHtcclxuICBjb25zdCBhY2NvcmRpb25RdWVyeSA9IFwiLlJIQWNjb3JkaW9uXCI7XHJcbiAgY29uc3QgYWNjb3JkaW9uVHJpZ2dlclF1ZXJ5ID0gXCIuUkhBY2NvcmRpb25fX1RyaWdnZXJcIjtcclxuICBjb25zdCBhY2NvcmRpb25BY3RpdmVDbGFzcyA9IFwiUkhBY2NvcmRpb24tLUFjdGl2ZVwiO1xyXG5cclxuICBjb25zdCBhY2NvcmRpb25FbGVtZW50cyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoYWNjb3JkaW9uUXVlcnkpO1xyXG5cclxuICBpZiAoIWFjY29yZGlvbkVsZW1lbnRzKSB7XHJcbiAgICByZXR1cm47XHJcbiAgfVxyXG5cclxuICBhY2NvcmRpb25FbGVtZW50cy5mb3JFYWNoKGFjY29yZGlvbiA9PiB7XHJcbiAgICBhY2NvcmRpb24ucXVlcnlTZWxlY3RvcihhY2NvcmRpb25UcmlnZ2VyUXVlcnkpLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XHJcbiAgICAgIGFjY29yZGlvbi5jbGFzc0xpc3QudG9nZ2xlKGFjY29yZGlvbkFjdGl2ZUNsYXNzKTtcclxuICAgIH0pO1xyXG4gIH0pO1xyXG59KSgpO1xyXG4iLCIoKCkgPT4ge1xyXG4gIGNvbnN0IHRvdXJTZWFyY2hCdXR0b25FbGVtZW50ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5zZWFyY2gtZm9ybS1zd2l0Y2hfX2J1dHRvbl90b3VyXCIpO1xyXG4gIGNvbnN0IGhvdGVsU2VhcmNoQnV0dG9uRWxlbWVudCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuc2VhcmNoLWZvcm0tc3dpdGNoX19idXR0b25faG90ZWxcIik7XHJcbiAgY29uc3QgdG91clNlYXJjaEZvcm1FbGVtZW50ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5zZWFyY2gtZm9ybS1zd2l0Y2hfX2Zvcm1fdG91clwiKTtcclxuICBjb25zdCBob3RlbFNlYXJjaEZvcm1FbGVtZW50ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5zZWFyY2gtZm9ybS1zd2l0Y2hfX2Zvcm1faG90ZWxcIik7XHJcblxyXG4gIGlmIChcclxuICAgICF0b3VyU2VhcmNoQnV0dG9uRWxlbWVudCBcclxuICAgIHx8ICFob3RlbFNlYXJjaEJ1dHRvbkVsZW1lbnRcclxuICAgIHx8ICF0b3VyU2VhcmNoRm9ybUVsZW1lbnRcclxuICAgIHx8ICFob3RlbFNlYXJjaEZvcm1FbGVtZW50XHJcbiAgKSB7XHJcbiAgICByZXR1cm47XHJcbiAgfVxyXG5cclxuICBjb25zdCBidXR0b25BY3RpdmVDbGFzcyA9IFwic2VhcmNoLWZvcm0tc3dpdGNoX19idXR0b24tLWFjdGl2ZVwiO1xyXG4gIGNvbnN0IGZvcm1BY3RpdmVDbGFzcyA9IFwic2VhcmNoLWZvcm0tc3dpdGNoX19mb3JtLS1hY3RpdmVcIjtcclxuXHJcbiAgdG91clNlYXJjaEJ1dHRvbkVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcclxuICAgIHRvdXJTZWFyY2hCdXR0b25FbGVtZW50LmNsYXNzTGlzdC5hZGQoYnV0dG9uQWN0aXZlQ2xhc3MpO1xyXG4gICAgdG91clNlYXJjaEZvcm1FbGVtZW50LmNsYXNzTGlzdC5hZGQoZm9ybUFjdGl2ZUNsYXNzKTtcclxuICAgIGhvdGVsU2VhcmNoQnV0dG9uRWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKGJ1dHRvbkFjdGl2ZUNsYXNzKTtcclxuICAgIGhvdGVsU2VhcmNoRm9ybUVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZShmb3JtQWN0aXZlQ2xhc3MpO1xyXG4gIH0pO1xyXG5cclxuICBob3RlbFNlYXJjaEJ1dHRvbkVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcclxuICAgIGhvdGVsU2VhcmNoQnV0dG9uRWxlbWVudC5jbGFzc0xpc3QuYWRkKGJ1dHRvbkFjdGl2ZUNsYXNzKTtcclxuICAgIGhvdGVsU2VhcmNoRm9ybUVsZW1lbnQuY2xhc3NMaXN0LmFkZChmb3JtQWN0aXZlQ2xhc3MpO1xyXG4gICAgdG91clNlYXJjaEJ1dHRvbkVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZShidXR0b25BY3RpdmVDbGFzcyk7XHJcbiAgICB0b3VyU2VhcmNoRm9ybUVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZShmb3JtQWN0aXZlQ2xhc3MpO1xyXG4gIH0pO1xyXG59KSgpO1xyXG4iLCJkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKFwiRE9NQ29udGVudExvYWRlZFwiLCAoKSA9PiB7XHJcbiAgY29uc3Qgc2xpZGVyRWxlbWVudFF1ZXJ5ID0gXCIuYjJiLXRvcC1zbGlkZXJcIjtcclxuXHJcbiAgaWYgKGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3Ioc2xpZGVyRWxlbWVudFF1ZXJ5KSkge1xyXG4gICAgbmV3IFNwbGlkZShzbGlkZXJFbGVtZW50UXVlcnksIHtcclxuICAgICAgdHlwZTogXCJsb29wXCIsXHJcbiAgICAgIGF1dG9wbGF5OiB0cnVlLFxyXG4gICAgICBhcnJvd3M6IGZhbHNlXHJcbiAgICB9KS5tb3VudCgpO1xyXG4gIH1cclxufSk7XHJcblxyXG5kb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKFwiRE9NQ29udGVudExvYWRlZFwiLCAoKSA9PiB7XHJcbiAgY29uc3Qgc2xpZGVyRWxlbWVudFF1ZXJ5ID0gXCIud2l0aC15b3Utc2xpZGVyXCI7XHJcblxyXG4gIGlmIChkb2N1bWVudC5xdWVyeVNlbGVjdG9yKHNsaWRlckVsZW1lbnRRdWVyeSkpIHtcclxuICAgIG5ldyBTcGxpZGUoc2xpZGVyRWxlbWVudFF1ZXJ5LCB7XHJcbiAgICAgIHR5cGU6IFwibG9vcFwiLFxyXG4gICAgICBwYWdpbmF0aW9uOiBmYWxzZVxyXG4gICAgfSkubW91bnQoKTtcclxuICB9XHJcbn0pO1xyXG5cclxuZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcIkRPTUNvbnRlbnRMb2FkZWRcIiwgKCkgPT4ge1xyXG4gIGNvbnN0IHNsaWRlckVsZW1lbnRRdWVyeSA9IFwiLm91ci1ndWVzdHMtc2xpZGVyXCI7XHJcbiAgY29uc3Qgc2xpZGVyRWxlbWVudFF1ZXJ5TW9iaWxlID0gXCIub3VyLWd1ZXN0cy1zbGlkZXItLW1vYmlsZVwiO1xyXG5cclxuICBpZiAoZG9jdW1lbnQucXVlcnlTZWxlY3RvcihzbGlkZXJFbGVtZW50UXVlcnkpKSB7XHJcbiAgICBuZXcgU3BsaWRlKHNsaWRlckVsZW1lbnRRdWVyeSwge1xyXG4gICAgICB0eXBlOiBcImxvb3BcIixcclxuICAgICAgYXV0b3BsYXk6IHRydWUsXHJcbiAgICAgIGFycm93czogdHJ1ZSxcclxuICAgICAgcGFnaW5hdGlvbjogZmFsc2UsXHJcbiAgICAgIGdhcDogMjAsXHJcbiAgICAgIHBlclBhZ2U6IDNcclxuICAgIH0pLm1vdW50KCk7XHJcbiAgfVxyXG5cclxuICBpZiAoZG9jdW1lbnQucXVlcnlTZWxlY3RvcihzbGlkZXJFbGVtZW50UXVlcnlNb2JpbGUpKSB7XHJcbiAgICBuZXcgU3BsaWRlKHNsaWRlckVsZW1lbnRRdWVyeU1vYmlsZSwge1xyXG4gICAgICB0eXBlOiBcImxvb3BcIixcclxuICAgICAgYXV0b3BsYXk6IHRydWUsXHJcbiAgICAgIGFycm93czogdHJ1ZSxcclxuICAgICAgcGFnaW5hdGlvbjogZmFsc2UsXHJcbiAgICAgIHBlclBhZ2U6IDFcclxuICAgIH0pLm1vdW50KCk7XHJcbiAgfVxyXG59KTtcclxuXHJcbmRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJET01Db250ZW50TG9hZGVkXCIsICgpID0+IHtcclxuICBjb25zdCBzbGlkZXJFbGVtZW50UXVlcnkgPSBcIi5vdXItZ29vZHMtc2xpZGVyXCI7XHJcblxyXG4gIGlmIChkb2N1bWVudC5xdWVyeVNlbGVjdG9yKHNsaWRlckVsZW1lbnRRdWVyeSkpIHtcclxuICAgIG5ldyBTcGxpZGUoc2xpZGVyRWxlbWVudFF1ZXJ5LCB7XHJcbiAgICAgIHR5cGU6IFwibG9vcFwiLFxyXG4gICAgICBhdXRvcGxheTogZmFsc2UsXHJcbiAgICAgIGFycm93czogZmFsc2UsXHJcbiAgICAgIHBlclBhZ2U6IDFcclxuICAgIH0pLm1vdW50KCk7XHJcbiAgfVxyXG59KTtcclxuXHJcbmRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJET01Db250ZW50TG9hZGVkXCIsICgpID0+IHtcclxuICBjb25zdCBzbGlkZXJFbGVtZW50UXVlcnkgPSBcIi5iMmMtYmxvZy1zbGlkZXJcIjtcclxuICBjb25zdCBzbGlkZXJFbGVtZW50UXVlcnlNb2JpbGUgPSBcIi5iMmMtYmxvZy1zbGlkZXItLW1vYmlsZVwiO1xyXG5cclxuICBpZiAoZG9jdW1lbnQucXVlcnlTZWxlY3RvcihzbGlkZXJFbGVtZW50UXVlcnkpKSB7XHJcbiAgICBuZXcgU3BsaWRlKHNsaWRlckVsZW1lbnRRdWVyeSwge1xyXG4gICAgICB0eXBlOiBcImxvb3BcIixcclxuICAgICAgYXV0b3BsYXk6IGZhbHNlLFxyXG4gICAgICBhcnJvd3M6IHRydWUsXHJcbiAgICAgIHBhZ2luYXRpb246IGZhbHNlLFxyXG4gICAgICBnYXA6IDIwLFxyXG4gICAgICBwZXJQYWdlOiA0XHJcbiAgICB9KS5tb3VudCgpO1xyXG4gIH1cclxuXHJcbiAgaWYgKGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3Ioc2xpZGVyRWxlbWVudFF1ZXJ5TW9iaWxlKSkge1xyXG4gICAgbmV3IFNwbGlkZShzbGlkZXJFbGVtZW50UXVlcnlNb2JpbGUsIHtcclxuICAgICAgdHlwZTogXCJsb29wXCIsXHJcbiAgICAgIGF1dG9wbGF5OiB0cnVlLFxyXG4gICAgICBhcnJvd3M6IHRydWUsXHJcbiAgICAgIHBhZ2luYXRpb246IGZhbHNlLFxyXG4gICAgICBwZXJQYWdlOiAxXHJcbiAgICB9KS5tb3VudCgpO1xyXG4gIH1cclxufSk7XHJcblxyXG4iXX0=
