"use strict";!function(){var e="b2c-menu--to-right",t=document.querySelector(".b2c-menu"),o=document.querySelector(".b2c-menu__content"),n=document.querySelector(".b2c-menu__trigger");(t||o||n)&&(o.style.animation="none",n.addEventListener("click",function(){o.style.animation="",t.classList.toggle("b2c-menu--active")}),window.addEventListener("scroll",function(){0<window.scrollY-232?t.classList.add(e):t.classList.remove(e)}))}(),function(){function e(e){return"[".concat(e,"]")}function o(e){e.style.display="none"}function n(e){e.style.display="block"}var c="rh-country-data-section",r="rh-country-data-trigger",i="rh-country-data",a="rh-country-data-title",d="CountryPage__TabLink--Active",u=document.querySelectorAll(e(i)),l=document.querySelectorAll(e(c)),t=document.querySelectorAll(e(r)),s=document.querySelectorAll(e(a));u.forEach(o),l.forEach(o),s.forEach(function(e){return e.classList.remove(d)}),t.forEach(function(t){t.addEventListener("click",function(){var e;u.forEach(o),l.forEach(o),s.forEach(function(e){return e.classList.remove(d)}),n(document.querySelector((e=t.getAttribute(r),"[".concat(i,' = "').concat(e,'"]')))),n(document.querySelector((e=t.getAttribute("rh-country-data-section-trigger"),"[".concat(c,' = "').concat(e,'"]')))),document.querySelectorAll((e=t.getAttribute(r),"[".concat(a,' = "').concat(e,'"]'))).forEach(function(e){return e.classList.add(d)})})})}(),function(){var t=document.querySelector(".Feedback"),e=document.querySelectorAll(".Feedback__Trigger"),o=document.querySelector(".Feedback__Screenlock"),n=document.querySelector(".Feedback__CloseTrigger"),c="Feedback--Active";t&&e&&o&&n&&(e.forEach(function(e){e.addEventListener("click",function(){t.classList.add(c)})}),o.addEventListener("click",function(){t.classList.remove(c)}),n.addEventListener("click",function(){t.classList.remove(c)}))}(),function(){function e(e){return"[".concat(e,"]")}function o(e){e.style.display="none"}var n="hotel-tab-trigger-index",c="hotel-data",r="HotelPage__TabLink--Active",i=document.querySelectorAll(e(c)),a=document.querySelectorAll(e(n));i.forEach(o),a.forEach(function(t){t.addEventListener("click",function(){var e;i.forEach(o),a.forEach(function(e){e.classList.remove(r)}),t.classList.add(r),document.querySelector((e=t.getAttribute(n),"[".concat(c,' = "').concat(e,'"]'))).style.display="block"})})}(),function(){var e,t=document.querySelector(".mobile-sidebar"),o=document.querySelector(".mobile-sidebar-trigger"),n=document.querySelector(".mobile-sidebar__close-trigger"),c=document.querySelector(".mobile-sidebar__screenlock"),r=document.querySelectorAll(".mobile-sidebar__item"),i="mobile-sidebar--active";t&&o&&n&&c&&0!==r.length&&(e=function(){document.body.style.overflow="auto",t.classList.remove(i)},r.forEach(function(e){var t=e.querySelector(".mobile-sidebar__submenu-trigger"),o=e.querySelector(".mobile-sidebar__submenu");t.addEventListener("click",function(){document.querySelectorAll(".mobile-sidebar__submenu").forEach(function(e){e!==o&&e.classList.remove("mobile-sidebar__submenu--active")}),o.classList.toggle("mobile-sidebar__submenu--active")})}),window.addEventListener("resize",function(){769<=window.innerWidth&&e()}),o.addEventListener("click",function(){document.body.style.overflow="hidden",t.classList.add(i)}),n.addEventListener("click",e),c.addEventListener("click",e))}(),function(){var e,t=document.querySelector(".MobileSidebar"),o=document.querySelector(".mobile-sidebar-trigger"),n=document.querySelector(".MobileSidebar__CloseTrigger"),c=document.querySelector(".MobileSidebar__ScreenLock"),r=document.querySelectorAll(".MobileSidebar__SecondContentItem"),i="MobileSidebar--Active";t&&o&&n&&c&&0!==r.length&&(e=function(){document.body.style.overflow="auto",t.classList.remove(i)},r.forEach(function(e){var t=e.querySelector(".MobileSidebar__SecondContentSubmenuTrigger"),o=e.querySelector(".MobileSidebar__SecondContentSubmenu");t.addEventListener("click",function(){document.querySelectorAll(".MobileSidebar__SecondContentSubmenu").forEach(function(e){e!==o&&e.classList.remove("MobileSidebar__SecondContentSubmenu--Active")}),o.classList.toggle("MobileSidebar__SecondContentSubmenu--Active")})}),window.addEventListener("resize",function(){769<=window.innerWidth&&e()}),o.addEventListener("click",function(){document.body.style.overflow="hidden",t.classList.add(i)}),n.addEventListener("click",e),c.addEventListener("click",e))}(),function(){var e=document.querySelectorAll(".rh-accordion");e&&e.forEach(function(e){e.querySelector(".rh-accordion__trigger").addEventListener("click",function(){e.classList.toggle("rh-accordion--active")})})}(),function(){var e=document.querySelectorAll(".RHAccordion");e&&e.forEach(function(e){e.querySelector(".RHAccordion__Trigger").addEventListener("click",function(){e.classList.toggle("RHAccordion--Active")})})}(),function(){var e,t,o=document.querySelector(".search-form-switch__button_tour"),n=document.querySelector(".search-form-switch__button_hotel"),c=document.querySelector(".search-form-switch__form_tour"),r=document.querySelector(".search-form-switch__form_hotel");o&&n&&c&&r&&(e="search-form-switch__button--active",t="search-form-switch__form--active",o.addEventListener("click",function(){o.classList.add(e),c.classList.add(t),n.classList.remove(e),r.classList.remove(t)}),n.addEventListener("click",function(){n.classList.add(e),r.classList.add(t),o.classList.remove(e),c.classList.remove(t)}))}(),document.addEventListener("DOMContentLoaded",function(){var e=".CountryPage__TabsContainer--Scroll";document.querySelector(e)&&new Splide(e,{autoplay:!1,arrows:!1,pagination:!1,autoWidth:!0}).mount()}),document.addEventListener("DOMContentLoaded",function(){var e=".HotelPage__TabsContainer--Scroll";document.querySelector(e)&&new Splide(e,{autoplay:!1,arrows:!1,perMove:1,pagination:!1,autoWidth:!0}).mount()}),document.addEventListener("DOMContentLoaded",function(){var e=".HotelPage__PhotoSlider";document.querySelector(e)&&new Splide(e,{type:"loop",autoplay:!0,perPage:5,autoWidth:!0,perMove:1,pagination:!1,lazyLoad:"nearby"}).mount()}),document.addEventListener("DOMContentLoaded",function(){var e=".b2b-top-slider";document.querySelector(e)&&new Splide(e,{type:"loop",autoplay:!0,arrows:!1}).mount()}),document.addEventListener("DOMContentLoaded",function(){var e=".with-you-slider";document.querySelector(e)&&new Splide(e,{type:"loop",pagination:!1}).mount()}),document.addEventListener("DOMContentLoaded",function(){var e=".our-guests-slider",t=".our-guests-slider--mobile";document.querySelector(e)&&new Splide(e,{type:"loop",autoplay:!0,arrows:!0,pagination:!1,gap:20,perPage:3}).mount(),document.querySelector(t)&&new Splide(t,{type:"loop",autoplay:!0,arrows:!0,pagination:!1,perPage:1}).mount()}),document.addEventListener("DOMContentLoaded",function(){var e=".our-goods-slider";document.querySelector(e)&&new Splide(e,{type:"loop",autoplay:!1,arrows:!1,perPage:1}).mount()}),document.addEventListener("DOMContentLoaded",function(){var e=".b2c-blog-slider",t=".b2c-blog-slider--mobile";document.querySelector(e)&&new Splide(e,{type:"loop",autoplay:!1,arrows:!0,pagination:!1,gap:20,perPage:4}).mount(),document.querySelector(t)&&new Splide(t,{type:"loop",autoplay:!0,arrows:!0,pagination:!1,perPage:1}).mount()});
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImIyYy1tZW51LmpzIiwiY291bnRyeS1pbmZvLWhhbmRsZXIuanMiLCJmZWVkYmFjay5qcyIsImhvdGVsLXRhYnMuanMiLCJtb2JpbGUtc2lkZWJhci5qcyIsInJoLWFjY29yZGlvbi5qcyIsInNlYXJjaC1mcm9tLXN3aXRjaC5qcyIsInNwbGlkZS1pbml0aWF0b3IuanMiXSwibmFtZXMiOlsiYjJjTWVudVRvUmlnaHRDbGFzcyIsImIyY01lbnVFbGVtZW50IiwiZG9jdW1lbnQiLCJxdWVyeVNlbGVjdG9yIiwiYjJjTWVudUNvbnRlbnRFbGVtZW50IiwiYjJjVHJpZ2dlckVsZW1lbnQiLCJzdHlsZSIsImFuaW1hdGlvbiIsImFkZEV2ZW50TGlzdGVuZXIiLCJjbGFzc0xpc3QiLCJ0b2dnbGUiLCJ3aW5kb3ciLCJzY3JvbGxZIiwiYWRkIiwicmVtb3ZlIiwiYXR0cmlidXRlTmFtZVRvUXVlcnkiLCJhdHRyaWJ1dGVOYW1lIiwiY29uY2F0IiwiaGlkZUVsZW1lbnQiLCJlbGVtZW50IiwiZGlzcGxheSIsInNob3dFbGVtZW50IiwiZGF0YVNlY3Rpb25BdHRyaWJ1dGVOYW1lIiwiZGF0YVRyaWdnZXJBdHRyaWJ1dGVOYW1lIiwiZGF0YUF0dHJpYnV0ZU5hbWUiLCJkYXRhVGl0bGVBdHRyaWJ1dGVOYW1lIiwiZ29sZEJnQ2xhc3MiLCJkYXRhcyIsInF1ZXJ5U2VsZWN0b3JBbGwiLCJkYXRhU2VjdGlvbnMiLCJkYXRhVHJpZ2dlcnMiLCJkYXRhVGl0bGVzIiwiZm9yRWFjaCIsImRhdGFUaXRsZSIsImRhdGFUcmlnZ2VyIiwiaWQiLCJnZXRBdHRyaWJ1dGUiLCJmZWVkYmFjayIsImZlZWRiYWNrVHJpZ2dlcnMiLCJmZWVkYmFja1NjcmVlbmxvY2siLCJmZWVkYmFja0Nsb3NlVHJpZ2dlciIsImZlZWRiYWNrQWN0aXZlQ2xhc3MiLCJmZWVkYmFja1RyaWdnZXIiLCJkYXRhVHJpZ2dlcjIiLCJjbG9zZVNpZGViYXIiLCJtb2JpbGVTaWRlYmFyRWxlbWVudCIsIm1vYmlsZVNpZGViYXJUcmlnZ2VyRWxlbWVudCIsIm1vYmlsZVNpZGViYXJDbG9zZVRyaWdnZXJFbGVtZW50IiwibW9iaWxlU2lkZWJhclNjcmVlbmxvY2tFbGVtZW50IiwibW9iaWxlU2lkZWJhckl0ZW1FbGVtZW50cyIsIm1vYmlsZVNpZGViYXJBY3RpdmVDbGFzcyIsImxlbmd0aCIsImJvZHkiLCJvdmVyZmxvdyIsIm1vYmlsZVNpZGViYXJJdGVtRWxlbWVudCIsInRyaWdnZXIiLCJzdWJtZW51Iiwic3VibWVudUVhY2giLCJpbm5lcldpZHRoIiwiYWNjb3JkaW9uRWxlbWVudHMiLCJhY2NvcmRpb24iLCJidXR0b25BY3RpdmVDbGFzcyIsImZvcm1BY3RpdmVDbGFzcyIsInRvdXJTZWFyY2hCdXR0b25FbGVtZW50IiwiaG90ZWxTZWFyY2hCdXR0b25FbGVtZW50IiwidG91clNlYXJjaEZvcm1FbGVtZW50IiwiaG90ZWxTZWFyY2hGb3JtRWxlbWVudCIsInNsaWRlckVsZW1lbnRRdWVyeSIsIlNwbGlkZSIsImF1dG9wbGF5IiwiYXJyb3dzIiwicGFnaW5hdGlvbiIsImF1dG9XaWR0aCIsIm1vdW50IiwicGVyTW92ZSIsInR5cGUiLCJwZXJQYWdlIiwibGF6eUxvYWQiLCJzbGlkZXJFbGVtZW50UXVlcnlNb2JpbGUiLCJnYXAiXSwibWFwcGluZ3MiOiJjQUFBLFdBQ0EsSUFLQUEsRUFBQSxxQkFFQUMsRUFBQUMsU0FBQUMsY0FQQSxhQVFBQyxFQUFBRixTQUFBQyxjQVBBLHNCQVFBRSxFQUFBSCxTQUFBQyxjQVBBLHVCQVNBRixHQUFBRyxHQUFBQyxLQUlBRCxFQUFBRSxNQUFBQyxVQUFBLE9BZUFGLEVBQUFHLGlCQUFBLFFBTEEsV0FDQUosRUFBQUUsTUFBQUMsVUFBQSxHQUNBTixFQUFBUSxVQUFBQyxPQXZCQSxzQkEyQkFDLE9BQUFILGlCQUFBLFNBZEEsV0FDQSxFQUFBRyxPQUFBQyxRQUFBLElBQ0FYLEVBQUFRLFVBQUFJLElBQUFiLEdBRUFDLEVBQUFRLFVBQUFLLE9BQUFkLE1BdEJBLEdDQUEsV0FZ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QUFBQyxPQUFBRCxFQUFBLENBQ0FRLEtBQUEsT0FDQU4sVUFBQSxFQUNBQyxRQUFBLEVBQ0FDLFlBQUEsRUFDQVEsSUFBQSxHQUNBSCxRQUFBLElBQ0FILFFBR0F2RSxTQUFBQyxjQUFBMkUsSUFDQSxJQUFBVixPQUFBVSxFQUFBLENBQ0FILEtBQUEsT0FDQU4sVUFBQSxFQUNBQyxRQUFBLEVBQ0FDLFlBQUEsRUFDQUssUUFBQSxJQUNBSCxVQUlBdkUsU0FBQU0saUJBQUEsbUJBQUEsV0FDQSxJQUFBMkQsRUFBQSxvQkFFQWpFLFNBQUFDLGNBQUFnRSxJQUNBLElBQUFDLE9BQUFELEVBQUEsQ0FDQVEsS0FBQSxPQUNBTixVQUFBLEVBQ0FDLFFBQUEsRUFDQU0sUUFBQSxJQUNBSCxVQUlBdkUsU0FBQU0saUJBQUEsbUJBQUEsV0FDQSxJQUFBMkQsRUFBQSxtQkFDQVcsRUFBQSwyQkFFQTVFLFNBQUFDLGNBQUFnRSxJQUNBLElBQUFDLE9BQUFELEVBQUEsQ0FDQVEsS0FBQSxPQUNBTixVQUFBLEVBQ0FDLFFBQUEsRUFDQUMsWUFBQSxFQUNBUSxJQUFBLEdBQ0FILFFBQUEsSUFDQUgsUUFHQXZFLFNBQUFDLGNBQUEyRSxJQUNBLElBQUFWLE9BQUFVLEVBQUEsQ0FDQUgsS0FBQSxPQUNBTixVQUFBLEVBQ0FDLFFBQUEsRUFDQUMsWUFBQSxFQUNBSyxRQUFBLElBQ0FIIiwiZmlsZSI6ImN1c3RvbWVyLmpzIiwic291cmNlc0NvbnRlbnQiOlsiKCgpID0+IHtcclxuICBjb25zdCBiMmNNZW51UXVlcnkgPSBcIi5iMmMtbWVudVwiO1xyXG4gIGNvbnN0IGIyY01lbnVDb250ZW50UXVlcnkgPSBcIi5iMmMtbWVudV9fY29udGVudFwiO1xyXG4gIGNvbnN0IGIyY1RyaWdnZXJRdWVyeSA9IFwiLmIyYy1tZW51X190cmlnZ2VyXCI7XHJcblxyXG4gIGNvbnN0IGIyY01lbnVBY3RpdmVDbGFzcyA9IFwiYjJjLW1lbnUtLWFjdGl2ZVwiO1xyXG4gIGNvbnN0IGIyY01lbnVUb1JpZ2h0Q2xhc3MgPSBcImIyYy1tZW51LS10by1yaWdodFwiO1xyXG5cclxuICBjb25zdCBiMmNNZW51RWxlbWVudCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoYjJjTWVudVF1ZXJ5KTtcclxuICBjb25zdCBiMmNNZW51Q29udGVudEVsZW1lbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGIyY01lbnVDb250ZW50UXVlcnkpO1xyXG4gIGNvbnN0IGIyY1RyaWdnZXJFbGVtZW50ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihiMmNUcmlnZ2VyUXVlcnkpO1xyXG5cclxuICBpZiAoIWIyY01lbnVFbGVtZW50ICYmICFiMmNNZW51Q29udGVudEVsZW1lbnQgJiYgIWIyY1RyaWdnZXJFbGVtZW50KSB7XHJcbiAgICByZXR1cm47XHJcbiAgfVxyXG5cclxuICBiMmNNZW51Q29udGVudEVsZW1lbnQuc3R5bGUuYW5pbWF0aW9uID0gXCJub25lXCI7XHJcbiAgXHJcbiAgY29uc3QgaGFuZGxlU2Nyb2xsID0gKCkgPT4ge1xyXG4gICAgaWYgKHdpbmRvdy5zY3JvbGxZIC0gMjMyID4gMCkge1xyXG4gICAgICBiMmNNZW51RWxlbWVudC5jbGFzc0xpc3QuYWRkKGIyY01lbnVUb1JpZ2h0Q2xhc3MpO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgYjJjTWVudUVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZShiMmNNZW51VG9SaWdodENsYXNzKTtcclxuICAgIH1cclxuICB9O1xyXG5cclxuICBjb25zdCB0b2dnbGVNZW51ID0gKCkgPT4ge1xyXG4gICAgYjJjTWVudUNvbnRlbnRFbGVtZW50LnN0eWxlLmFuaW1hdGlvbiA9IFwiXCI7XHJcbiAgICBiMmNNZW51RWxlbWVudC5jbGFzc0xpc3QudG9nZ2xlKGIyY01lbnVBY3RpdmVDbGFzcyk7XHJcbiAgfTtcclxuXHJcbiAgYjJjVHJpZ2dlckVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIHRvZ2dsZU1lbnUpO1xyXG4gIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKFwic2Nyb2xsXCIsIGhhbmRsZVNjcm9sbCk7XHJcbn0pKCk7IiwiKCgpID0+IHtcclxuICBjb25zdCBkYXRhU2VjdGlvblRyaWdnZXJBdHRyaWJ1dGVOYW1lID0gXCJyaC1jb3VudHJ5LWRhdGEtc2VjdGlvbi10cmlnZ2VyXCI7XHJcbiAgY29uc3QgZGF0YVNlY3Rpb25BdHRyaWJ1dGVOYW1lID0gXCJyaC1jb3VudHJ5LWRhdGEtc2VjdGlvblwiO1xyXG4gIGNvbnN0IGRhdGFUcmlnZ2VyQXR0cmlidXRlTmFtZSA9IFwicmgtY291bnRyeS1kYXRhLXRyaWdnZXJcIjtcclxuICBjb25zdCBkYXRhQXR0cmlidXRlTmFtZSA9IFwicmgtY291bnRyeS1kYXRhXCI7XHJcbiAgY29uc3QgZGF0YVRpdGxlQXR0cmlidXRlTmFtZSA9IFwicmgtY291bnRyeS1kYXRhLXRpdGxlXCI7XHJcbiAgY29uc3QgZ29sZEJnQ2xhc3MgPSBcIkNvdW50cnlQYWdlX19UYWJMaW5rLS1BY3RpdmVcIjtcclxuXHJcbiAgLyoqXHJcbiAgICogQHBhcmFtIHtzdHJpbmd9IGF0dHJpYnV0ZU5hbWVcclxuICAgKiBAcmV0dXJucyAge3N0cmluZ31cclxuICAgKi9cclxuICBjb25zdCBhdHRyaWJ1dGVOYW1lVG9RdWVyeSA9IGF0dHJpYnV0ZU5hbWUgPT4gYFske2F0dHJpYnV0ZU5hbWV9XWA7XHJcblxyXG4gIC8qKlxyXG4gICAqIEBwYXJhbSB7c3RyaW5nIHwgbnVtYmVyfSBpZFxyXG4gICAqIEByZXR1cm5zIHt2b2lkfVxyXG4gICAqL1xyXG4gICBjb25zdCBjcmVhdGVRdWVyeUZvckRhdGFCeUlkID0gaWQgPT4gYFske2RhdGFBdHRyaWJ1dGVOYW1lfSA9IFwiJHtpZH1cIl1gO1xyXG5cclxuICAvKipcclxuICAgKiBAcGFyYW0ge3N0cmluZyB8IG51bWJlcn0gaWRcclxuICAgKiBAcmV0dXJucyB7dm9pZH1cclxuICAgKi9cclxuICBjb25zdCBjcmVhdGVRdWVyeUZvckRhdGFTZWN0aW9uQnlJZCA9IGlkID0+IGBbJHtkYXRhU2VjdGlvbkF0dHJpYnV0ZU5hbWV9ID0gXCIke2lkfVwiXWA7XHJcblxyXG4gICAvKipcclxuICAgKiBAcGFyYW0ge3N0cmluZyB8IG51bWJlcn0gaWRcclxuICAgKiBAcmV0dXJucyB7dm9pZH1cclxuICAgKi9cclxuICBjb25zdCBjcmVhdGVRdWVyeUZvckRhdGFUaXRsZUJ5SWQgPSBpZCA9PiBgWyR7ZGF0YVRpdGxlQXR0cmlidXRlTmFtZX0gPSBcIiR7aWR9XCJdYDtcclxuXHJcbiAgLyoqXHJcbiAgICogQHBhcmFtIHtIVE1MRWxlbWVudH0gZWxlbWVudFxyXG4gICAqIEByZXR1cm5zIHt2b2lkfSBcclxuICAgKi9cclxuICBjb25zdCBoaWRlRWxlbWVudCA9IGVsZW1lbnQgPT4ge1xyXG4gICAgZWxlbWVudC5zdHlsZS5kaXNwbGF5ID0gXCJub25lXCI7XHJcbiAgfTtcclxuXHJcbiAgLyoqXHJcbiAgICogQHBhcmFtIHtIVE1MRWxlbWVudH0gZWxlbWVudFxyXG4gICAqIEByZXR1cm5zIHt2b2lkfSBcclxuICAgKi9cclxuICBjb25zdCBzaG93RWxlbWVudCA9IGVsZW1lbnQgPT4ge1xyXG4gICAgZWxlbWVudC5zdHlsZS5kaXNwbGF5ID0gXCJibG9ja1wiO1xyXG4gIH07XHJcblxyXG4gIGNvbnN0IGRhdGFzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChhdHRyaWJ1dGVOYW1lVG9RdWVyeShkYXRhQXR0cmlidXRlTmFtZSkpO1xyXG4gIGNvbnN0IGRhdGFTZWN0aW9ucyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoYXR0cmlidXRlTmFtZVRvUXVlcnkoZGF0YVNlY3Rpb25BdHRyaWJ1dGVOYW1lKSk7XHJcbiAgY29uc3QgZGF0YVRyaWdnZXJzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChhdHRyaWJ1dGVOYW1lVG9RdWVyeShkYXRhVHJpZ2dlckF0dHJpYnV0ZU5hbWUpKTtcclxuICBjb25zdCBkYXRhVGl0bGVzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChhdHRyaWJ1dGVOYW1lVG9RdWVyeShkYXRhVGl0bGVBdHRyaWJ1dGVOYW1lKSk7XHJcblxyXG4gIGRhdGFzLmZvckVhY2goZGF0YSA9PiBoaWRlRWxlbWVudChkYXRhKSk7XHJcbiAgZGF0YVNlY3Rpb25zLmZvckVhY2goZGF0YVNlY3Rpb24gPT4gaGlkZUVsZW1lbnQoZGF0YVNlY3Rpb24pKTtcclxuICBkYXRhVGl0bGVzLmZvckVhY2goZGF0YVRpdGxlID0+IGRhdGFUaXRsZS5jbGFzc0xpc3QucmVtb3ZlKGdvbGRCZ0NsYXNzKSk7XHJcblxyXG4gIGRhdGFUcmlnZ2Vycy5mb3JFYWNoKGRhdGFUcmlnZ2VyID0+IHtcclxuICAgIGRhdGFUcmlnZ2VyLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XHJcbiAgICAgIGRhdGFzLmZvckVhY2goZGF0YSA9PiBoaWRlRWxlbWVudChkYXRhKSk7XHJcbiAgICAgIGRhdGFTZWN0aW9ucy5mb3JFYWNoKGRhdGFTZWN0aW9uID0+IGhpZGVFbGVtZW50KGRhdGFTZWN0aW9uKSk7XHJcbiAgICAgIGRhdGFUaXRsZXMuZm9yRWFjaChkYXRhVGl0bGUgPT4gZGF0YVRpdGxlLmNsYXNzTGlzdC5yZW1vdmUoZ29sZEJnQ2xhc3MpKTtcclxuXHJcbiAgICAgIHNob3dFbGVtZW50KFxyXG4gICAgICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXHJcbiAgICAgICAgICBjcmVhdGVRdWVyeUZvckRhdGFCeUlkKGRhdGFUcmlnZ2VyLmdldEF0dHJpYnV0ZShkYXRhVHJpZ2dlckF0dHJpYnV0ZU5hbWUpKVxyXG4gICAgICAgIClcclxuICAgICAgKTtcclxuICAgICAgc2hvd0VsZW1lbnQoXHJcbiAgICAgICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcihjcmVhdGVRdWVyeUZvckRhdGFTZWN0aW9uQnlJZChcclxuICAgICAgICAgIGRhdGFUcmlnZ2VyLmdldEF0dHJpYnV0ZShkYXRhU2VjdGlvblRyaWdnZXJBdHRyaWJ1dGVOYW1lKVxyXG4gICAgICAgICkpXHJcbiAgICAgICk7XHJcbiAgICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoY3JlYXRlUXVlcnlGb3JEYXRhVGl0bGVCeUlkKFxyXG4gICAgICAgIGRhdGFUcmlnZ2VyLmdldEF0dHJpYnV0ZShkYXRhVHJpZ2dlckF0dHJpYnV0ZU5hbWUpXHJcbiAgICAgICkpLmZvckVhY2goZGF0YVRpdGxlID0+IGRhdGFUaXRsZS5jbGFzc0xpc3QuYWRkKGdvbGRCZ0NsYXNzKSk7XHJcbiAgICB9KTtcclxuICB9KTtcclxufSkoKTsiLCIoKCkgPT4ge1xuICBjb25zdCBmZWVkYmFjayA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuRmVlZGJhY2tcIik7XG4gIGNvbnN0IGZlZWRiYWNrVHJpZ2dlcnMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKFwiLkZlZWRiYWNrX19UcmlnZ2VyXCIpO1xuICBjb25zdCBmZWVkYmFja1NjcmVlbmxvY2sgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLkZlZWRiYWNrX19TY3JlZW5sb2NrXCIpO1xuICBjb25zdCBmZWVkYmFja0Nsb3NlVHJpZ2dlciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuRmVlZGJhY2tfX0Nsb3NlVHJpZ2dlclwiKTtcblxuICBjb25zdCBmZWVkYmFja0FjdGl2ZUNsYXNzID0gXCJGZWVkYmFjay0tQWN0aXZlXCI7XG5cbiAgaWYgKCFmZWVkYmFjayB8fCAhZmVlZGJhY2tUcmlnZ2VycyB8fCAhZmVlZGJhY2tTY3JlZW5sb2NrIHx8ICFmZWVkYmFja0Nsb3NlVHJpZ2dlcikge1xuICAgIHJldHVybjtcbiAgfVxuXG4gIGZlZWRiYWNrVHJpZ2dlcnMuZm9yRWFjaChmZWVkYmFja1RyaWdnZXIgPT4ge1xuICAgIGZlZWRiYWNrVHJpZ2dlci5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xuICAgICAgZmVlZGJhY2suY2xhc3NMaXN0LmFkZChmZWVkYmFja0FjdGl2ZUNsYXNzKTtcbiAgICB9KTtcbiAgfSk7XG5cbiAgZmVlZGJhY2tTY3JlZW5sb2NrLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XG4gICAgZmVlZGJhY2suY2xhc3NMaXN0LnJlbW92ZShmZWVkYmFja0FjdGl2ZUNsYXNzKTtcbiAgfSk7XG5cbiAgZmVlZGJhY2tDbG9zZVRyaWdnZXIuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcbiAgICBmZWVkYmFjay5jbGFzc0xpc3QucmVtb3ZlKGZlZWRiYWNrQWN0aXZlQ2xhc3MpO1xuICB9KTtcbn0pKCk7XG4iLCIoKCkgPT4ge1xuICBjb25zdCBkYXRhVHJpZ2dlckF0dHJpYnV0ZU5hbWUgPSBcImhvdGVsLXRhYi10cmlnZ2VyLWluZGV4XCI7XG4gIGNvbnN0IGRhdGFBdHRyaWJ1dGVOYW1lID0gXCJob3RlbC1kYXRhXCI7XG4gIGNvbnN0IGdvbGRCZ0NsYXNzID0gXCJIb3RlbFBhZ2VfX1RhYkxpbmstLUFjdGl2ZVwiO1xuICBcbiAgY29uc3QgYXR0cmlidXRlTmFtZVRvUXVlcnkgPSBhdHRyaWJ1dGVOYW1lID0+IGBbJHthdHRyaWJ1dGVOYW1lfV1gO1xuICBjb25zdCBjcmVhdGVRdWVyeUZvckRhdGFCeUlkID0gaWQgPT4gYFske2RhdGFBdHRyaWJ1dGVOYW1lfSA9IFwiJHtpZH1cIl1gO1xuICBjb25zdCBjcmVhdGVRdWVyeUZvclRyaWdnZXJCeUlkID0gaWQgPT4gYFske2RhdGFUcmlnZ2VyQXR0cmlidXRlTmFtZX0gPSBcIiR7aWR9XCJdYDtcbiAgY29uc3QgaGlkZUVsZW1lbnQgPSBlbGVtZW50ID0+IHsgZWxlbWVudC5zdHlsZS5kaXNwbGF5ID0gXCJub25lXCI7IH07XG4gIGNvbnN0IHNob3dFbGVtZW50ID0gZWxlbWVudCA9PiB7IGVsZW1lbnQuc3R5bGUuZGlzcGxheSA9IFwiYmxvY2tcIjsgfTtcblxuICBjb25zdCBkYXRhcyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoYXR0cmlidXRlTmFtZVRvUXVlcnkoZGF0YUF0dHJpYnV0ZU5hbWUpKTtcbiAgY29uc3QgZGF0YVRyaWdnZXJzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChhdHRyaWJ1dGVOYW1lVG9RdWVyeShkYXRhVHJpZ2dlckF0dHJpYnV0ZU5hbWUpKTtcblxuICBkYXRhcy5mb3JFYWNoKGRhdGEgPT4gaGlkZUVsZW1lbnQoZGF0YSkpO1xuXG4gIGRhdGFUcmlnZ2Vycy5mb3JFYWNoKGRhdGFUcmlnZ2VyID0+IHtcbiAgICBkYXRhVHJpZ2dlci5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xuICAgICAgZGF0YXMuZm9yRWFjaChkYXRhID0+IGhpZGVFbGVtZW50KGRhdGEpKTtcblxuICAgICAgZGF0YVRyaWdnZXJzLmZvckVhY2goZGF0YVRyaWdnZXIyID0+IHtcbiAgICAgICAgZGF0YVRyaWdnZXIyLmNsYXNzTGlzdC5yZW1vdmUoZ29sZEJnQ2xhc3MpO1xuICAgICAgfSk7XG5cbiAgICAgIGRhdGFUcmlnZ2VyLmNsYXNzTGlzdC5hZGQoZ29sZEJnQ2xhc3MpO1xuXG5cbiAgICAgIHNob3dFbGVtZW50KFxuICAgICAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFxuICAgICAgICAgIGNyZWF0ZVF1ZXJ5Rm9yRGF0YUJ5SWQoZGF0YVRyaWdnZXIuZ2V0QXR0cmlidXRlKGRhdGFUcmlnZ2VyQXR0cmlidXRlTmFtZSkpXG4gICAgICAgIClcbiAgICAgICk7XG4gICAgfSk7XG4gIH0pO1xufSkoKTsiLCIoKCkgPT4ge1xyXG4gIGNvbnN0IG1vYmlsZVNpZGViYXJFbGVtZW50ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5tb2JpbGUtc2lkZWJhclwiKTtcclxuICBjb25zdCBtb2JpbGVTaWRlYmFyVHJpZ2dlckVsZW1lbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLm1vYmlsZS1zaWRlYmFyLXRyaWdnZXJcIik7XHJcbiAgY29uc3QgbW9iaWxlU2lkZWJhckNsb3NlVHJpZ2dlckVsZW1lbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLm1vYmlsZS1zaWRlYmFyX19jbG9zZS10cmlnZ2VyXCIpO1xyXG4gIGNvbnN0IG1vYmlsZVNpZGViYXJTY3JlZW5sb2NrRWxlbWVudCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIubW9iaWxlLXNpZGViYXJfX3NjcmVlbmxvY2tcIik7XHJcbiAgY29uc3QgbW9iaWxlU2lkZWJhckl0ZW1FbGVtZW50cyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoXCIubW9iaWxlLXNpZGViYXJfX2l0ZW1cIik7XHJcblxyXG4gIGNvbnN0IG1vYmlsZVNpZGViYXJBY3RpdmVDbGFzcyA9IFwibW9iaWxlLXNpZGViYXItLWFjdGl2ZVwiO1xyXG5cclxuICBpZiAoXHJcbiAgICAhbW9iaWxlU2lkZWJhckVsZW1lbnQgXHJcbiAgICB8fCAhbW9iaWxlU2lkZWJhclRyaWdnZXJFbGVtZW50IFxyXG4gICAgfHwgIW1vYmlsZVNpZGViYXJDbG9zZVRyaWdnZXJFbGVtZW50IFxyXG4gICAgfHwgIW1vYmlsZVNpZGViYXJTY3JlZW5sb2NrRWxlbWVudFxyXG4gICAgfHwgbW9iaWxlU2lkZWJhckl0ZW1FbGVtZW50cy5sZW5ndGggPT09IDAgXHJcbiAgKSB7XHJcbiAgICByZXR1cm47XHJcbiAgfVxyXG5cclxuICBjb25zdCBvcGVuU2lkZWJhciA9ICgpID0+IHtcclxuICAgIGRvY3VtZW50LmJvZHkuc3R5bGUub3ZlcmZsb3cgPSBcImhpZGRlblwiO1xyXG4gICAgbW9iaWxlU2lkZWJhckVsZW1lbnQuY2xhc3NMaXN0LmFkZChtb2JpbGVTaWRlYmFyQWN0aXZlQ2xhc3MpO1xyXG4gIH07XHJcblxyXG4gIGNvbnN0IGNsb3NlU2lkZWJhciA9ICgpID0+IHtcclxuICAgIGRvY3VtZW50LmJvZHkuc3R5bGUub3ZlcmZsb3cgPSBcImF1dG9cIjtcclxuICAgIG1vYmlsZVNpZGViYXJFbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUobW9iaWxlU2lkZWJhckFjdGl2ZUNsYXNzKTtcclxuICB9O1xyXG5cclxuICBjb25zdCBoYW5kbGVSZXNpemUgPSAoKSA9PiB7XHJcbiAgICBjb25zdCBtb2JpbGVXaWR0aExpbWl0ID0gNzY5O1xyXG4gICAgXHJcbiAgICBpZiAod2luZG93LmlubmVyV2lkdGggPj0gbW9iaWxlV2lkdGhMaW1pdCkge1xyXG4gICAgICBjbG9zZVNpZGViYXIoKTtcclxuICAgIH1cclxuICB9O1xyXG5cclxuICBtb2JpbGVTaWRlYmFySXRlbUVsZW1lbnRzLmZvckVhY2gobW9iaWxlU2lkZWJhckl0ZW1FbGVtZW50ID0+IHtcclxuICAgIGNvbnN0IHRyaWdnZXIgPSBtb2JpbGVTaWRlYmFySXRlbUVsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5tb2JpbGUtc2lkZWJhcl9fc3VibWVudS10cmlnZ2VyXCIpO1xyXG4gICAgY29uc3Qgc3VibWVudSA9IG1vYmlsZVNpZGViYXJJdGVtRWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLm1vYmlsZS1zaWRlYmFyX19zdWJtZW51XCIpO1xyXG4gICAgXHJcbiAgICB0cmlnZ2VyLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XHJcbiAgICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoXCIubW9iaWxlLXNpZGViYXJfX3N1Ym1lbnVcIilcclxuICAgICAgICAuZm9yRWFjaChzdWJtZW51RWFjaCA9PiB7XHJcbiAgICAgICAgICBpZiAoc3VibWVudUVhY2ggIT09IHN1Ym1lbnUpIHtcclxuICAgICAgICAgICAgc3VibWVudUVhY2guY2xhc3NMaXN0LnJlbW92ZShcIm1vYmlsZS1zaWRlYmFyX19zdWJtZW51LS1hY3RpdmVcIik7XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICAgIHN1Ym1lbnUuY2xhc3NMaXN0LnRvZ2dsZShcIm1vYmlsZS1zaWRlYmFyX19zdWJtZW51LS1hY3RpdmVcIik7XHJcbiAgICB9KTtcclxuICB9KTtcclxuXHJcbiAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoXCJyZXNpemVcIiwgaGFuZGxlUmVzaXplKTtcclxuICBtb2JpbGVTaWRlYmFyVHJpZ2dlckVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIG9wZW5TaWRlYmFyKTtcclxuICBtb2JpbGVTaWRlYmFyQ2xvc2VUcmlnZ2VyRWxlbWVudC5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgY2xvc2VTaWRlYmFyKTtcclxuICBtb2JpbGVTaWRlYmFyU2NyZWVubG9ja0VsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIGNsb3NlU2lkZWJhcik7XHJcbn0pKCk7XHJcblxyXG5cclxuKCgpID0+IHtcclxuICBjb25zdCBtb2JpbGVTaWRlYmFyRWxlbWVudCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuTW9iaWxlU2lkZWJhclwiKTtcclxuICBjb25zdCBtb2JpbGVTaWRlYmFyVHJpZ2dlckVsZW1lbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLm1vYmlsZS1zaWRlYmFyLXRyaWdnZXJcIik7XHJcbiAgY29uc3QgbW9iaWxlU2lkZWJhckNsb3NlVHJpZ2dlckVsZW1lbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLk1vYmlsZVNpZGViYXJfX0Nsb3NlVHJpZ2dlclwiKTtcclxuICBjb25zdCBtb2JpbGVTaWRlYmFyU2NyZWVubG9ja0VsZW1lbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLk1vYmlsZVNpZGViYXJfX1NjcmVlbkxvY2tcIik7XHJcbiAgY29uc3QgbW9iaWxlU2lkZWJhckl0ZW1FbGVtZW50cyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoXCIuTW9iaWxlU2lkZWJhcl9fU2Vjb25kQ29udGVudEl0ZW1cIik7XHJcblxyXG4gIGNvbnN0IG1vYmlsZVNpZGViYXJBY3RpdmVDbGFzcyA9IFwiTW9iaWxlU2lkZWJhci0tQWN0aXZlXCI7XHJcblxyXG4gIGlmIChcclxuICAgICFtb2JpbGVTaWRlYmFyRWxlbWVudCBcclxuICAgIHx8ICFtb2JpbGVTaWRlYmFyVHJpZ2dlckVsZW1lbnQgXHJcbiAgICB8fCAhbW9iaWxlU2lkZWJhckNsb3NlVHJpZ2dlckVsZW1lbnQgXHJcbiAgICB8fCAhbW9iaWxlU2lkZWJhclNjcmVlbmxvY2tFbGVtZW50XHJcbiAgICB8fCBtb2JpbGVTaWRlYmFySXRlbUVsZW1lbnRzLmxlbmd0aCA9PT0gMCBcclxuICApIHtcclxuICAgIHJldHVybjtcclxuICB9XHJcblxyXG4gIGNvbnN0IG9wZW5TaWRlYmFyID0gKCkgPT4ge1xyXG4gICAgZG9jdW1lbnQuYm9keS5zdHlsZS5vdmVyZmxvdyA9IFwiaGlkZGVuXCI7XHJcbiAgICBtb2JpbGVTaWRlYmFyRWxlbWVudC5jbGFzc0xpc3QuYWRkKG1vYmlsZVNpZGViYXJBY3RpdmVDbGFzcyk7XHJcbiAgfTtcclxuXHJcbiAgY29uc3QgY2xvc2VTaWRlYmFyID0gKCkgPT4ge1xyXG4gICAgZG9jdW1lbnQuYm9keS5zdHlsZS5vdmVyZmxvdyA9IFwiYXV0b1wiO1xyXG4gICAgbW9iaWxlU2lkZWJhckVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZShtb2JpbGVTaWRlYmFyQWN0aXZlQ2xhc3MpO1xyXG4gIH07XHJcblxyXG4gIGNvbnN0IGhhbmRsZVJlc2l6ZSA9ICgpID0+IHtcclxuICAgIGNvbnN0IG1vYmlsZVdpZHRoTGltaXQgPSA3Njk7XHJcbiAgICBcclxuICAgIGlmICh3aW5kb3cuaW5uZXJXaWR0aCA+PSBtb2JpbGVXaWR0aExpbWl0KSB7XHJcbiAgICAgIGNsb3NlU2lkZWJhcigpO1xyXG4gICAgfVxyXG4gIH07XHJcblxyXG4gIG1vYmlsZVNpZGViYXJJdGVtRWxlbWVudHMuZm9yRWFjaChtb2JpbGVTaWRlYmFySXRlbUVsZW1lbnQgPT4ge1xyXG4gICAgY29uc3QgdHJpZ2dlciA9IG1vYmlsZVNpZGViYXJJdGVtRWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLk1vYmlsZVNpZGViYXJfX1NlY29uZENvbnRlbnRTdWJtZW51VHJpZ2dlclwiKTtcclxuICAgIGNvbnN0IHN1Ym1lbnUgPSBtb2JpbGVTaWRlYmFySXRlbUVsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5Nb2JpbGVTaWRlYmFyX19TZWNvbmRDb250ZW50U3VibWVudVwiKTtcclxuICAgIFxyXG4gICAgdHJpZ2dlci5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xyXG4gICAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKFwiLk1vYmlsZVNpZGViYXJfX1NlY29uZENvbnRlbnRTdWJtZW51XCIpXHJcbiAgICAgICAgLmZvckVhY2goc3VibWVudUVhY2ggPT4ge1xyXG4gICAgICAgICAgaWYgKHN1Ym1lbnVFYWNoICE9PSBzdWJtZW51KSB7XHJcbiAgICAgICAgICAgIHN1Ym1lbnVFYWNoLmNsYXNzTGlzdC5yZW1vdmUoXCJNb2JpbGVTaWRlYmFyX19TZWNvbmRDb250ZW50U3VibWVudS0tQWN0aXZlXCIpO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgICBzdWJtZW51LmNsYXNzTGlzdC50b2dnbGUoXCJNb2JpbGVTaWRlYmFyX19TZWNvbmRDb250ZW50U3VibWVudS0tQWN0aXZlXCIpO1xyXG4gICAgfSk7XHJcbiAgfSk7XHJcblxyXG4gIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKFwicmVzaXplXCIsIGhhbmRsZVJlc2l6ZSk7XHJcbiAgbW9iaWxlU2lkZWJhclRyaWdnZXJFbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCBvcGVuU2lkZWJhcik7XHJcbiAgbW9iaWxlU2lkZWJhckNsb3NlVHJpZ2dlckVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIGNsb3NlU2lkZWJhcik7XHJcbiAgbW9iaWxlU2lkZWJhclNjcmVlbmxvY2tFbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCBjbG9zZVNpZGViYXIpO1xyXG59KSgpO1xyXG4iLCIoKCkgPT4ge1xyXG4gIGNvbnN0IGFjY29yZGlvblF1ZXJ5ID0gXCIucmgtYWNjb3JkaW9uXCI7XHJcbiAgY29uc3QgYWNjb3JkaW9uVHJpZ2dlclF1ZXJ5ID0gXCIucmgtYWNjb3JkaW9uX190cmlnZ2VyXCI7XHJcbiAgY29uc3QgYWNjb3JkaW9uQWN0aXZlQ2xhc3MgPSBcInJoLWFjY29yZGlvbi0tYWN0aXZlXCI7XHJcblxyXG4gIGNvbnN0IGFjY29yZGlvbkVsZW1lbnRzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChhY2NvcmRpb25RdWVyeSk7XHJcblxyXG4gIGlmICghYWNjb3JkaW9uRWxlbWVudHMpIHtcclxuICAgIHJldHVybjtcclxuICB9XHJcblxyXG4gIGFjY29yZGlvbkVsZW1lbnRzLmZvckVhY2goYWNjb3JkaW9uID0+IHtcclxuICAgIGFjY29yZGlvbi5xdWVyeVNlbGVjdG9yKGFjY29yZGlvblRyaWdnZXJRdWVyeSkuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcclxuICAgICAgYWNjb3JkaW9uLmNsYXNzTGlzdC50b2dnbGUoYWNjb3JkaW9uQWN0aXZlQ2xhc3MpO1xyXG4gICAgfSk7XHJcbiAgfSk7XHJcbn0pKCk7XHJcblxyXG4oKCkgPT4ge1xyXG4gIGNvbnN0IGFjY29yZGlvblF1ZXJ5ID0gXCIuUkhBY2NvcmRpb25cIjtcclxuICBjb25zdCBhY2NvcmRpb25UcmlnZ2VyUXVlcnkgPSBcIi5SSEFjY29yZGlvbl9fVHJpZ2dlclwiO1xyXG4gIGNvbnN0IGFjY29yZGlvbkFjdGl2ZUNsYXNzID0gXCJSSEFjY29yZGlvbi0tQWN0aXZlXCI7XHJcblxyXG4gIGNvbnN0IGFjY29yZGlvbkVsZW1lbnRzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChhY2NvcmRpb25RdWVyeSk7XHJcblxyXG4gIGlmICghYWNjb3JkaW9uRWxlbWVudHMpIHtcclxuICAgIHJldHVybjtcclxuICB9XHJcblxyXG4gIGFjY29yZGlvbkVsZW1lbnRzLmZvckVhY2goYWNjb3JkaW9uID0+IHtcclxuICAgIGFjY29yZGlvbi5xdWVyeVNlbGVjdG9yKGFjY29yZGlvblRyaWdnZXJRdWVyeSkuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcclxuICAgICAgYWNjb3JkaW9uLmNsYXNzTGlzdC50b2dnbGUoYWNjb3JkaW9uQWN0aXZlQ2xhc3MpO1xyXG4gICAgfSk7XHJcbiAgfSk7XHJcbn0pKCk7XHJcbiIsIigoKSA9PiB7XHJcbiAgY29uc3QgdG91clNlYXJjaEJ1dHRvbkVsZW1lbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnNlYXJjaC1mb3JtLXN3aXRjaF9fYnV0dG9uX3RvdXJcIik7XHJcbiAgY29uc3QgaG90ZWxTZWFyY2hCdXR0b25FbGVtZW50ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5zZWFyY2gtZm9ybS1zd2l0Y2hfX2J1dHRvbl9ob3RlbFwiKTtcclxuICBjb25zdCB0b3VyU2VhcmNoRm9ybUVsZW1lbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnNlYXJjaC1mb3JtLXN3aXRjaF9fZm9ybV90b3VyXCIpO1xyXG4gIGNvbnN0IGhvdGVsU2VhcmNoRm9ybUVsZW1lbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnNlYXJjaC1mb3JtLXN3aXRjaF9fZm9ybV9ob3RlbFwiKTtcclxuXHJcbiAgaWYgKFxyXG4gICAgIXRvdXJTZWFyY2hCdXR0b25FbGVtZW50IFxyXG4gICAgfHwgIWhvdGVsU2VhcmNoQnV0dG9uRWxlbWVudFxyXG4gICAgfHwgIXRvdXJTZWFyY2hGb3JtRWxlbWVudFxyXG4gICAgfHwgIWhvdGVsU2VhcmNoRm9ybUVsZW1lbnRcclxuICApIHtcclxuICAgIHJldHVybjtcclxuICB9XHJcblxyXG4gIGNvbnN0IGJ1dHRvbkFjdGl2ZUNsYXNzID0gXCJzZWFyY2gtZm9ybS1zd2l0Y2hfX2J1dHRvbi0tYWN0aXZlXCI7XHJcbiAgY29uc3QgZm9ybUFjdGl2ZUNsYXNzID0gXCJzZWFyY2gtZm9ybS1zd2l0Y2hfX2Zvcm0tLWFjdGl2ZVwiO1xyXG5cclxuICB0b3VyU2VhcmNoQnV0dG9uRWxlbWVudC5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xyXG4gICAgdG91clNlYXJjaEJ1dHRvbkVsZW1lbnQuY2xhc3NMaXN0LmFkZChidXR0b25BY3RpdmVDbGFzcyk7XHJcbiAgICB0b3VyU2VhcmNoRm9ybUVsZW1lbnQuY2xhc3NMaXN0LmFkZChmb3JtQWN0aXZlQ2xhc3MpO1xyXG4gICAgaG90ZWxTZWFyY2hCdXR0b25FbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUoYnV0dG9uQWN0aXZlQ2xhc3MpO1xyXG4gICAgaG90ZWxTZWFyY2hGb3JtRWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKGZvcm1BY3RpdmVDbGFzcyk7XHJcbiAgfSk7XHJcblxyXG4gIGhvdGVsU2VhcmNoQnV0dG9uRWxlbWVudC5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xyXG4gICAgaG90ZWxTZWFyY2hCdXR0b25FbGVtZW50LmNsYXNzTGlzdC5hZGQoYnV0dG9uQWN0aXZlQ2xhc3MpO1xyXG4gICAgaG90ZWxTZWFyY2hGb3JtRWxlbWVudC5jbGFzc0xpc3QuYWRkKGZvcm1BY3RpdmVDbGFzcyk7XHJcbiAgICB0b3VyU2VhcmNoQnV0dG9uRWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKGJ1dHRvbkFjdGl2ZUNsYXNzKTtcclxuICAgIHRvdXJTZWFyY2hGb3JtRWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKGZvcm1BY3RpdmVDbGFzcyk7XHJcbiAgfSk7XHJcbn0pKCk7XHJcbiIsImRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJET01Db250ZW50TG9hZGVkXCIsICgpID0+IHtcclxuICBjb25zdCBzbGlkZXJFbGVtZW50UXVlcnkgPSBcIi5Db3VudHJ5UGFnZV9fVGFic0NvbnRhaW5lci0tU2Nyb2xsXCI7XHJcblxyXG4gIGlmIChkb2N1bWVudC5xdWVyeVNlbGVjdG9yKHNsaWRlckVsZW1lbnRRdWVyeSkpIHtcclxuICAgIG5ldyBTcGxpZGUoc2xpZGVyRWxlbWVudFF1ZXJ5LCB7XHJcbiAgICAgIGF1dG9wbGF5OiBmYWxzZSxcclxuICAgICAgYXJyb3dzOiBmYWxzZSxcclxuICAgICAgcGFnaW5hdGlvbjogZmFsc2UsXHJcbiAgICAgIGF1dG9XaWR0aDogdHJ1ZSxcclxuICAgIH0pLm1vdW50KCk7XHJcbiAgfVxyXG59KTtcclxuXHJcbmRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJET01Db250ZW50TG9hZGVkXCIsICgpID0+IHtcclxuICBjb25zdCBzbGlkZXJFbGVtZW50UXVlcnkgPSBcIi5Ib3RlbFBhZ2VfX1RhYnNDb250YWluZXItLVNjcm9sbFwiO1xyXG5cclxuICBpZiAoZG9jdW1lbnQucXVlcnlTZWxlY3RvcihzbGlkZXJFbGVtZW50UXVlcnkpKSB7XHJcbiAgICBuZXcgU3BsaWRlKHNsaWRlckVsZW1lbnRRdWVyeSwge1xyXG4gICAgICBhdXRvcGxheTogZmFsc2UsXHJcbiAgICAgIGFycm93czogZmFsc2UsXHJcbiAgICAgIHBlck1vdmU6IDEsXHJcbiAgICAgIHBhZ2luYXRpb246IGZhbHNlLFxyXG4gICAgICBhdXRvV2lkdGg6IHRydWUsXHJcbiAgICB9KS5tb3VudCgpO1xyXG4gIH1cclxufSk7XHJcblxyXG5kb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKFwiRE9NQ29udGVudExvYWRlZFwiLCAoKSA9PiB7XHJcbiAgY29uc3Qgc2xpZGVyRWxlbWVudFF1ZXJ5ID0gXCIuSG90ZWxQYWdlX19QaG90b1NsaWRlclwiO1xyXG5cclxuICBpZiAoZG9jdW1lbnQucXVlcnlTZWxlY3RvcihzbGlkZXJFbGVtZW50UXVlcnkpKSB7XHJcbiAgICBuZXcgU3BsaWRlKHNsaWRlckVsZW1lbnRRdWVyeSwge1xyXG4gICAgICB0eXBlOiBcImxvb3BcIixcclxuICAgICAgYXV0b3BsYXk6IHRydWUsXHJcbiAgICAgIHBlclBhZ2U6IDUsXHJcbiAgICAgIGF1dG9XaWR0aDogdHJ1ZSxcclxuICAgICAgcGVyTW92ZTogMSxcclxuICAgICAgcGFnaW5hdGlvbjogZmFsc2UsXHJcbiAgICAgIGxhenlMb2FkOiBcIm5lYXJieVwiXHJcbiAgICB9KS5tb3VudCgpO1xyXG4gIH1cclxufSk7XHJcblxyXG5kb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKFwiRE9NQ29udGVudExvYWRlZFwiLCAoKSA9PiB7XHJcbiAgY29uc3Qgc2xpZGVyRWxlbWVudFF1ZXJ5ID0gXCIuYjJiLXRvcC1zbGlkZXJcIjtcclxuXHJcbiAgaWYgKGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3Ioc2xpZGVyRWxlbWVudFF1ZXJ5KSkge1xyXG4gICAgbmV3IFNwbGlkZShzbGlkZXJFbGVtZW50UXVlcnksIHtcclxuICAgICAgdHlwZTogXCJsb29wXCIsXHJcbiAgICAgIGF1dG9wbGF5OiB0cnVlLFxyXG4gICAgICBhcnJvd3M6IGZhbHNlXHJcbiAgICB9KS5tb3VudCgpO1xyXG4gIH1cclxufSk7XHJcblxyXG5kb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKFwiRE9NQ29udGVudExvYWRlZFwiLCAoKSA9PiB7XHJcbiAgY29uc3Qgc2xpZGVyRWxlbWVudFF1ZXJ5ID0gXCIud2l0aC15b3Utc2xpZGVyXCI7XHJcblxyXG4gIGlmIChkb2N1bWVudC5xdWVyeVNlbGVjdG9yKHNsaWRlckVsZW1lbnRRdWVyeSkpIHtcclxuICAgIG5ldyBTcGxpZGUoc2xpZGVyRWxlbWVudFF1ZXJ5LCB7XHJcbiAgICAgIHR5cGU6IFwibG9vcFwiLFxyXG4gICAgICBwYWdpbmF0aW9uOiBmYWxzZVxyXG4gICAgfSkubW91bnQoKTtcclxuICB9XHJcbn0pO1xyXG5cclxuZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcIkRPTUNvbnRlbnRMb2FkZWRcIiwgKCkgPT4ge1xyXG4gIGNvbnN0IHNsaWRlckVsZW1lbnRRdWVyeSA9IFwiLm91ci1ndWVzdHMtc2xpZGVyXCI7XHJcbiAgY29uc3Qgc2xpZGVyRWxlbWVudFF1ZXJ5TW9iaWxlID0gXCIub3VyLWd1ZXN0cy1zbGlkZXItLW1vYmlsZVwiO1xyXG5cclxuICBpZiAoZG9jdW1lbnQucXVlcnlTZWxlY3RvcihzbGlkZXJFbGVtZW50UXVlcnkpKSB7XHJcbiAgICBuZXcgU3BsaWRlKHNsaWRlckVsZW1lbnRRdWVyeSwge1xyXG4gICAgICB0eXBlOiBcImxvb3BcIixcclxuICAgICAgYXV0b3BsYXk6IHRydWUsXHJcbiAgICAgIGFycm93czogdHJ1ZSxcclxuICAgICAgcGFnaW5hdGlvbjogZmFsc2UsXHJcbiAgICAgIGdhcDogMjAsXHJcbiAgICAgIHBlclBhZ2U6IDNcclxuICAgIH0pLm1vdW50KCk7XHJcbiAgfVxyXG5cclxuICBpZiAoZG9jdW1lbnQucXVlcnlTZWxlY3RvcihzbGlkZXJFbGVtZW50UXVlcnlNb2JpbGUpKSB7XHJcbiAgICBuZXcgU3BsaWRlKHNsaWRlckVsZW1lbnRRdWVyeU1vYmlsZSwge1xyXG4gICAgICB0eXBlOiBcImxvb3BcIixcclxuICAgICAgYXV0b3BsYXk6IHRydWUsXHJcbiAgICAgIGFycm93czogdHJ1ZSxcclxuICAgICAgcGFnaW5hdGlvbjogZmFsc2UsXHJcbiAgICAgIHBlclBhZ2U6IDFcclxuICAgIH0pLm1vdW50KCk7XHJcbiAgfVxyXG59KTtcclxuXHJcbmRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJET01Db250ZW50TG9hZGVkXCIsICgpID0+IHtcclxuICBjb25zdCBzbGlkZXJFbGVtZW50UXVlcnkgPSBcIi5vdXItZ29vZHMtc2xpZGVyXCI7XHJcblxyXG4gIGlmIChkb2N1bWVudC5xdWVyeVNlbGVjdG9yKHNsaWRlckVsZW1lbnRRdWVyeSkpIHtcclxuICAgIG5ldyBTcGxpZGUoc2xpZGVyRWxlbWVudFF1ZXJ5LCB7XHJcbiAgICAgIHR5cGU6IFwibG9vcFwiLFxyXG4gICAgICBhdXRvcGxheTogZmFsc2UsXHJcbiAgICAgIGFycm93czogZmFsc2UsXHJcbiAgICAgIHBlclBhZ2U6IDFcclxuICAgIH0pLm1vdW50KCk7XHJcbiAgfVxyXG59KTtcclxuXHJcbmRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJET01Db250ZW50TG9hZGVkXCIsICgpID0+IHtcclxuICBjb25zdCBzbGlkZXJFbGVtZW50UXVlcnkgPSBcIi5iMmMtYmxvZy1zbGlkZXJcIjtcclxuICBjb25zdCBzbGlkZXJFbGVtZW50UXVlcnlNb2JpbGUgPSBcIi5iMmMtYmxvZy1zbGlkZXItLW1vYmlsZVwiO1xyXG5cclxuICBpZiAoZG9jdW1lbnQucXVlcnlTZWxlY3RvcihzbGlkZXJFbGVtZW50UXVlcnkpKSB7XHJcbiAgICBuZXcgU3BsaWRlKHNsaWRlckVsZW1lbnRRdWVyeSwge1xyXG4gICAgICB0eXBlOiBcImxvb3BcIixcclxuICAgICAgYXV0b3BsYXk6IGZhbHNlLFxyXG4gICAgICBhcnJvd3M6IHRydWUsXHJcbiAgICAgIHBhZ2luYXRpb246IGZhbHNlLFxyXG4gICAgICBnYXA6IDIwLFxyXG4gICAgICBwZXJQYWdlOiA0XHJcbiAgICB9KS5tb3VudCgpO1xyXG4gIH1cclxuXHJcbiAgaWYgKGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3Ioc2xpZGVyRWxlbWVudFF1ZXJ5TW9iaWxlKSkge1xyXG4gICAgbmV3IFNwbGlkZShzbGlkZXJFbGVtZW50UXVlcnlNb2JpbGUsIHtcclxuICAgICAgdHlwZTogXCJsb29wXCIsXHJcbiAgICAgIGF1dG9wbGF5OiB0cnVlLFxyXG4gICAgICBhcnJvd3M6IHRydWUsXHJcbiAgICAgIHBhZ2luYXRpb246IGZhbHNlLFxyXG4gICAgICBwZXJQYWdlOiAxXHJcbiAgICB9KS5tb3VudCgpO1xyXG4gIH1cclxufSk7XHJcblxyXG4iXX0=
