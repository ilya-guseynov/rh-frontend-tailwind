"use strict";

(function () {
  var b2cMenuQuery = ".b2c-menu";
  var b2cMenuContentQuery = ".b2c-menu__content";
  var b2cTriggerQuery = ".b2c-menu__trigger";
  var b2cMenuActiveClass = "b2c-menu--active";
  var b2cMenuToRightClass = "b2c-menu--to-right";
  var b2cMenuElement = document.querySelector(b2cMenuQuery);
  var b2cMenuContentElement = document.querySelector(b2cMenuContentQuery);
  var b2cTriggerElement = document.querySelector(b2cTriggerQuery);

  if (!b2cMenuElement && !b2cMenuContentElement && !b2cTriggerElement) {
    return;
  }

  b2cMenuContentElement.style.animation = "none";

  var handleScroll = function handleScroll() {
    if (window.scrollY - 232 > 0) {
      b2cMenuElement.classList.add(b2cMenuToRightClass);
    } else {
      b2cMenuElement.classList.remove(b2cMenuToRightClass);
    }
  };

  var toggleMenu = function toggleMenu() {
    b2cMenuContentElement.style.animation = "";
    b2cMenuElement.classList.toggle(b2cMenuActiveClass);
  };

  b2cTriggerElement.addEventListener("click", toggleMenu);
  window.addEventListener("scroll", handleScroll);
})();

(function () {
  var mobileSidebarElement = document.querySelector(".mobile-sidebar");
  var mobileSidebarTriggerElement = document.querySelector(".mobile-sidebar-trigger");
  var mobileSidebarCloseTriggerElement = document.querySelector(".mobile-sidebar__close-trigger");
  var mobileSidebarScreenlockElement = document.querySelector(".mobile-sidebar__screenlock");
  var mobileSidebarItemElements = document.querySelectorAll(".mobile-sidebar__item");
  var mobileSidebarActiveClass = "mobile-sidebar--active";

  if (!mobileSidebarElement || !mobileSidebarTriggerElement || !mobileSidebarCloseTriggerElement || !mobileSidebarScreenlockElement || mobileSidebarItemElements.length === 0) {
    return;
  }

  var openSidebar = function openSidebar() {
    document.body.style.overflow = "hidden";
    mobileSidebarElement.classList.add(mobileSidebarActiveClass);
  };

  var closeSidebar = function closeSidebar() {
    document.body.style.overflow = "auto";
    mobileSidebarElement.classList.remove(mobileSidebarActiveClass);
  };

  var handleResize = function handleResize() {
    var mobileWidthLimit = 769;

    if (window.innerWidth >= mobileWidthLimit) {
      closeSidebar();
    }
  };

  mobileSidebarItemElements.forEach(function (mobileSidebarItemElement) {
    var trigger = mobileSidebarItemElement.querySelector(".mobile-sidebar__submenu-trigger");
    var submenu = mobileSidebarItemElement.querySelector(".mobile-sidebar__submenu");
    trigger.addEventListener("click", function () {
      document.querySelectorAll(".mobile-sidebar__submenu").forEach(function (submenuEach) {
        if (submenuEach !== submenu) {
          submenuEach.classList.remove("mobile-sidebar__submenu--active");
        }
      });
      submenu.classList.toggle("mobile-sidebar__submenu--active");
    });
  });
  window.addEventListener("resize", handleResize);
  mobileSidebarTriggerElement.addEventListener("click", openSidebar);
  mobileSidebarCloseTriggerElement.addEventListener("click", closeSidebar);
  mobileSidebarScreenlockElement.addEventListener("click", closeSidebar);
})();

(function () {
  var accordionQuery = ".rh-accordion";
  var accordionTriggerQuery = ".rh-accordion__trigger";
  var accordionActiveClass = "rh-accordion--active";
  var accordionElements = document.querySelectorAll(accordionQuery);

  if (!accordionElements) {
    return;
  }

  accordionElements.forEach(function (accordion) {
    accordion.querySelector(accordionTriggerQuery).addEventListener("click", function () {
      accordion.classList.toggle(accordionActiveClass);
    });
  });
})();

(function () {
  var tourSearchButtonElement = document.querySelector(".search-form-switch__button_tour");
  var hotelSearchButtonElement = document.querySelector(".search-form-switch__button_hotel");
  var tourSearchFormElement = document.querySelector(".search-form-switch__form_tour");
  var hotelSearchFormElement = document.querySelector(".search-form-switch__form_hotel");

  if (!tourSearchButtonElement || !hotelSearchButtonElement || !tourSearchFormElement || !hotelSearchFormElement) {
    return;
  }

  var buttonActiveClass = "search-form-switch__button--active";
  var formActiveClass = "search-form-switch__form--active";
  tourSearchButtonElement.addEventListener("click", function () {
    tourSearchButtonElement.classList.add(buttonActiveClass);
    tourSearchFormElement.classList.add(formActiveClass);
    hotelSearchButtonElement.classList.remove(buttonActiveClass);
    hotelSearchFormElement.classList.remove(formActiveClass);
  });
  hotelSearchButtonElement.addEventListener("click", function () {
    hotelSearchButtonElement.classList.add(buttonActiveClass);
    hotelSearchFormElement.classList.add(formActiveClass);
    tourSearchButtonElement.classList.remove(buttonActiveClass);
    tourSearchFormElement.classList.remove(formActiveClass);
  });
})();

document.addEventListener("DOMContentLoaded", function () {
  var sliderElementQuery = ".b2b-top-slider";

  if (document.querySelector(sliderElementQuery)) {
    new Splide(sliderElementQuery, {
      type: "loop",
      autoplay: true,
      arrows: false
    }).mount();
  }
});
document.addEventListener("DOMContentLoaded", function () {
  var sliderElementQuery = ".with-you-slider";

  if (document.querySelector("sliderElementQuery")) {
    new Splide(sliderElementQuery, {
      type: "loop",
      pagination: false
    }).mount();
  }
});
document.addEventListener("DOMContentLoaded", function () {
  var sliderElementQuery = ".our-guests-slider";
  var sliderElementQueryMobile = ".our-guests-slider--mobile";

  if (document.querySelector(sliderElementQuery)) {
    new Splide(sliderElementQuery, {
      type: "loop",
      autoplay: true,
      arrows: true,
      pagination: false,
      gap: 20,
      perPage: 3
    }).mount();
  }

  if (document.querySelector(sliderElementQueryMobile)) {
    new Splide(sliderElementQueryMobile, {
      type: "loop",
      autoplay: true,
      arrows: true,
      pagination: false,
      perPage: 1
    }).mount();
  }
});
document.addEventListener("DOMContentLoaded", function () {
  var sliderElementQuery = ".our-goods-slider";

  if (document.querySelector(sliderElementQuery)) {
    new Splide(sliderElementQuery, {
      type: "loop",
      autoplay: false,
      arrows: false,
      perPage: 1
    }).mount();
  }
});
document.addEventListener("DOMContentLoaded", function () {
  var sliderElementQuery = ".b2c-blog-slider";
  var sliderElementQueryMobile = ".b2c-blog-slider--mobile";

  if (document.querySelector(sliderElementQuery)) {
    new Splide(sliderElementQuery, {
      type: "loop",
      autoplay: false,
      arrows: true,
      pagination: false,
      gap: 20,
      perPage: 4
    }).mount();
  }

  if (document.querySelector(sliderElementQueryMobile)) {
    new Splide(sliderElementQueryMobile, {
      type: "loop",
      autoplay: true,
      arrows: true,
      pagination: false,
      perPage: 1
    }).mount();
  }
});
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImIyYy1tZW51LmpzIiwibW9iaWxlLXNpZGViYXIuanMiLCJyaC1hY2NvcmRpb24uanMiLCJzZWFyY2gtZnJvbS1zd2l0Y2guanMiLCJzcGxpZGUtaW5pdGlhdG9yLmpzIl0sIm5hbWVzIjpbImIyY01lbnVRdWVyeSIsImIyY01lbnVDb250ZW50UXVlcnkiLCJiMmNUcmlnZ2VyUXVlcnkiLCJiMmNNZW51QWN0aXZlQ2xhc3MiLCJiMmNNZW51VG9SaWdodENsYXNzIiwiYjJjTWVudUVsZW1lbnQiLCJkb2N1bWVudCIsInF1ZXJ5U2VsZWN0b3IiLCJiMmNNZW51Q29udGVudEVsZW1lbnQiLCJiMmNUcmlnZ2VyRWxlbWVudCIsInN0eWxlIiwiYW5pbWF0aW9uIiwiaGFuZGxlU2Nyb2xsIiwid2luZG93Iiwic2Nyb2xsWSIsImNsYXNzTGlzdCIsImFkZCIsInJlbW92ZSIsInRvZ2dsZU1lbnUiLCJ0b2dnbGUiLCJhZGRFdmVudExpc3RlbmVyIiwibW9iaWxlU2lkZWJhckVsZW1lbnQiLCJtb2JpbGVTaWRlYmFyVHJpZ2dlckVsZW1lbnQiLCJtb2JpbGVTaWRlYmFyQ2xvc2VUcmlnZ2VyRWxlbWVudCIsIm1vYmlsZVNpZGViYXJTY3JlZW5sb2NrRWxlbWVudCIsIm1vYmlsZVNpZGViYXJJdGVtRWxlbWVudHMiLCJxdWVyeVNlbGVjdG9yQWxsIiwibW9iaWxlU2lkZWJhckFjdGl2ZUNsYXNzIiwibGVuZ3RoIiwib3BlblNpZGViYXIiLCJib2R5Iiwib3ZlcmZsb3ciLCJjbG9zZVNpZGViYXIiLCJoYW5kbGVSZXNpemUiLCJtb2JpbGVXaWR0aExpbWl0IiwiaW5uZXJXaWR0aCIsImZvckVhY2giLCJtb2JpbGVTaWRlYmFySXRlbUVsZW1lbnQiLCJ0cmlnZ2VyIiwic3VibWVudSIsInN1Ym1lbnVFYWNoIiwiYWNjb3JkaW9uUXVlcnkiLCJhY2NvcmRpb25UcmlnZ2VyUXVlcnkiLCJhY2NvcmRpb25BY3RpdmVDbGFzcyIsImFjY29yZGlvbkVsZW1lbnRzIiwiYWNjb3JkaW9uIiwidG91clNlYXJjaEJ1dHRvbkVsZW1lbnQiLCJob3RlbFNlYXJjaEJ1dHRvbkVsZW1lbnQiLCJ0b3VyU2VhcmNoRm9ybUVsZW1lbnQiLCJob3RlbFNlYXJjaEZvcm1FbGVtZW50IiwiYnV0dG9uQWN0aXZlQ2xhc3MiLCJmb3JtQWN0aXZlQ2xhc3MiLCJzbGlkZXJFbGVtZW50UXVlcnkiLCJTcGxpZGUiLCJ0eXBlIiwiYXV0b3BsYXkiLCJhcnJvd3MiLCJtb3VudCIsInBhZ2luYXRpb24iLCJzbGlkZXJFbGVtZW50UXVlcnlNb2JpbGUiLCJnYXAiLCJwZXJQYWdlIl0sIm1hcHBpbmdzIjoiOztBQUFBLENBQUEsWUFBQTtBQUNBLE1BQUFBLFlBQUEsR0FBQSxXQUFBO0FBQ0EsTUFBQUMsbUJBQUEsR0FBQSxvQkFBQTtBQUNBLE1BQUFDLGVBQUEsR0FBQSxvQkFBQTtBQUVBLE1BQUFDLGtCQUFBLEdBQUEsa0JBQUE7QUFDQSxNQUFBQyxtQkFBQSxHQUFBLG9CQUFBO0FBRUEsTUFBQUMsY0FBQSxHQUFBQyxRQUFBLENBQUFDLGFBQUEsQ0FBQVAsWUFBQSxDQUFBO0FBQ0EsTUFBQVEscUJBQUEsR0FBQUYsUUFBQSxDQUFBQyxhQUFBLENBQUFOLG1CQUFBLENBQUE7QUFDQSxNQUFBUSxpQkFBQSxHQUFBSCxRQUFBLENBQUFDLGFBQUEsQ0FBQUwsZUFBQSxDQUFBOztBQUVBLE1BQUEsQ0FBQUcsY0FBQSxJQUFBLENBQUFHLHFCQUFBLElBQUEsQ0FBQUMsaUJBQUEsRUFBQTtBQUNBO0FBQ0E7O0FBRUFELEVBQUFBLHFCQUFBLENBQUFFLEtBQUEsQ0FBQUMsU0FBQSxHQUFBLE1BQUE7O0FBRUEsTUFBQUMsWUFBQSxHQUFBLFNBQUFBLFlBQUEsR0FBQTtBQUNBLFFBQUFDLE1BQUEsQ0FBQUMsT0FBQSxHQUFBLEdBQUEsR0FBQSxDQUFBLEVBQUE7QUFDQVQsTUFBQUEsY0FBQSxDQUFBVSxTQUFBLENBQUFDLEdBQUEsQ0FBQVosbUJBQUE7QUFDQSxLQUZBLE1BRUE7QUFDQUMsTUFBQUEsY0FBQSxDQUFBVSxT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QUE2QyxrQkFBQSxDQUFBLEVBQUE7QUFDQSxRQUFBQyxNQUFBLENBQUFELGtCQUFBLEVBQUE7QUFDQUUsTUFBQUEsSUFBQSxFQUFBLE1BREE7QUFFQUMsTUFBQUEsUUFBQSxFQUFBLEtBRkE7QUFHQUMsTUFBQUEsTUFBQSxFQUFBLEtBSEE7QUFJQUssTUFBQUEsT0FBQSxFQUFBO0FBSkEsS0FBQSxFQUtBSixLQUxBO0FBTUE7QUFDQSxDQVhBO0FBYUFuRCxRQUFBLENBQUFjLGdCQUFBLENBQUEsa0JBQUEsRUFBQSxZQUFBO0FBQ0EsTUFBQWdDLGtCQUFBLEdBQUEsa0JBQUE7QUFDQSxNQUFBTyx3QkFBQSxHQUFBLDBCQUFBOztBQUVBLE1BQUFyRCxRQUFBLENBQUFDLGFBQUEsQ0FBQTZDLGtCQUFBLENBQUEsRUFBQTtBQUNBLFFBQUFDLE1BQUEsQ0FBQUQsa0JBQUEsRUFBQTtBQUNBRSxNQUFBQSxJQUFBLEVBQUEsTUFEQTtBQUVBQyxNQUFBQSxRQUFBLEVBQUEsS0FGQTtBQUdBQyxNQUFBQSxNQUFBLEVBQUEsSUFIQTtBQUlBRSxNQUFBQSxVQUFBLEVBQUEsS0FKQTtBQUtBRSxNQUFBQSxHQUFBLEVBQUEsRUFMQTtBQU1BQyxNQUFBQSxPQUFBLEVBQUE7QUFOQSxLQUFBLEVBT0FKLEtBUEE7QUFRQTs7QUFFQSxNQUFBbkQsUUFBQSxDQUFBQyxhQUFBLENBQUFvRCx3QkFBQSxDQUFBLEVBQUE7QUFDQSxRQUFBTixNQUFBLENBQUFNLHdCQUFBLEVBQUE7QUFDQUwsTUFBQUEsSUFBQSxFQUFBLE1BREE7QUFFQUMsTUFBQUEsUUFBQSxFQUFBLElBRkE7QUFHQUMsTUFBQUEsTUFBQSxFQUFBLElBSEE7QUFJQUUsTUFBQUEsVUFBQSxFQUFBLEtBSkE7QUFLQUcsTUFBQUEsT0FBQSxFQUFBO0FBTEEsS0FBQSxFQU1BSixLQU5BO0FBT0E7QUFDQSxDQXhCQSIsImZpbGUiOiJjdXN0b21lci5qcyIsInNvdXJjZXNDb250ZW50IjpbIigoKSA9PiB7XHJcbiAgY29uc3QgYjJjTWVudVF1ZXJ5ID0gXCIuYjJjLW1lbnVcIjtcclxuICBjb25zdCBiMmNNZW51Q29udGVudFF1ZXJ5ID0gXCIuYjJjLW1lbnVfX2NvbnRlbnRcIjtcclxuICBjb25zdCBiMmNUcmlnZ2VyUXVlcnkgPSBcIi5iMmMtbWVudV9fdHJpZ2dlclwiO1xyXG5cclxuICBjb25zdCBiMmNNZW51QWN0aXZlQ2xhc3MgPSBcImIyYy1tZW51LS1hY3RpdmVcIjtcclxuICBjb25zdCBiMmNNZW51VG9SaWdodENsYXNzID0gXCJiMmMtbWVudS0tdG8tcmlnaHRcIjtcclxuXHJcbiAgY29uc3QgYjJjTWVudUVsZW1lbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGIyY01lbnVRdWVyeSk7XHJcbiAgY29uc3QgYjJjTWVudUNvbnRlbnRFbGVtZW50ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihiMmNNZW51Q29udGVudFF1ZXJ5KTtcclxuICBjb25zdCBiMmNUcmlnZ2VyRWxlbWVudCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoYjJjVHJpZ2dlclF1ZXJ5KTtcclxuXHJcbiAgaWYgKCFiMmNNZW51RWxlbWVudCAmJiAhYjJjTWVudUNvbnRlbnRFbGVtZW50ICYmICFiMmNUcmlnZ2VyRWxlbWVudCkge1xyXG4gICAgcmV0dXJuO1xyXG4gIH1cclxuXHJcbiAgYjJjTWVudUNvbnRlbnRFbGVtZW50LnN0eWxlLmFuaW1hdGlvbiA9IFwibm9uZVwiO1xyXG4gIFxyXG4gIGNvbnN0IGhhbmRsZVNjcm9sbCA9ICgpID0+IHtcclxuICAgIGlmICh3aW5kb3cuc2Nyb2xsWSAtIDIzMiA+IDApIHtcclxuICAgICAgYjJjTWVudUVsZW1lbnQuY2xhc3NMaXN0LmFkZChiMmNNZW51VG9SaWdodENsYXNzKTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIGIyY01lbnVFbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUoYjJjTWVudVRvUmlnaHRDbGFzcyk7XHJcbiAgICB9XHJcbiAgfTtcclxuXHJcbiAgY29uc3QgdG9nZ2xlTWVudSA9ICgpID0+IHtcclxuICAgIGIyY01lbnVDb250ZW50RWxlbWVudC5zdHlsZS5hbmltYXRpb24gPSBcIlwiO1xyXG4gICAgYjJjTWVudUVsZW1lbnQuY2xhc3NMaXN0LnRvZ2dsZShiMmNNZW51QWN0aXZlQ2xhc3MpO1xyXG4gIH07XHJcblxyXG4gIGIyY1RyaWdnZXJFbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCB0b2dnbGVNZW51KTtcclxuICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcihcInNjcm9sbFwiLCBoYW5kbGVTY3JvbGwpO1xyXG59KSgpOyIsIigoKSA9PiB7XHJcbiAgY29uc3QgbW9iaWxlU2lkZWJhckVsZW1lbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLm1vYmlsZS1zaWRlYmFyXCIpO1xyXG4gIGNvbnN0IG1vYmlsZVNpZGViYXJUcmlnZ2VyRWxlbWVudCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIubW9iaWxlLXNpZGViYXItdHJpZ2dlclwiKTtcclxuICBjb25zdCBtb2JpbGVTaWRlYmFyQ2xvc2VUcmlnZ2VyRWxlbWVudCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIubW9iaWxlLXNpZGViYXJfX2Nsb3NlLXRyaWdnZXJcIik7XHJcbiAgY29uc3QgbW9iaWxlU2lkZWJhclNjcmVlbmxvY2tFbGVtZW50ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5tb2JpbGUtc2lkZWJhcl9fc2NyZWVubG9ja1wiKTtcclxuICBjb25zdCBtb2JpbGVTaWRlYmFySXRlbUVsZW1lbnRzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChcIi5tb2JpbGUtc2lkZWJhcl9faXRlbVwiKTtcclxuXHJcbiAgY29uc3QgbW9iaWxlU2lkZWJhckFjdGl2ZUNsYXNzID0gXCJtb2JpbGUtc2lkZWJhci0tYWN0aXZlXCI7XHJcblxyXG4gIGlmIChcclxuICAgICFtb2JpbGVTaWRlYmFyRWxlbWVudCBcclxuICAgIHx8ICFtb2JpbGVTaWRlYmFyVHJpZ2dlckVsZW1lbnQgXHJcbiAgICB8fCAhbW9iaWxlU2lkZWJhckNsb3NlVHJpZ2dlckVsZW1lbnQgXHJcbiAgICB8fCAhbW9iaWxlU2lkZWJhclNjcmVlbmxvY2tFbGVtZW50XHJcbiAgICB8fCBtb2JpbGVTaWRlYmFySXRlbUVsZW1lbnRzLmxlbmd0aCA9PT0gMCBcclxuICApIHtcclxuICAgIHJldHVybjtcclxuICB9XHJcblxyXG4gIGNvbnN0IG9wZW5TaWRlYmFyID0gKCkgPT4ge1xyXG4gICAgZG9jdW1lbnQuYm9keS5zdHlsZS5vdmVyZmxvdyA9IFwiaGlkZGVuXCI7XHJcbiAgICBtb2JpbGVTaWRlYmFyRWxlbWVudC5jbGFzc0xpc3QuYWRkKG1vYmlsZVNpZGViYXJBY3RpdmVDbGFzcyk7XHJcbiAgfTtcclxuXHJcbiAgY29uc3QgY2xvc2VTaWRlYmFyID0gKCkgPT4ge1xyXG4gICAgZG9jdW1lbnQuYm9keS5zdHlsZS5vdmVyZmxvdyA9IFwiYXV0b1wiO1xyXG4gICAgbW9iaWxlU2lkZWJhckVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZShtb2JpbGVTaWRlYmFyQWN0aXZlQ2xhc3MpO1xyXG4gIH07XHJcblxyXG4gIGNvbnN0IGhhbmRsZVJlc2l6ZSA9ICgpID0+IHtcclxuICAgIGNvbnN0IG1vYmlsZVdpZHRoTGltaXQgPSA3Njk7XHJcbiAgICBcclxuICAgIGlmICh3aW5kb3cuaW5uZXJXaWR0aCA+PSBtb2JpbGVXaWR0aExpbWl0KSB7XHJcbiAgICAgIGNsb3NlU2lkZWJhcigpO1xyXG4gICAgfVxyXG4gIH07XHJcblxyXG4gIG1vYmlsZVNpZGViYXJJdGVtRWxlbWVudHMuZm9yRWFjaChtb2JpbGVTaWRlYmFySXRlbUVsZW1lbnQgPT4ge1xyXG4gICAgY29uc3QgdHJpZ2dlciA9IG1vYmlsZVNpZGViYXJJdGVtRWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLm1vYmlsZS1zaWRlYmFyX19zdWJtZW51LXRyaWdnZXJcIik7XHJcbiAgICBjb25zdCBzdWJtZW51ID0gbW9iaWxlU2lkZWJhckl0ZW1FbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIubW9iaWxlLXNpZGViYXJfX3N1Ym1lbnVcIik7XHJcbiAgICBcclxuICAgIHRyaWdnZXIuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcclxuICAgICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChcIi5tb2JpbGUtc2lkZWJhcl9fc3VibWVudVwiKVxyXG4gICAgICAgIC5mb3JFYWNoKHN1Ym1lbnVFYWNoID0+IHtcclxuICAgICAgICAgIGlmIChzdWJtZW51RWFjaCAhPT0gc3VibWVudSkge1xyXG4gICAgICAgICAgICBzdWJtZW51RWFjaC5jbGFzc0xpc3QucmVtb3ZlKFwibW9iaWxlLXNpZGViYXJfX3N1Ym1lbnUtLWFjdGl2ZVwiKTtcclxuICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgICAgc3VibWVudS5jbGFzc0xpc3QudG9nZ2xlKFwibW9iaWxlLXNpZGViYXJfX3N1Ym1lbnUtLWFjdGl2ZVwiKTtcclxuICAgIH0pO1xyXG4gIH0pO1xyXG5cclxuICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcihcInJlc2l6ZVwiLCBoYW5kbGVSZXNpemUpO1xyXG4gIG1vYmlsZVNpZGViYXJUcmlnZ2VyRWxlbWVudC5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgb3BlblNpZGViYXIpO1xyXG4gIG1vYmlsZVNpZGViYXJDbG9zZVRyaWdnZXJFbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCBjbG9zZVNpZGViYXIpO1xyXG4gIG1vYmlsZVNpZGViYXJTY3JlZW5sb2NrRWxlbWVudC5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgY2xvc2VTaWRlYmFyKTtcclxufSkoKTtcclxuIiwiKCgpID0+IHtcclxuICBjb25zdCBhY2NvcmRpb25RdWVyeSA9IFwiLnJoLWFjY29yZGlvblwiO1xyXG4gIGNvbnN0IGFjY29yZGlvblRyaWdnZXJRdWVyeSA9IFwiLnJoLWFjY29yZGlvbl9fdHJpZ2dlclwiO1xyXG4gIGNvbnN0IGFjY29yZGlvbkFjdGl2ZUNsYXNzID0gXCJyaC1hY2NvcmRpb24tLWFjdGl2ZVwiO1xyXG5cclxuICBjb25zdCBhY2NvcmRpb25FbGVtZW50cyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoYWNjb3JkaW9uUXVlcnkpO1xyXG5cclxuICBpZiAoIWFjY29yZGlvbkVsZW1lbnRzKSB7XHJcbiAgICByZXR1cm47XHJcbiAgfVxyXG5cclxuICBhY2NvcmRpb25FbGVtZW50cy5mb3JFYWNoKGFjY29yZGlvbiA9PiB7XHJcbiAgICBhY2NvcmRpb24ucXVlcnlTZWxlY3RvcihhY2NvcmRpb25UcmlnZ2VyUXVlcnkpLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XHJcbiAgICAgIGFjY29yZGlvbi5jbGFzc0xpc3QudG9nZ2xlKGFjY29yZGlvbkFjdGl2ZUNsYXNzKTtcclxuICAgIH0pO1xyXG4gIH0pO1xyXG59KSgpO1xyXG4iLCIoKCkgPT4ge1xyXG4gIGNvbnN0IHRvdXJTZWFyY2hCdXR0b25FbGVtZW50ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5zZWFyY2gtZm9ybS1zd2l0Y2hfX2J1dHRvbl90b3VyXCIpO1xyXG4gIGNvbnN0IGhvdGVsU2VhcmNoQnV0dG9uRWxlbWVudCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuc2VhcmNoLWZvcm0tc3dpdGNoX19idXR0b25faG90ZWxcIik7XHJcbiAgY29uc3QgdG91clNlYXJjaEZvcm1FbGVtZW50ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5zZWFyY2gtZm9ybS1zd2l0Y2hfX2Zvcm1fdG91clwiKTtcclxuICBjb25zdCBob3RlbFNlYXJjaEZvcm1FbGVtZW50ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5zZWFyY2gtZm9ybS1zd2l0Y2hfX2Zvcm1faG90ZWxcIik7XHJcblxyXG4gIGlmIChcclxuICAgICF0b3VyU2VhcmNoQnV0dG9uRWxlbWVudCBcclxuICAgIHx8ICFob3RlbFNlYXJjaEJ1dHRvbkVsZW1lbnRcclxuICAgIHx8ICF0b3VyU2VhcmNoRm9ybUVsZW1lbnRcclxuICAgIHx8ICFob3RlbFNlYXJjaEZvcm1FbGVtZW50XHJcbiAgKSB7XHJcbiAgICByZXR1cm47XHJcbiAgfVxyXG5cclxuICBjb25zdCBidXR0b25BY3RpdmVDbGFzcyA9IFwic2VhcmNoLWZvcm0tc3dpdGNoX19idXR0b24tLWFjdGl2ZVwiO1xyXG4gIGNvbnN0IGZvcm1BY3RpdmVDbGFzcyA9IFwic2VhcmNoLWZvcm0tc3dpdGNoX19mb3JtLS1hY3RpdmVcIjtcclxuXHJcbiAgdG91clNlYXJjaEJ1dHRvbkVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcclxuICAgIHRvdXJTZWFyY2hCdXR0b25FbGVtZW50LmNsYXNzTGlzdC5hZGQoYnV0dG9uQWN0aXZlQ2xhc3MpO1xyXG4gICAgdG91clNlYXJjaEZvcm1FbGVtZW50LmNsYXNzTGlzdC5hZGQoZm9ybUFjdGl2ZUNsYXNzKTtcclxuICAgIGhvdGVsU2VhcmNoQnV0dG9uRWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKGJ1dHRvbkFjdGl2ZUNsYXNzKTtcclxuICAgIGhvdGVsU2VhcmNoRm9ybUVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZShmb3JtQWN0aXZlQ2xhc3MpO1xyXG4gIH0pO1xyXG5cclxuICBob3RlbFNlYXJjaEJ1dHRvbkVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcclxuICAgIGhvdGVsU2VhcmNoQnV0dG9uRWxlbWVudC5jbGFzc0xpc3QuYWRkKGJ1dHRvbkFjdGl2ZUNsYXNzKTtcclxuICAgIGhvdGVsU2VhcmNoRm9ybUVsZW1lbnQuY2xhc3NMaXN0LmFkZChmb3JtQWN0aXZlQ2xhc3MpO1xyXG4gICAgdG91clNlYXJjaEJ1dHRvbkVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZShidXR0b25BY3RpdmVDbGFzcyk7XHJcbiAgICB0b3VyU2VhcmNoRm9ybUVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZShmb3JtQWN0aXZlQ2xhc3MpO1xyXG4gIH0pO1xyXG59KSgpO1xyXG4iLCJkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKFwiRE9NQ29udGVudExvYWRlZFwiLCAoKSA9PiB7XHJcbiAgY29uc3Qgc2xpZGVyRWxlbWVudFF1ZXJ5ID0gXCIuYjJiLXRvcC1zbGlkZXJcIjtcclxuXHJcbiAgaWYgKGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3Ioc2xpZGVyRWxlbWVudFF1ZXJ5KSkge1xyXG4gICAgbmV3IFNwbGlkZShzbGlkZXJFbGVtZW50UXVlcnksIHtcclxuICAgICAgdHlwZTogXCJsb29wXCIsXHJcbiAgICAgIGF1dG9wbGF5OiB0cnVlLFxyXG4gICAgICBhcnJvd3M6IGZhbHNlXHJcbiAgICB9KS5tb3VudCgpO1xyXG4gIH1cclxufSk7XHJcblxyXG5kb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKFwiRE9NQ29udGVudExvYWRlZFwiLCAoKSA9PiB7XHJcbiAgY29uc3Qgc2xpZGVyRWxlbWVudFF1ZXJ5ID0gXCIud2l0aC15b3Utc2xpZGVyXCI7XHJcblxyXG4gIGlmIChkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwic2xpZGVyRWxlbWVudFF1ZXJ5XCIpKSB7XHJcbiAgICBuZXcgU3BsaWRlKHNsaWRlckVsZW1lbnRRdWVyeSwge1xyXG4gICAgICB0eXBlOiBcImxvb3BcIixcclxuICAgICAgcGFnaW5hdGlvbjogZmFsc2VcclxuICAgIH0pLm1vdW50KCk7XHJcbiAgfVxyXG59KTtcclxuXHJcbmRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJET01Db250ZW50TG9hZGVkXCIsICgpID0+IHtcclxuICBjb25zdCBzbGlkZXJFbGVtZW50UXVlcnkgPSBcIi5vdXItZ3Vlc3RzLXNsaWRlclwiO1xyXG4gIGNvbnN0IHNsaWRlckVsZW1lbnRRdWVyeU1vYmlsZSA9IFwiLm91ci1ndWVzdHMtc2xpZGVyLS1tb2JpbGVcIjtcclxuXHJcbiAgaWYgKGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3Ioc2xpZGVyRWxlbWVudFF1ZXJ5KSkge1xyXG4gICAgbmV3IFNwbGlkZShzbGlkZXJFbGVtZW50UXVlcnksIHtcclxuICAgICAgdHlwZTogXCJsb29wXCIsXHJcbiAgICAgIGF1dG9wbGF5OiB0cnVlLFxyXG4gICAgICBhcnJvd3M6IHRydWUsXHJcbiAgICAgIHBhZ2luYXRpb246IGZhbHNlLFxyXG4gICAgICBnYXA6IDIwLFxyXG4gICAgICBwZXJQYWdlOiAzXHJcbiAgICB9KS5tb3VudCgpO1xyXG4gIH1cclxuXHJcbiAgaWYgKGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3Ioc2xpZGVyRWxlbWVudFF1ZXJ5TW9iaWxlKSkge1xyXG4gICAgbmV3IFNwbGlkZShzbGlkZXJFbGVtZW50UXVlcnlNb2JpbGUsIHtcclxuICAgICAgdHlwZTogXCJsb29wXCIsXHJcbiAgICAgIGF1dG9wbGF5OiB0cnVlLFxyXG4gICAgICBhcnJvd3M6IHRydWUsXHJcbiAgICAgIHBhZ2luYXRpb246IGZhbHNlLFxyXG4gICAgICBwZXJQYWdlOiAxXHJcbiAgICB9KS5tb3VudCgpO1xyXG4gIH1cclxufSk7XHJcblxyXG5kb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKFwiRE9NQ29udGVudExvYWRlZFwiLCAoKSA9PiB7XHJcbiAgY29uc3Qgc2xpZGVyRWxlbWVudFF1ZXJ5ID0gXCIub3VyLWdvb2RzLXNsaWRlclwiO1xyXG5cclxuICBpZiAoZG9jdW1lbnQucXVlcnlTZWxlY3RvcihzbGlkZXJFbGVtZW50UXVlcnkpKSB7XHJcbiAgICBuZXcgU3BsaWRlKHNsaWRlckVsZW1lbnRRdWVyeSwge1xyXG4gICAgICB0eXBlOiBcImxvb3BcIixcclxuICAgICAgYXV0b3BsYXk6IGZhbHNlLFxyXG4gICAgICBhcnJvd3M6IGZhbHNlLFxyXG4gICAgICBwZXJQYWdlOiAxXHJcbiAgICB9KS5tb3VudCgpO1xyXG4gIH1cclxufSk7XHJcblxyXG5kb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKFwiRE9NQ29udGVudExvYWRlZFwiLCAoKSA9PiB7XHJcbiAgY29uc3Qgc2xpZGVyRWxlbWVudFF1ZXJ5ID0gXCIuYjJjLWJsb2ctc2xpZGVyXCI7XHJcbiAgY29uc3Qgc2xpZGVyRWxlbWVudFF1ZXJ5TW9iaWxlID0gXCIuYjJjLWJsb2ctc2xpZGVyLS1tb2JpbGVcIjtcclxuXHJcbiAgaWYgKGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3Ioc2xpZGVyRWxlbWVudFF1ZXJ5KSkge1xyXG4gICAgbmV3IFNwbGlkZShzbGlkZXJFbGVtZW50UXVlcnksIHtcclxuICAgICAgdHlwZTogXCJsb29wXCIsXHJcbiAgICAgIGF1dG9wbGF5OiBmYWxzZSxcclxuICAgICAgYXJyb3dzOiB0cnVlLFxyXG4gICAgICBwYWdpbmF0aW9uOiBmYWxzZSxcclxuICAgICAgZ2FwOiAyMCxcclxuICAgICAgcGVyUGFnZTogNFxyXG4gICAgfSkubW91bnQoKTtcclxuICB9XHJcblxyXG4gIGlmIChkb2N1bWVudC5xdWVyeVNlbGVjdG9yKHNsaWRlckVsZW1lbnRRdWVyeU1vYmlsZSkpIHtcclxuICAgIG5ldyBTcGxpZGUoc2xpZGVyRWxlbWVudFF1ZXJ5TW9iaWxlLCB7XHJcbiAgICAgIHR5cGU6IFwibG9vcFwiLFxyXG4gICAgICBhdXRvcGxheTogdHJ1ZSxcclxuICAgICAgYXJyb3dzOiB0cnVlLFxyXG4gICAgICBwYWdpbmF0aW9uOiBmYWxzZSxcclxuICAgICAgcGVyUGFnZTogMVxyXG4gICAgfSkubW91bnQoKTtcclxuICB9XHJcbn0pO1xyXG5cclxuIl19
